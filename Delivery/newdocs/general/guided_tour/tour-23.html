<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="tour.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> 22  MODIFYING AND MELTING</TITLE>
</HEAD>
<!--------------------------------------------------->
<SCRIPT LANGUAGE="Javascript">
	// Default values
	var oNewWindow = 0;

	function ImageClick( oImage )
	{
		if( oNewWindow == 0 || oNewWindow.closed )
		{
			oNewWindow = window.open (oImage.src,"", "status=no, toolbar=no, menubar=no, location=no, resizable=yes");
		}
		else
		{
			oNewWindow.location = oImage.src;
		}
	}
</SCRIPT>
<!--------------------------------------------------->
<body bgcolor="#faf0e6">
<DIV>
<p class="top" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="index.html">Getting started with Eiffel (local)</a>

<img src="power.gif" ALT="Eiffel Home Page" align="right" border="0"  usemap="#eiffel"><map name="eiffel"><area shape="RECT" alt="Eiffel Home Page" coords="0,0,109,226" HREF="http://www.eiffel.com"><area shape="default" nohref></map>

<p class="top" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="tour-22.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="tour.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="tour-24.html"><area shape="default" nohref></MAP>
</DIV>
<H1 CLASS="aa-sec2">
<A NAME="pgfId-438888"></A>22  MODIFYING AND MELTING</H1>
<P CLASS="nn-first">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="tour-help.html">Help reading this manual</a>
<P CLASS="nn-first">
<A NAME="pgfId-438891"></A>The <A NAME="marker-438889"></A>next fundamental <A NAME="marker-438890"></A>aspect of EiffelStudio is the facility for modifying one or more classes and recompiling the system quickly through the melting mechanism.
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-438892"></A>Editing a class text</H2>
<P CLASS="nn-first">
<A NAME="pgfId-438893"></A>Let us use class <SPAN CLASS="ee-keyword">
HEIR </SPAN>
as the class to be modified. You know how to get a Class Tool targeted to it: take an existing Class Tool and retarget it by typing the name of the class in the top text field; or use proximity drag-and-drop, starting for example from the System Tool in Clusters format , where you will see the class listed among those of <SPAN CLASS="ee-keyword">
root_cluster</SPAN>
.
<P CLASS="nn-normal">
<A NAME="pgfId-438900"></A>Here is the beginning of the class text:
<P CLASS="nn-normal">
<A NAME="pgfId-438901"></A>The change that you are asked to make is to add, after procedure <SPAN CLASS="ee-keyword">
display </SPAN>
and just before <SPAN CLASS="ee-keyword">
display_routine</SPAN>
, a procedure <SPAN CLASS="ee-keyword">
new_ message </SPAN>
that reads as follows:
<p><ul><table bgcolor="#cfffcf" width="79%" BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<UL>
<LI CLASS="jj-display">
<A NAME="pgfId-438904"></A><SPAN CLASS="ee-keyword">
new_message is</SPAN>
</LI>
<LI CLASS="jj-display">
<A NAME="pgfId-438905"></A><SPAN CLASS="ee-keyword">
        do</SPAN>
</LI>
<LI CLASS="jj-display">
<A NAME="pgfId-438906"></A><SPAN CLASS="ee-keyword">
                 io</SPAN>
<SPAN CLASS="ee-dot">
.</SPAN>
<SPAN CLASS="ee-keyword">
put_string (&quot;Message added later&quot;)</SPAN>
</LI>
<LI CLASS="jj-display">
<A NAME="pgfId-438907"></A><SPAN CLASS="ee-keyword">
                 io</SPAN>
<SPAN CLASS="ee-dot">
.</SPAN>
<SPAN CLASS="ee-keyword">
put_new_line</SPAN>
</LI>
<LI CLASS="jj-display">
<A NAME="pgfId-438908"></A><SPAN CLASS="ee-keyword">
       end</SPAN>
</LI>
</UL>
</TD>
</TR>
</table></ul><p>
<P CLASS="nn-normal">
<A NAME="pgfId-438909"></A>Then at the very beginning of <SPAN CLASS="ee-keyword">
display </SPAN>
add a call to the new procedure, so that the first four lines of the <SPAN CLASS="ee-keyword">
display</SPAN>
 procedure now read:
<DIV>
<MAP NAME="tour-72">
</MAP>
<p>
<ul>
<A TARGET="screenshots" HREF="tour-72.png"><IMG WIDTH="100" SRC="tour-72.png"></A>
</ul>
<p>
</DIV>
<P CLASS="nn-normal">
<A NAME="pgfId-438929"></A>To do these modifications just left-click at the place where you need to insert text, and type it. The Class Tool gives you access to the editing facilities provided by the underlying toolkit. You can use Backspace and arrow keys; you can also replace text by selecting it with the mouse (or double-clicking) and typing the replacement over it. 
<P CLASS="nn-normal">
<A NAME="pgfId-438938"></A>As soon as you started typing anything into the text, the <A NAME="marker-438933"></A>Save <A NAME="marker-438934"></A>button in the top row of buttons changed into a different icon , representing an open file to indicate that the text has been modified. Once you have finished the changes, click that button to save the modified text; the button goes back to the original icon .
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-438948"></A>Melting</H2>
<P CLASS="nn-first">
<A NAME="pgfId-438952"></A>Having saved the new text of the class, you may perform a quick recompilation. Just click the <A NAME="marker-438953"></A><A NAME="marker-438954"></A>Quick Melt button of the <A NAME="marker-438958"></A>Project Tool as you did for the first compilation. The melting process starts; during that process, as during a freeze, the cursor icon in any EiffelStudio window will have the form of a small hourglass and you are prevented from performing any actions. 
<P CLASS="jj-small">
<A NAME="pgfId-438959"></A>The change above is simple enough that you should not make any mistake, but if you do run into a compilation error and the correction is not obvious check the next two sections, which talk about errors and how to fix them.
<P CLASS="nn-normal">
<A NAME="pgfId-438960"></A>After a few seconds, the system will be back ready for use again, with your modifications taken into account. During the melting process, messages of the form &quot;<A NAME="marker-438961"></A><SPAN CLASS="ee-keyword">
Degree </SPAN>
<SPAN CLASS="ee-text">
n</SPAN>
<SPAN CLASS="ee-keyword">
: class </SPAN>
<SPAN CLASS="ee-text">
XXX</SPAN>
&quot;, will appear in the Project Tool, as during your first compilation, but there will be fewer of them: EiffelStudio automatically determines the smallest possible set of classes that must be recompiled. For this particular change, this set only includes <SPAN CLASS="ee-keyword">
HEIR</SPAN>
, so all that happens is degrees 5, 4, 3, 2 and 1 on this class, then &quot;Melting changes&quot; and we are done.
<P CLASS="nn-normal">
<A NAME="pgfId-438962"></A>If you have left any Class or Feature Tool in a format other than the default (Text), the compilation will reset the tool to show the corresponding target in Text format. The reason for this convention is easy to understand: it would be inappropriate to leave the tool in its original state, which might show an obsolete version of the target class or feature; but updating a format other than Text -- for example Flat or Flat-short -- would needlessly slow down the melting process. You may revert to a format other than Text by clicking on the corresponding format button.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-438963"></A>The melting process</H2>
<P CLASS="nn-first">
<A NAME="pgfId-438966"></A>Just to see the automatic dependency analysis process at work, click again on the <A NAME="marker-438964"></A><A NAME="marker-438965"></A>Melt button. EiffelStudio looks at the system to see what has happened since the last melting or freezing, sees that nothing has changed, and returns control to you. The analysis is instantaneous.
<P CLASS="nn-normal">
<A NAME="pgfId-438967"></A>As noted earlier, there is never any need to tell EiffelStudio about what you have changed, or to specify class dependencies through <A NAME="marker-438968"></A>Make files or similar traditional techniques; the analysis of changes and class relations is entirely <A NAME="marker-438969"></A>automatic.<A NAME="marker-438970"></A>
<P CLASS="nn-normal">
<A NAME="pgfId-438976"></A>This fast, incremental and automatic compilation mechanism is at the heart of ISE Eiffel's Melting Ice Technology, on which the chapter on compiling will give more details.
</DIV>
<p class="bottom" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="tour-22.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="tour.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="tour-24.html"><area shape="default" nohref></MAP>

<p class="bottom" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="index.html">Getting started with Eiffel (local)</a>

<p class="copyright" align="center">Copyright Interactive Software Engineering, 2001
</BODY>
</HTML>
