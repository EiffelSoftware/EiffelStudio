test_name	scoop-wait-condition-controlled
test_description Test if a precondition whose target involves an already controlled object is correctly treated as a correctness condition. This test needs manual execution because it may cause a hang when running melted mode.

-- NOTE: Once this test is fixed, test#scoop042 can be changed to use melted instead of freezing compilation.

copy_sub	Ace	$TEST Ace
copy_raw	test.e	$CLUSTER test.e

compile_melted
compile_result ok

execute_work NONE exec_output_m
execute_result	ok
compare exec_output_m output

compile_frozen
compile_result 	ok
c_compile_work
c_compile_result ok

execute_work NONE exec_output_w
execute_result	ok
compare exec_output_w output

--compile_final
--compile_result ok
--c_compile_final
--c_compile_result ok

--execute_final NONE exec_output_c
--execute_result	ok
--compare exec_output_c output

test_end
