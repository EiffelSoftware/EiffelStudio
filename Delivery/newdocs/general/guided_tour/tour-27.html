<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="tour.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> 26  DEBUGGING AND EXECUTION CONTROL</TITLE>
</HEAD>
<!--------------------------------------------------->
<SCRIPT LANGUAGE="Javascript">
	// Default values
	var oNewWindow = 0;

	function ImageClick( oImage )
	{
		if( oNewWindow == 0 || oNewWindow.closed )
		{
			oNewWindow = window.open (oImage.src,"", "status=no, toolbar=no, menubar=no, location=no, resizable=yes");
		}
		else
		{
			oNewWindow.location = oImage.src;
		}
	}
</SCRIPT>
<!--------------------------------------------------->
<body bgcolor="#faf0e6">
<DIV>
<p class="top" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="index.html">Getting started with Eiffel (local)</a>

<img src="power.gif" ALT="Eiffel Home Page" align="right" border="0"  usemap="#eiffel"><map name="eiffel"><area shape="RECT" alt="Eiffel Home Page" coords="0,0,109,226" HREF="http://www.eiffel.com"><area shape="default" nohref></map>

<p class="top" ALIGN="left"><IMG SRC="lastdoc.gif" ALT="Previous, Up" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="tour-26.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="tour.html"><area shape="default" nohref></MAP>
</DIV>
<H1 CLASS="aa-sec2">
<A NAME="pgfId-439146"></A>26  <A NAME="marker-439145"></A>DEBUGGING AND EXECUTION CONTROL</H1>
<P CLASS="nn-first">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="tour-help.html">Help reading this manual</a>
<P CLASS="nn-first">
<A NAME="pgfId-439147"></A>To finish this tour it is appropriate to get a first glimpse of the debugging facilities, which are better characterized as facilities for watching what goes on at execution time. Bugs or not, they will allow you to follow what happens at execution time, both to keep watch of the control side (the successive instructions) and to explore objects, their contents and their relations.
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-439148"></A>Execution control</H2>
<P CLASS="nn-first">
<A NAME="pgfId-439150"></A>The main new notion is that of <A NAME="marker-439149"></A>stop point. Stop points will enable controlling the execution of a routine.
<P CLASS="nn-normal">
<A NAME="pgfId-439151"></A>To put a stop point on a routine, you will pick the routine anywhere -- using any of the techniques that you have learned -- and drag-and-drop its pebble to a Stop Point hole , which you will find in either the Project Tool or a Feature Tool.
<P CLASS="nn-normal">
<A NAME="pgfId-439169"></A>Right now perform this operation on each of the two procedures <SPAN CLASS="ee-keyword">
display </SPAN>
and <SPAN CLASS="ee-keyword">
first_message </SPAN>
of class <SPAN CLASS="ee-keyword">
PARENT</SPAN>
; to get to these procedures it suffices to target or retarget a Class Tool to that class. After each drop the Project Tool window shows the list of active stop points; here is the display after you have put both stop points:
<P CLASS="nn-normal">
<A NAME="pgfId-439174"></A>The numbers in brackets <SPAN CLASS="ee-keyword">
[1]</SPAN>
 following the routine names indicate the position of the stop point in the routine. Here each stop point is at the beginning, hence the <SPAN CLASS="ee-keyword">
1</SPAN>
; as we will see later it is also possible to put stop points on individual instructions.
<P CLASS="nn-normal">
<A NAME="pgfId-439175"></A>You can remove a stop point later by dropping the routine again into the Stop Point hole, which acts as a toggle switch. To do so you can pick it anywhere, including at the place where it appears in the list of stop points.
<P CLASS="nn-normal">
<A NAME="pgfId-439182"></A>Now click the Run button again. (On Windows, the Console window used for output in the previous run is still up, press Return in that window to dismiss it and avoid cluttering the screen). The application will stop on the first stop point:
<P CLASS="nn-normal">
<A NAME="pgfId-439193"></A>On Windows, a new console will have appeared, showing part of the output of the new execution and obscuring part of the above display; to see that display, move the console away (without dismissing it), using the Windows dragging mechanism.
<P CLASS="nn-normal">
<A NAME="pgfId-439200"></A>The Project Tool display shows the reason for interrupting the execution: <SPAN CLASS="ee-keyword">
Stop point reached</SPAN>
. Other possibilities include &quot;Implicit exception pending&quot;, meaning that a run-time error has occurred, and EiffelStudio has caught the exception just prior to it arising, so that you can use the browsing and debugging facilities to identifiy and correct the problem.
<P CLASS="nn-normal">
<A NAME="pgfId-439201"></A>The tool also shows the state of the execution with the current call hierarchy. The <SPAN CLASS="ee-keyword">
Call stack</SPAN>
 in the lower part of the window shows the execution path. Reading from bottom to top: the first call applied procedure <SPAN CLASS="ee-keyword">
make </SPAN>
to the root object, an instance of class <SPAN CLASS="ee-keyword">
TESTROOT</SPAN>
 identified as <SPAN CLASS="ee-keyword">
[0xD6F6Ac]</SPAN>
. This triggered a call to procedure<SPAN CLASS="ee-keyword">
 display</SPAN>
 of class <SPAN CLASS="ee-keyword">
PARENT </SPAN>
applied to an object identified as <SPAN CLASS="ee-keyword">
[0xD6F6B0]</SPAN>
; if you look at the text of <SPAN CLASS="ee-keyword">
TESTROOT</SPAN>
 you will find out that this must be the object attached to the attribute <SPAN CLASS="ee-keyword">
o2</SPAN>
 and resulting from the second creation instruction in the procedure <SPAN CLASS="ee-keyword">
make</SPAN>
.
<P CLASS="nn-normal">
<A NAME="pgfId-439202"></A>The object identifiers, such as <SPAN CLASS="ee-keyword">
[0xD6F324]</SPAN>
, correspond to the last major kind of developer abstraction that we have not seen yet: run-time objects, created during execution time as instances of classes in your system. They will be referred to as <A NAME="marker-439203"></A>execution objects (rather than just &quot;objects&quot;) to avoid any confusion with the other kinds of development object. The numbers identifying execution objects are internal codes, which will probably be different when you run this example on your computer. They do not mean much by themselves, except to determine whether two execution objects are the same. But they represent abstractions: class instances. So you can control-right-click any of them to see the corresponding run-time object and its fields. (You don't need to do this now.)
<P CLASS="nn-normal">
<A NAME="pgfId-439205"></A>As usual, everything of interest is <A NAME="marker-439204"></A>clickable. So for example if you wanted to see the body of the routine in which execution stopped, you could control-right-click <SPAN CLASS="ee-keyword">
display</SPAN>
 to bring up a Feature Tool for that feature.
<P CLASS="nn-normal">
<A NAME="pgfId-439212"></A>There is a simpler way. Click the two buttons in the middle top of the Project Tool: Routine and Execution Object . The Project Tool gets two new attached subwindows:
<P CLASS="nn-normal">
<A NAME="pgfId-439223"></A>The new windows -- which you can dismiss at any time by clicking on their icons, which have changed to and -- are a Feature Tool and an Execution Object Tool. They are attached to the execution, and so will always reflect the current routine (the latest one whose execution is in progress) the current object (the object on which execution has stopped). Here the targets are the procedure <SPAN CLASS="ee-keyword">
display</SPAN>
 and the instance of <SPAN CLASS="ee-keyword">
PARENT</SPAN>
 that, as we noted, is attached to <SPAN CLASS="ee-keyword">
o2</SPAN>
.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-439230"></A>The Stop Point format of Feature Tools</H2>
<P CLASS="nn-first">
<A NAME="pgfId-439231"></A>The middle part of the window -- the attached Feature Tool -- is an example of the only format of Feature Tools that we have not seen: the Stop Point format . You can actually apply this format, during execution, to any Feature Tool, not just the one attached to the Project Tool. To see this, control-right-click <SPAN CLASS="ee-keyword">
make</SPAN>
 from <SPAN CLASS="ee-keyword">
DISPLAY</SPAN>
 (you'll find it in the top part of the Project Tool) to get a Feature Tool targeted to that creation procedure; then click the Stop Point format of that window:
<P CLASS="nn-normal">
<A NAME="pgfId-439248"></A>The red markers in the left margin correspond to potential stop points, each for one of the instructions of the routine. For the active instruction (in <SPAN CLASS="ee-keyword">
display</SPAN>
of <SPAN CLASS="ee-keyword">
PARENT</SPAN>
, see the preceding figure), the marker appears as an arrow. There are three forms of markers: <SPAN CLASS="ee-stoppoint">
:::</SPAN>
 for a potential stop point, <SPAN CLASS="ee-stoppoint">
||| </SPAN>
for an actual stop point (we will see an example next), <SPAN CLASS="ee-stoppoint">
- - &gt;</SPAN>
 for the current execution position.
<P CLASS="nn-normal">
<A NAME="pgfId-439252"></A>You can drag-and-drop such a marker into a Stop Point hole to put a stop point on an individual instruction. Do this now on the third instruction, <SPAN CLASS="ee-keyword">
!! o2</SPAN>
, of <SPAN CLASS="ee-keyword">
make</SPAN>
 (you can use the Stop Point hole of the tool itself).The top part of the Project Tool shows the presence of the new stop point under the form <SPAN CLASS="ee-keyword">
make [3]</SPAN>
, where the <SPAN CLASS="ee-keyword">
3</SPAN>
 indicates that this is the third instruction. The new stop point is useless for this execution, since we have already passed that instruction, but will apply to subsequent executions.
<P CLASS="nn-normal">
<A NAME="pgfId-439266"></A>The display in the top part of the Project Tool has changed to Stop Point format, showing the current stop points. You can bring it back to the default format, to show the current state of execution (as we had before: <SPAN CLASS="ee-keyword">
Stopped at object</SPAN>
 etc.) by clicking the Execution Status button , the one just next to Run in the right part of the second row of icons. To get Stop Point formats back and see the current stop points, click Stop Points (the rightmost hole in the left part of the top row of icons, used previously as a hole and serving now as a button). 
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-439279"></A>Execution modes and stoppable routines</H2>
<P CLASS="nn-first">
<A NAME="pgfId-439286"></A>Click Run once more to resume execution. The first few lines of output appear (in the console window on Windows, the shell window on Unix and VMS; execution stops at the next stop point, the one at the beginning of procedure <SPAN CLASS="ee-keyword">
first_message </SPAN>
of class <SPAN CLASS="ee-keyword">
PARENT</SPAN>
. The display goes back to showing the execution status format (no need to click ).
<P CLASS="nn-normal">
<A NAME="pgfId-439290"></A>The second row of icons of the Project Tool shows, at the left, a set of <SPAN CLASS="ff-bold">
execution formats </SPAN>
that govern execution. The first one, , To Next Stop Point, is the default; under this execution mode, which we have used so far, execution continues until it hits a stop point, an exception, or termination. Click now the second mode, Step by Step. Under this format, execution will proceed instruction by instruction in the applicable routines. Nothing happens yet; resume execution under this Step by Step format by clicking Run . 
<P CLASS="nn-normal">
<A NAME="pgfId-439307"></A>The execution pointer <SPAN CLASS="ee-stoppoint">
- - &gt; </SPAN>
has moved down one position; the first instruction of the routine, <SPAN CLASS="ee-keyword">
io</SPAN>
<SPAN CLASS="ee-dot">
.</SPAN>
<SPAN CLASS="ee-keyword">
put_string (&quot;In class PARENT&quot;)</SPAN>
. This instruction has indeed been executed -- producing, as you may have noted on your screen, one more line of output (in the Windows console or the Unix/VMS shell window). Click Run once more to see the execution pointer moving to the next instruction.
<P CLASS="nn-normal">
<A NAME="pgfId-439314"></A>The other execution formats are , End of Routine, which executes the current routine all the way to the end, and , Ignore, which simply ignores stop points. You can remove a stop point by drag-and-dropping it to a Stop hole (it remains in the display, but shown as inactive, to facilitate reinstating it later, again by drag-and-drop into such a hole); you can also use the Remove <A NAME="marker-439318"></A>Stop Points button at the top of the Project Tool, or the corresponding entry in the Debug menu. There is no need to try any of this now.
<P CLASS="nn-normal">
<A NAME="pgfId-439322"></A>The execution formats are only formats: they define how to execute next, but do not execute by themselves; to restart execution, you should click Run . If you prefer to define a format and execute immediately under this format, just <SPAN CLASS="ff-bold">
control-left-click</SPAN>
 the format; for example control-left-clicking on Step by Step will resume exeuction in Step by Step format.
<P CLASS="nn-normal">
<A NAME="pgfId-439329"></A>This is, by the way, another general convention in ISE Eiffel: in many cases control-clicking a button will perform the button's basic action, <SPAN CLASS="ff-italics">
plus something</SPAN>
 complementary. Here is another example (although we don't need to use it at this stage of the tour): control-clicking Quick Melt , rather than just clicking this button, will not only recompile but also execute, saving you a click Run after Quick Melt.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-439336"></A>Stopping execution</H2>
<P CLASS="nn-first">
<A NAME="pgfId-439337"></A>While a system is running, you can interrupt its execution by clicking on the Interrupt button . This stops it in the closest <SPAN CLASS="ff-bold">
stoppable routine. A stoppable routine is one into which you have put at least one stop point (even if you have since made the stop point inactive, or removed it altogether).</SPAN>

<P CLASS="nn-normal">
<A NAME="pgfId-439341"></A>Here the system is not running but already interrupted at a stop point. To terminate its execution, <SPAN CLASS="ff-bold">
control-click</SPAN>
 now on Interrupt . (Note the difference: a simple click on this icon interrupts; control-click terminates. This is in line with the just cited general convention. ) The Project Tool displays <SPAN CLASS="ee-keyword">
System terminated</SPAN>
.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-439348"></A>Object Tools</H2>
<P CLASS="nn-first">
<A NAME="pgfId-439352"></A>The Project Tool should still show Step by Step as the active execution format; return to the default format, To Next Stop Point, by clicking the corresponding button . Start a new execution by clicking Run . (Alternatively, you can do this in a single operation by control-clicking the format icon.)
<P CLASS="nn-normal">
<A NAME="pgfId-439365"></A>You may remember that you added a stop point on the third instruction of the creation procedure, <SPAN CLASS="ee-keyword">
make</SPAN>
 from <SPAN CLASS="ee-keyword">
testroot</SPAN>
. Execution stops there
<P CLASS="nn-normal">
<A NAME="pgfId-439370"></A>So far we have not paid special attention to the bottom attached subwindow. It appeared when you clicked the button that then appeared as , in the middle of the top row of buttons, and now appears as . (If you wanted to dismiss the subwindow you would click that button, which would then revert to its original appearance.)
<P CLASS="nn-normal">
<A NAME="pgfId-439377"></A>This subwindow is an <SPAN CLASS="ff-bold">
Execution Objet Tool </SPAN>
(just Object Tool for short), used during execution and debugging to show the state of execution objects. Since this particular tool is &quot;attached&quot;, it shows the current ohject: the one in which execution stopped. (Likewise, the subwindow immediately above, a Feature Tool, shows the current routine, currently being executed.)
<P CLASS="nn-normal">
<A NAME="pgfId-439378"></A>An Object Tool shows the contents of an object. It has one field for each attribute of the generating class. Here the object is an instance of <SPAN CLASS="ee-keyword">
TESTROOT</SPAN>
, as shown in the tool itself. As you may have guessed, this class name is clickable, so if you are studying an object you can easily refer back to the text of the corresponding class.
<P CLASS="nn-normal">
<A NAME="pgfId-439379"></A>An instance of class <SPAN CLASS="ee-keyword">
TESTROOT</SPAN>
, as you can see from the display, has three fields, corresponding to the attributes <SPAN CLASS="ee-keyword">
inv</SPAN>
, <SPAN CLASS="ee-keyword">
o1</SPAN>
 and <SPAN CLASS="ee-keyword">
o2</SPAN>
. They are all of reference types; in other examples you will also encounter fields of basic types -- booleans, integers, reals -- whose current values will be displayed in Object Tools.
<P CLASS="nn-normal">
<A NAME="pgfId-439380"></A>Here two of the references are void, but <SPAN CLASS="ee-keyword">
o1</SPAN>
, of type <SPAN CLASS="ee-keyword">
HEIR</SPAN>
, is not; as you can see from the attached Feature Tool immediately above, this is because you just executed the instruction <SPAN CLASS="ee-keyword">
! HEIR ! o1</SPAN>
 which created an object and attached it to <SPAN CLASS="ee-keyword">
o1</SPAN>
. 
<P CLASS="nn-normal">
<A NAME="pgfId-439384"></A>To see this object in a new Object Tool, control-right-click the object's name, here <SPAN CLASS="ee-keyword">
OxD6F6B0</SPAN>
 (again, the exact numerical value will probably different on your computer). Make sure to click the object name; clicking on the class name, <SPAN CLASS="ee-keyword">
HEIR</SPAN>
, would instead bring up a Class Tool targeted to class <SPAN CLASS="ee-keyword">
HEIR</SPAN>
, which is not what we want just now.
<P CLASS="nn-normal">
<A NAME="pgfId-439389"></A>The display is not very interesting, since class <SPAN CLASS="ee-keyword">
HEIR</SPAN>
 has no attribute, so the object has no fields. But the class has <SPAN CLASS="ff-bold">
once functions</SPAN>
. Remember that a once function is a function that is executed only the first time someone calls it during an execution; subsequent calls will return the same value, without executing anything else. This is a particularly convenient mechanism for sharing objects. To see the values of once functions, as well as those of constant attributes (there are none here), click now the Once and Constants format button of the Object Tool. Here is the result:
<P CLASS="nn-normal">
<A NAME="pgfId-439400"></A>The first once function is <SPAN CLASS="ee-keyword">
io</SPAN>
, inherited from the &quot;Mother of all classes&quot;, class <SPAN CLASS="ee-keyword">
GENERAL</SPAN>
, of which every class automatically inherits. This is the function that gives access to standard input and output, enabling you for example to output a string in instructions such as <SPAN CLASS="ee-keyword">
io</SPAN>
<SPAN CLASS="ee-dot">
.</SPAN>
<SPAN CLASS="ee-keyword">
put_string (&quot;In class PARENT&quot;)</SPAN>
; since in this execution we have already executed such instructions, <SPAN CLASS="ee-keyword">
io</SPAN>
 has been evaluated and is attached to an object of type <SPAN CLASS="ee-keyword">
STD_FILES</SPAN>
 (which you can explore if you want to).
<P CLASS="nn-normal">
<A NAME="pgfId-439401"></A>The other function, also from <SPAN CLASS="ee-keyword">
GENERAL</SPAN>
, is <SPAN CLASS="ee-keyword">
operating_environment</SPAN>
. The display indicates that this function has not yet been called, so there is no associated value.
<P CLASS="nn-normal">
<A NAME="pgfId-439405"></A>Note the shape of the hole for execution objects: , suggesting an object with its division into fields. The corresponding pebble shape is . You can perform drag-and-drop operations on execution objects in the same way that you perform such operations on classes, features and stop points.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-439409"></A>Other debugging facilities</H2>
<P CLASS="nn-normal">
<A NAME="pgfId-439410"></A>There will be more facilities to discover in the debugging mechanism. Of particular interest is its ability to stop on an exception before the exception occurs. You are notified of an impending exception (assertion violation, call applied to void reference, operating system signal or other) and have the opportunity to use all the facilities of EiffelStudio to analyze the exact conditions that led to this exception, and the surrounding object structure. This will be studied as part of the more general discussion of debugging in chapter <A HREF="..html#16851" CLASS="XRef"><SPAN CLASS="hh-link">
10</SPAN>
</A>.
<P CLASS="nn-normal">
<A NAME="pgfId-439414"></A>Beyond debugging, all these facilities are precious for understanding your software better by following step by step what happens at execution time and exploring the run-time object structures -- often sophisticated, and hence sometimes complex -- made possible by the method, the language and the libraries.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-439415"></A>On debugging</H2>
<P CLASS="nn-first">
<A NAME="pgfId-439416"></A>A particularly important property of the symbolic debugging mechanisms of EiffelStudio, of which we have now seen the basics, is that they are not exclusive of other mechanisms.
<P CLASS="nn-normal">
<A NAME="pgfId-439417"></A>There is no &quot;debugger&quot; in the sense of a separate tool, or debugging mode, any more than there is a separate &quot;browser&quot; or a browsing mode. At every step of your work, assuming you have produced an executable system, you have access to all the browsing facilities <SPAN CLASS="ff-italics">
and</SPAN>
 the debugging facilities. They are all integrated into a single set of powerful mechanisms, not requiring you to switch between different tools or different modes. This is a consequence of the general design principles of ISE EIffel, meant to ensure convenient and effective user interfaces. The next two chapters will review these principles.<BR>
                    <A NAME="marker-439418"></A>              <A NAME="marker-439419"></A>                <A NAME="marker-439420"></A>          <A NAME="marker-439421"></A>                <A NAME="marker-439422"></A>
<P CLASS="nn-normal">
<A NAME="pgfId-494850"></A> 
<P CLASS="nn-first">
<A NAME="pgfId-437752"></A>&nbsp;
</DIV>
<p class="bottom" ALIGN="left"><IMG SRC="lastdoc.gif" ALT="Previous, Up" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="tour-26.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="tour.html"><area shape="default" nohref></MAP>

<p class="bottom" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="index.html">Getting started with Eiffel (local)</a>

<p class="copyright" align="center">Copyright Interactive Software Engineering, 2001
</BODY>
</HTML>
