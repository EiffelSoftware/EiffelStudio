<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="invitation.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> 13  DEFERRED CLASSES AND SEAMLESS DEVELOPMENT</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<p class="top" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="index.html">Getting started with Eiffel (local)</a>

<img src="power.gif" ALT="Eiffel Home Page" align="right" border="0"  usemap="#eiffel"><map name="eiffel"><area shape="RECT" alt="Eiffel Home Page" coords="0,0,109,226" HREF="http://www.eiffel.com"><area shape="default" nohref></map>

<p class="top" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="invitation-13.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="invitation.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="invitation-15.html"><area shape="default" nohref></MAP>
</DIV>
<H1 CLASS="aa-sec2">
<A NAME="pgfId-513344"></A>13  DEFERRED CLASSES AND SEAMLESS DEVELOPMENT</H1>
<P CLASS="nn-first">
<A NAME="pgfId-445526"></A>T<A NAME="marker-445525"></A>he inheritance mechanism includes one more major notion: deferred features and classes. </P>
<P CLASS="nn-normal">
<A NAME="pgfId-445527"></A>Declaring a feature <SPAN CLASS="ee-text">
f</SPAN>
 as deferred in a class <SPAN CLASS="ee-text">
C</SPAN>
 expresses that there is no default implementation of<SPAN CLASS="ee-text">
 f</SPAN>
 in <SPAN CLASS="ee-text">
C</SPAN>
; such implementations will appear in eventual descendants of <SPAN CLASS="ee-text">
C</SPAN>
. A class that has one or more deferred routines is itself said to be deferred. A non-deferred routine or class -- like all those seen until now -- is said to be <SPAN CLASS="ff-bold">
effective</SPAN>
<A NAME="marker-445528"></A>. </P>
<P CLASS="nn-normal">
<A NAME="pgfId-445529"></A>For example, a system used by a Department of Motor Vehicles to register vehicles might include a class of the form</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="ee-text">
<A NAME="pgfId-512611"></A><SPAN CLASS="ee-keyword">
deferred class</SPAN>
 VEHICLE <SPAN CLASS="ee-keyword">
feature</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-512612"></A>	dues_paid (year: INTEGER): BOOLEAN <SPAN CLASS="ee-keyword">
is</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-512613"></A>		<SPAN CLASS="ee-keyword">
do</SPAN>
... <SPAN CLASS="ee-keyword">
end</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-512614"></A>	valid_plate (year: INTEGER): BOOLEAN <SPAN CLASS="ee-keyword">
is</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-512615"></A>		<SPAN CLASS="ee-keyword">
do</SPAN>
... <SPAN CLASS="ee-keyword">
end</SPAN>
</P>
</TD>
</TR>
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="ee-text">
<A NAME="pgfId-445538"></A><SPAN CLASS="ee-keyword">
</SPAN>
<A NAME="marker-445532"></A>	register (year: INTEGER) <SPAN CLASS="ee-keyword">
is</SPAN>
</P>
<P CLASS="ee-comment">
<A NAME="pgfId-445539"></A>			-- Register vehicle for year.</P>
<P CLASS="ee-text">
<A NAME="pgfId-445540"></A>		<SPAN CLASS="ee-keyword">
require</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445541"></A>			 dues_paid (year) </P>
<P CLASS="ee-text">
<A NAME="pgfId-445542"></A>		<SPAN CLASS="ee-keyword">
deferred</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445543"></A>		<SPAN CLASS="ee-keyword">
ensure</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445544"></A>	 		valid_plate (year)</P>
<P CLASS="ee-text">
<A NAME="pgfId-445545"></A>		<SPAN CLASS="ee-keyword">
end</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445546"></A><SPAN CLASS="ee-comment">
... Other features, deferred or effective...</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445547"></A><SPAN CLASS="ee-keyword">
end</SPAN>
<SPAN CLASS="ee-text">
 -- </SPAN>
<SPAN CLASS="ee-comment">
class</SPAN>
<SPAN CLASS="ee-text">
 VEHICLE </SPAN>
</P>
</TD>
</TR>
</TABLE>
<P CLASS="nn-first">
<A NAME="pgfId-445548"></A>This example assumes that no single registration algorithm applies to all kinds of vehicle; passenger cars, motorcycles, trucks etc. are all registered differently. But the same precondition and postcondition apply in all cases. The solution is to treat <SPAN CLASS="ee-text">
register</SPAN>
 as a deferred routine, making <SPAN CLASS="ee-text">
VEHICLE</SPAN>
 a deferred class. Descendants of class <SPAN CLASS="ee-text">
VEHICLE</SPAN>
, such as <SPAN CLASS="ee-text">
CAR</SPAN>
 or <SPAN CLASS="ee-text">
TRUCK</SPAN>
, <SPAN CLASS="ff-bold">
effect</SPAN>
<A NAME="marker-445549"></A> this routine, that is to say, give effective versions. An effecting is similar to a redefinition; only here there is no effective definition in the original class, just a specification in the form of a deferred routine. The term <SPAN CLASS="ff-bold">
redeclaration</SPAN>
<A NAME="marker-445550"></A> covers both redefinition and effecting.</P>
<DIV>
<MAP NAME="invitation-5">
</MAP>
<IMG SRC="invitation-5.png" USEMAP="#invitation-5">
</DIV>
<P CLASS="nn-first">
<A NAME="pgfId-445580"></A>Whereas an effective class described an implementation of an abstract data types, a deferred class describes a <SPAN CLASS="ff-italics">
set</SPAN>
 of possible implementations. You may not instantiate a deferred class: <SPAN CLASS="ee-keyword">
create</SPAN>
  <SPAN CLASS="ee-text">
v</SPAN>
 is invalid if <SPAN CLASS="ee-text">
v</SPAN>
 is declared of type <SPAN CLASS="ee-text">
VEHICLE</SPAN>
. But you may assign to <SPAN CLASS="ee-text">
v </SPAN>
a reference to an <A NAME="marker-445581"></A>instance of an effective descendant of   <SPAN CLASS="ee-text">
VEHICLE</SPAN>
. For example, assuming <SPAN CLASS="ee-text">
CAR</SPAN>
 and <SPAN CLASS="ee-text">
TRUCK</SPAN>
 provide effective definitions for all deferred routines of <SPAN CLASS="ee-text">
VEHICLE</SPAN>
, the following will be valid:</P>
<TABLE BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="ee-text">
<A NAME="pgfId-452733"></A><SPAN CLASS="ee-text">
v</SPAN>
:<SPAN CLASS="ee-text">
 VEHICLE</SPAN>
;<SPAN CLASS="ee-text">
 c</SPAN>
:<SPAN CLASS="ee-text">
 CAR</SPAN>
;<SPAN CLASS="ee-text">
 t</SPAN>
:<SPAN CLASS="ee-text">
 TRUCK</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445584"></A><SPAN CLASS="ee-text">
...</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445586"></A><SPAN CLASS="ee-keyword">
create</SPAN>
<SPAN CLASS="ee-text">
 c ...</SPAN>
;<SPAN CLASS="ee-text">
 </SPAN>
<SPAN CLASS="ee-keyword">
create</SPAN>
<SPAN CLASS="ee-text">
  t ...</SPAN>
;<SPAN CLASS="ee-text">
...</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445587"></A><SPAN CLASS="ee-keyword">
if</SPAN>
<SPAN CLASS="ee-text">
 </SPAN>
<SPAN CLASS="ee-comment">
&quot;Some test&quot;</SPAN>
<SPAN CLASS="ee-text">
 </SPAN>
<SPAN CLASS="ee-keyword">
then</SPAN>
<SPAN CLASS="ee-text">
 v </SPAN>
:=<SPAN CLASS="ee-text">
 c </SPAN>
<SPAN CLASS="ee-keyword">
else</SPAN>
<SPAN CLASS="ee-text">
 v </SPAN>
:=<SPAN CLASS="ee-text">
 t </SPAN>
<SPAN CLASS="ee-keyword">
end</SPAN>
</P>
<P CLASS="ee-text">
<A NAME="pgfId-445588"></A><SPAN CLASS="ee-text">
v</SPAN>
<SPAN CLASS="ee-dot">
.</SPAN>
<SPAN CLASS="ee-text">
register </SPAN>
(<SPAN CLASS="ee-text">
2003</SPAN>
)</P>
</TD>
</TR>
</TABLE>
<P CLASS="nn-first">
<A NAME="pgfId-445589"></A>This example fully exploits polymorphism: depending on the outcome of &quot;Some test&quot;, <SPAN CLASS="ee-text">
v</SPAN>
 will be treated as a car or a truck, and the appropriate registration algorithm will be applied. Also, <SPAN CLASS="ee-comment">
&quot;Some test&quot;</SPAN>
 may depend on some event whose outcome is impossible to predict until run-time, for example the user clicking with the mouse to select one among several vehicle icons displayed on the screen.</P>
<P CLASS="nn-normal">
<A NAME="pgfId-445592"></A>Deferred classes are particularly useful at the <SPAN CLASS="ff-bold">
design</SPAN>
<A NAME="marker-445590"></A><A NAME="marker-445591"></A> stage. The first version of a module may be a deferred class, which will later be refined into one or more effective classes. Eiffel's Design by Contract mechanisms are essential here: you may a precondition and a postcondition with a routine even though it is a deferred routine (as with <SPAN CLASS="ee-text">
register</SPAN>
 above), and an invariant with a class even though it is a deferred class. This enables you, as a designer, to attach precise semantics to a module at the design stage long before you will make any implementation choices.</P>
<P CLASS="nn-normal">
<A NAME="pgfId-512677"></A>Beyond design and implementation, these techniques extend to the earliest stage of development, <SPAN CLASS="ff-bold">
analysis</SPAN>
<A NAME="marker-512678"></A><A NAME="marker-512679"></A>. Deferred classes written at that stage describe not software objects, but objects from the external world being modelled -- documents, airplanes, investments. Here again the presence of contracts to express constraints, and the language's other structuring facilities, provide an attractive combination.<A NAME="marker-512704"></A> <A NAME="marker-512711"></A></P>
<P CLASS="nn-normal">
<A NAME="pgfId-512722"></A>Eiffel appears here in its full role of a lifecycle approach, covering areas traditionally considered separate: program implementation, the traditional province of development environments; system modeling and architecture, the traditional province of CASE tools based on UML or similar notations disconnected from the rest of the lifecycle. Eiffel instead emphasizes the fundamental unity of the software process and the usefulness of a single set of notations, concepts and tools applicable throughout. Such a <SPAN CLASS="ff-italics">
seamless</SPAN>
 approach is indispensable to support the inevitable <SPAN CLASS="ff-italics">
reversals</SPAN>
 that occur during the process of building software, such as detecting at implementation time a problem that leads to a change in the system's functionality, set at analysis time. The use of separate tools and notations, such as UML on one side and a programming language on the other, makes such round-trips difficult at best and often leads to monolithic, hard-to-change software. Eiffel lets you focus on the issues, without interposing artificial barriers between different software development activities. You'll use the fundamental problem-solving techniques -- data abstraction through classes, precise specification through contracts, modularity through information hiding, rational organization through inheritance, decentralized architecture through dynamic binding, parameterization of the solution through genericity, reusability through all these techniques -- all along; only the level of abstraction changes.</P>
<p class="bottom" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="invitation-13.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="invitation.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="invitation-15.html"><area shape="default" nohref></MAP>

<p class="bottom" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="index.html">Getting started with Eiffel (local)</a>

<p class="copyright" align="center">Copyright Interactive Software Engineering, 2001
</BODY>
</HTML>
