<!DOCTYPE HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<html>
	<head>
		<title>Revisions</title>
		<LINK href="../../../../default.css" rel="StyleSheet">
			<meta content="Microsoft FrontPage 4.0" name="GENERATOR">
			<meta content="FrontPage.Editor.Document" name="ProgId">
			<style>
						ul.circle{list-style:circle;}
						</style>
			<style>
							ul.square{list-style:square;}
							</style></head>
	<body>
		<h1>Revisions and bug fixes
		</h1>
		<p>This document contains details of modifications and bug fixes to the vision2
			library listed by the release version of EiffelStudio. All bug fixes and
			modifications are relative to the previously released version.</p>
		<h2>
			Eiffel Studio 5.4</h2>
		<p>
			<b>Interface modifications</b></p>
		<ul class="circle">
			<li>
				<b>EV_ITEM_PIXMAP_SCALER</b>
			- New class added which provides no new functionality, but is a clean
			abstraction of `pixmaps_width', `pixmaps_height' and `set_pixmaps_size' which
			were all defined independently in EV_TREE, EV_LIST, EV_MULTI_COLUMN_LIST and
			EV_COMBO_BOX. Your code will not be affected by this change.
			<li>
				<b>EV_TOOL_BAR</b>
			- Added three new features `has_vertical_button_style',
			`enable_vertical_button_style' and `disable_vertical_button_style'. The default
			style for buttons is vertical and was the only style previously available, in
			which the `pixmap' is displayed above `text'. When vertical style is disabled,
			the `pixmap' of a button will be displayed to the left of its `text'.
			<LI>
				<B>EV_TREE </B>
			- No longer inherits EV_TREE_NODE_CONTAINER which is now obsolete. Made
			`selected' obsolete, use selected_item /= Void instead.
			<li>
				<B>EV_TREE_NODE</B>
			- Now inherits EV_TREE_NODE_LIST instead of EV_TREE_NODE_CONTAINER. This
			provides more functionality at the level of the node, but does not change the
			features available in non deferred descendents, as they all previously
			inherited EV_TREE_NODE_LIST. Changed type of `parent' to EV_TREE_NODE_LIST from
			EV_TREE_NODE_CONTAINER. Removed three obsolete features - `align_text_left',
			align_text_center' and `align_text_right'.
			<LI>
				<B>EV_TREE_ITEM</B>
			- Strengthened `is_expandable' so that it checks `parent_tree' is not Void,
			this brings it into line with the preconditions of `expand'.
			<LI>
				<B>EV_DYNAMIC_TREE_ITEM</B>
			- Strengthened `is_expandable' to check `parent_tree', in line with
			preconditions of `expand'. Added "valid_operands" precondition to
			`set_subtree_function' which ensures that you only pass a function with valid
			operands.
			<LI>
				<B>EV_TREE_NODE_CONTAINER</B>
			- Now obsolete, you should use EV_TREE_NODE_LIST instead.
			<LI>
				<B>EV_MULTI_COLUMN_LIST</B>
			- Added missing postconditions to `align_text_left', `align_text_right',
			`align_text_center' and other miscellaneous features that were missing relevent
			postconditions.
			<LI>
				<b>EV_MENU</b>
			- Tightened preconditions of `show' and `show_at' to ensure that the menu is
			not parented.
			<LI>
				<b>EV_TEXT</b>
			Added `has_word_wrapping', `enable_word_wrapping' and `disable_word_wrapping'.
			These features allow you to switch between horizontal word wrapping, in which
			lines too long to be displayed will be wrapped, and no word wrapping, in which
			horizontal scroll bars will be displayed, allowing you to view the complete
			contents of each line. Previously EV_TEXT would always wrap lines, and the
			default beaviour is `has_word_wrapping' as it was before these changes.
			<li>
				<B>EV_TEXT_COMPONENT</B>
			- Added `has_selection' precondition to `selected_text' which requires that
			`has_selection' must be True for you to call `selected_text'.
			<LI>
				<B>EV_FILE_DIALOG</B> - Added `valid_file_title' for validation of a file name
				excluding the path.</LI>
			<LI>
				<B>EV_STANDARD_DIALOG</B> - Corrected postcondition of `make_with_text' which was checking that `text' was the same object as the STRING pased as an argument. This was incorrect, as `text' is cloned during the creation.</LI></ul>
		<P><b>Breaking changes</b></P>
		<UL>
			<LI>
				<B>EV_TREE_NODE_CONTAINER</B> - This class is no longer used in EiffelVision2,
				and if you were relying on it, you should use EV_TREE_NODE_LIST instead. The
				type of `parent' for tree nodes has been changed from EV_TREE_NODE_CONTAINER to
				EV_TREE_NODE_LIST, so if you retrieve the `parent' and then attempt to iterate,
				you may have declared an instance of EV_TREE_NODE_CONTAINER. In this situation,
				you should simply change the definition to EV_TREE_NODE_LIST instead.
			</LI>
		</UL>
		<p><b>Bug fixes</b></p>
		<UL>
			<li>
				<b>Platform independent</b>
				<ul>
					<LI>
						<B>EV_DYNAMIC_TREE_ITEM</B>
					- No longer crashes if your `subtree_function' returns Void. In this situation,
					it will now behave as if the `Result' was empty.
					<li>
						<B>EV_BOX</B> - Attempting to dock from an EV_DOCKABLE_SOURCE while the box was
						empty would not work. This has now been fixed.
					</li>
				</ul>
			<li>
				<b>Windows</b>
				<ul>
					<LI>
						<B>EV_TEXT_COMPONENT</B>
					- fixed bug in `select_region' which would fail if `start_pos' was greater than
					`end_pos'.
					<LI>
						<B>EV_PIXMAP</B>
					<ul><li> `expose_actions' previously had a feature contained related to the
					implementation, and calling `wipe_out' on `expose_actions' would stop the image
					from being redrawn. There are now no side effects related to `expose_actions'.
					</li>
					<LI> Calling `copy' on a pixmap that was parented in an EV_CONTAINER, and therefore displayed on screen had no visual effect until the window was re-painted. The image is now updated immediately. Also, using `copy' on a pixmap in a similar situation that was originally set with a masked icon, and passing a pixmap created from a bitmap file would cause a crash.</li>
</ul>
					<LI>
						<B>EV_LIST</B>
					- Calling `disable_sensitive' when already non sensitive would loose the
					original selection, and calling `enable_sensitive' when already sensitive would
					alter the selected item. The features will no longer alter the selection if
					called twice.
					<LI>
						<B>EV_CELL</B>
					- If you removed the item, the minimum size was not updated to reflect this,
					thereby retaining the minimum size as constrained by the minimum size of the
					now removed item.
					<LI>
						<B>EV_TREE_ITEM</B>/<B>EV_TREE</B>
					- A call to `disable_select' on an EV_TREE_ITEM will now actually remove the
					selection from the tree. Previously, the style of the item was changed, but a
					call to `selected_item' on the tree would still return the item.
					<LI>
						<B>EV_FILE_DIALOG</B>
					- Fixed precondition violation when you calling `set_file_name' which was
					rejecting directory separators.
					<LI>
						<B>EV_DIALOG</B>
					- Fixed a bug when you had two dialogs displayed modally, with the second modal
					to the first. If you had a text field within the second dialog whose
					`return_actions' contained an agent which would destroy the second dialog, the
					`select_actions' of the `default_push_button' in the lower dialog would be
					subsequently fired.
					<LI>
						<B>EV_LABEL</B>
					- If a label was disabled through the disabling of a container in which it was
					contained, it would sometimes not be grayed out. This has now been fixed.</B>
					<LI>
						<B>EV_PICK_AND_DROPABLE</B><ul><li>`mode_is_target_menu' did not work for a pick and
						drop source whose `pebble' was generated by a `pebble_function'.</li>
						<li>Fixed bug where drag and drop was not working as it was attempting to perform docking instead. If both are enabled, docking has priority.</li>
						</ul>
					</LI>
				</ul>
			<li>
				<b>Gtk</b>
				<UL>
					<LI>
						<STRONG>EV_TREE_NODE</STRONG>
					- Now expansion state remains the same when 'set_pixmap' is called.
					<LI>
						<STRONG>EV_DIALOG</STRONG>
					- Fixed bug where 100 percent of CPU time was being used when dialog was shown
					modally.
					<LI>
						<STRONG>EV_WINDOW</STRONG> - Now sizing invariants are fulfilled when widget is
						destroyed, preventing segmentation violation. <STRONG>EV_COMBO_BOX</STRONG>
					- Fixed bug where reselecting an item within the combo box list was in fact
					deselecting it.
					<LI>
						<STRONG>EV_WINDOW</STRONG>
					- Fixed querying of positioning which never changes if previously&nbsp;set by
					user.
					<LI>
						<STRONG>EV_APPLICATION</STRONG>
					- Priority of `idle_actions' has been changed so that gtk will recalculate
					widgets sizes before calling its idle handler, this means that all resizing is
					done before idle actions are called.
					<li>
						<STRONG>EV_WINDOW </STRONG>
					- Now windows correctly shrink when requested size is smaller than current size
					<LI>
						<STRONG>EV_PICK_AND_DROPABLE</STRONG> - Fixed bug where if both drag and drop
						and docking were enabled, both would be executed, now docking overrides drag
						and drop if both are enabled.</LI></UL>
			</li>
		</UL>
		<h2>Eiffel Studio 5.3</h2>
		<p><b>Interface modifications</b></p>
		<ul class="circle">
			<li>
				<B>EV_TITLED_WINDOW_ACTION_SEQUENCES</B>
			added which is inherited only by EV_TITLED_WINDOW and provides three new action
			sequences :- `minimize_actions', `maximize_actions' and `restore_actions'.
			<li>
				<b>EV_TITLED_WINDOW</b>
				<ul class="square">
					<li>
					You may now only call `maximize' and `minimize' if `is_show_requested'.
					<li>
						When minimized, `is_displayed' now returns False.</li>
				</ul>
			<li>
				<B>EV_BUTTON</B>
			now inherits EV_FONTABLE, allowing you to modify the font displayed.
			<li>
				<B>EV_DYNAMIC_LIST_ITEM</B>
			- Corrected `off' which was using the version inherited from EV_TREE_NODE when
			it should have been using the version from EV_TREE_NODE_LIST instead.
			<li>
				<B>EV_RECTANGLE</B>
			- Added precondition to `intersects' which stops a Void rectangle being passed
			as an argument.
			<li>
				<B>EV_TOOL_BAR_SEPARATOR</B>
			- Now export many inherited features to {ANY} instead of {NONE}, including
			`parent'.
			<li>
				<B>EV_ENVIRONMENT</B>
			- Added `supported_image_formats' which returns a LINEAR [STRING] containing
			all valid formats by their three letter extension.
			<li>
				<B>EV_CHECKABLE_LIST</B>
			- New class added which behaves as an EV_LIST, except that for each
			EV_LIST_ITEM contained, an associated check box is displayed.
			<li>
				<B>EV_MESSAGE_DIALOG</B>
			- No longer deferred, and has two creation procedures `default_create' and
			`make_with_text'.
			<li>
				<B>EV_STANDARD_DIALOG</B>
			- All descendents now have `make_with_text' as a creation procedure'.
			<li>
				<B>EV_TABLE</B> - Now inherits CHAIN instead of ARRAY. This is a breaking
				change, and may require some modification to your code. The inheritence from
				ARRAY was seriously flawed. For example, if you were to call `extend' on an
				EV_CONTAINER object that was currently referencing an EV_TABLE, then this would
				fail. Now that we inherit CHAIN, this problem, among others of a similar nature
				are fixed. Another advantage of inheriting CHAIN, is that the table may now be
				iterated which allows for greater flexibility.<br>
				<br>
				The following list details some of the breaking changes, and how to fix them:
				<ul>
					<li>
						<B>item</B>
					- If you were using `item', you should change this to `item_at_position'. A
					call to `item' will now return the current item.
					<li>
						<B>put</B>
					- If you were using `put', you must now replace this with `put_at_position'.
					<li>
						<B>extend</B> and <B>replace</B>
					- These are now both exported, as before, they were exported to {NONE}.
					<li>
						features inherited from <B>ARRAY</B>
					- These are no longer available but you may use the feature `to_array', which
					returns the contents of the table represented as an ARRAY [EV_WIDGET]. This
					feature is marked as obsolete, as it is temporary, to simplify the transition
					to the new inheritence structure of EV_TABLE.
					<li>
						<B>count</B>
					- The previous version of `count' was the one from ARRAY, which returned the
					number of available (not empty) cells in the table. We now use the version of
					`count' inherited from EV_CONTAINER which returns the number of widgets
					currently contained. Previously, the feature `widget_count' was used to return
					the number of items, but this feature has now been made obsolete. Therefore, if
					you were previously using `count', replace this with `rows' * `columns', and if
					you were using `widget_count', replace this with a call to `count'.
					<li>
						<B>item_list</B> - This is now obsolete. You may use `linear_representation' to
						retrieve the contents of the table, or simply traverse the table.</li>
				</ul>
			<li>
				<B>EV_FIXED</B>
			- No longer inherits DOUBLE_MATH.
			<li>
				<B>EV_VIEWPORT</B>
			- No longer inherits DOUBLE_MATH.
			<li>
				<B>EV_TEXT</B>
			- `line_count' now returns the number of lines actually displayed, and not just
			the newline characters, as an EV_TEXT will wrap the text when necessary. The
			postcondition of `linecount' has been updated to reflect this change.
			<li>
				<B>EV_FILE_DIALOG</B> Added "valid_file_name" precondition to `set_file_name'
				and a new feature `valid_file_name' which checks that a file name is valid on
				the current platform.</li>
		</ul>
		<p><b>Bug fixes</b></p>
		<UL>
			<li>
				<b>Platform independent</b>
				<ul>
					<li>
						<b>EV_WIDGET</b>
					- `pointer_style' now correctly returns the Ibeam cursor for textable widgets.
					<li>
						<B>EV_FIGURE_RECTANGLE</B>
						<ul class="square">
							<li>
							Corrected `bounding_box' which was previously computed incorrectly when the
							rectangle was rotated.
							<li>
								Fixed `width' and `height' which were always returning one less pixel than they
								should have.</li>
						</ul>
					</li>
				</ul>
			<li>
				<b>Windows</b>
				<ul>
					<li>
						<b>EV_PIXMAP</b>
					- Setting a tile with `set_tile' followed by a call to a fill routine would
					crash the implementation.
					<li>
						<b>EV_COMBO_BOX</b>
					- Implemented pick and drop.
					<li>
						<b>EV_TEXT_FIELD</b>
					- Implemented pick and drop.
					<li>
						<b>EV_PASSWORD_FIELD</b>
					- Implemented pick and drop.
					<li>
						<b>EV_TEXT</b><ul>
							<li>
							Implemented pick and drop.
							<li>
							If not `is_editable' and a `background_color' had been set, it was only used on
							lines containing text. The `background_color' is now correctly displayed
							throughout the whole control when not `is_editable'.
							<li>
							Fixed `select_region' which was selecting an incorrect region starting on any
							line except the first, when the `text' spanned multiple lines.
							<li>
							Fixed `selection_start' and `selection_end' which were incorrect when the
							selection was not completely contained on the first line.
							<li>
							Fixed `first_position_from_line_number' and `last_position_from_line_number'
							which were returning incorrect values when the text was wrapped.
							<li>
							Fixed `caret_position' and `set_caret_position' which were incorrect when the
							text spanned multiple lines, and the caret was not on the first line.
							<li>
							`line_count' now returns the number of lines actually displayed, and not simply
							the number of newline characters. To query the number of new line characters do
							:- text.occurrences ('%N')
							<li>
								Fixed bug in `search' which was returning -1 instead of 0 when the text was not
								found.</li>
						</ul>
					<li>
						<b>EV_DRAWABLE</b>
					- Fixed bug when you performed the following: drew a filled shape, called
					`set_tile' and then drew another filled shape. The tile would not be used on
					the second fill.
					<li>
						<b>EV_COLOR_DIALOG</b>
					- Querying `color' after a user had cancelled the dialog would previously crash
					a system, if `set_color' had never been called.
					<li>
						<b>EV_COLOR</b>
					- Fixed `set_rgb_with_24_bit' which would fail when called.
					<li>
						<b>EV_BUTTON, EV_TOGGLE_BUTTON</b>
					- The buttons now correctly display a text, pixmap and background color
					simultaneously. Previously, the background color was never displayed, and
					either the pixmap or text would be displayed, not both.
					<li>
						<b>EV_PRINT_DIALOG</b>
					- Fixed `set_from_page' and `set_to_page' which were previously not
					implemented.
					<li>
						<b>EV_LIST</b>
						<ul>
							<li>
							Fixed a graphical glitch when using `wipe_out' when items were contained that
							required the horizontal scroll bar to be visible. The scroll bar was not
							hidden, even though there were no longer any items in the list.
							<li>
								Changing the selection behaviour between multiple and single selection would
								cause the scroll bars to become hidden, even if they were necessary. Changing
								this status will no longer hide the scroll bars if they are required.
							</li>
						</ul>
					<li>
						<b>EV_TOOL_BAR</b>
						<ul>
							<li>
							Items that were disabled would sometimes become enabled when other properties
							of the item were set. For example, performing
							"my_tool_bar_button.disable_sensitive" followed by "my_tool_bar_button.set_text
							("Disabled")" while the button was parented, would result in a sensitive tool
							bar button. This is now fixed.
							<li>
								If you changed the `text' of a tool bar toggle button during the firing of the
								`select_actions' of the toggle button, the button would become unchecked as a
								result. This is now fixed, and changing the text will not stop the button from
								becoming selected.</li></ul>
					<li>
						<b>EV_MULTI_COLUMN_LIST</b>
					- Changing the selection behaviour between multiple and single selection would
					cause the scroll bars to become hidden, even if they were necessary. Changing
					this status will no longer hide the scroll bars if they are required.
					<li>
						<b>EV_DYNAMIC_TREE_ITEM</b>
					- Calling `set_tooltip' failed and has now been fixed.
					<li>
						<b>EV_TIMEOUT</b>
					- Calling `destroy' more than once on a timeout, caused the implementation to
					crash, and has now been fixed.</B>
					<li>
						<b>EV_TOOLTIPABLE</b> - Tooltips on primitives were not supporting multiple
						lines and this has now been fixed. Use %N for a line break.
					</li>
				</ul>
			<LI>
				<b>Gtk</b>
				<UL>
					<LI>
						<STRONG>EV_SCROLLABLE_AREA</STRONG>
					- Items smaller than the area are now positioned correctly.
					<LI>
						<STRONG>EV_VIEWPORT</STRONG>
						<UL>
							<LI>
							Widget now works correctly with negative offset values
							<LI>
								Item position is now handled correctly on item resize.</LI></UL>
					<LI>
						<STRONG>EV_PIXMAP</STRONG>
					- All drawing routines now flush immediately to screen.
					<LI>
						<STRONG>EV_DIALOG</STRONG>
					- Cancelling via Enter key is now handled correctly.
					<LI>
						<STRONG>EV_LIST</STRONG>
					- Fixed selection of selected item when changing from multiple selection to
					single selection.
					<LI>
						<STRONG>EV_MULTI_COLUMN_LIST</STRONG>
						<UL>
							<LI>
							Row height now incorporates spacing pixel to match the implementation of
							Windows.
							<LI>
								Default row height is now slightly larger to be more aesthetically pleasing
								with smaller fonts sizes.</LI></UL>
					<LI>
						<STRONG>EV_CONTAINER</STRONG>
						<UL>
							<LI>
							`set_background_pixmap' now works with repeated parenting.
							<LI>
								Radio group unmerging is now handled correctly.</LI></UL>
					<LI>
						<STRONG>EV_TEXT_FIELD </STRONG>
					- Now vertical alignment is identical to that on Windows, including that for
					text field descendants.
					<LI>
						<STRONG>EV_RANGE </STRONG>
					- Now motions events are passing consistent pointer values instead of sometimes
					skewed ones.
					<LI>
						<STRONG>EV_DRAWING_AREA</STRONG>
					- Now `focus_in_actions' are called in all circumstances.
					<LI>
						<STRONG>EV_TEXT</STRONG>
						<UL>
							<LI>
							`scroll_to_line' is now implemented.
							<LI>
								`line_count' and `current_line_number' now handle lines in text widget and not
								the text itself.</LI></UL>
					<LI>
						<STRONG>EV_FIXED</STRONG>
					- Now item sizing is correctly handled in all circumstances.
					<LI>
						<STRONG>EV_NOTEBOOK</STRONG>
					- Now tabs are more aesthetically pleasing.
					<LI>
						<STRONG>EV_MENU_SEPARATOR&nbsp; </STRONG>
					- Menu Separators are now more prominent.
					<LI>
						<STRONG>EV_TOOLBAR_SEPARATOR - </STRONG>Toolbar Separators are now more
						prominent.</LI></UL>
			</LI>
		</UL>
		<P><STRONG></STRONG>&nbsp;</P>
		<h2>Eiffel Studio 5.2</h2>
		<p><b>Interface modifications</b></p>
		<ul class="circle">
			<li>
				<b>EV_TEXTABLE</b>
			- `align_text_left', `align_text_right' and `align_text_center' have been
			extracted into a new class, EV_TEXT_ALIGNABLE which inherits EV_TEXTABLE. All
			previous descendents of EV_TEXTABLE now inherit EV_TEXT_ALIGNABLE, except
			EV_TREE_NODE, EV_MENU_ITEM, EV_LIST_ITEM and EV_TOOL_BAR_BUTTON
			<li>
				<b>EV_TEXT_COMPONENT</b>
			- Now inherits EV_TEXTABLE.
			<li>
				<b>EV_TEXT_ALIGNMENT_CONSTANTS</b>
			- New class added to support EV_TEXT_ALIGNABLE.
			<li>
				<b>EV_MENU_ITEM_LIST</b>
			- `parent' is now of type EV_ANY, instead of EV_MENU_ITEM_LIST as it did not
			hold for EV_MENU_BAR. The renaming of `parent' to `old_parent' in EV_MENU_BAR
			has now been removed.
			<li>
				<b>EV_VIEWPORT</b>
			- added `set_item_width', `set_item_height' and `set_item_size'.
			<li>
				<b>EV_TABLE</b>
				<ul class="square">
					<li>
					redefined `prunable' to `True' and implemented `prune'.
					<li>
						Added the following features - `set_item_span', `set_item_position',
						`set_item_span_and_position', `area_clear_excluding_widget', `item_row_span',
						`item_column_span', `item_row_position' and `item_column_position'.
					</li>
				</ul>
			<li>
				<b>EV_WIDGET</b>
			- Changed type of `focus_in_actions' and `focus_out_actions' from
			EV_FOCUS_ACTION_SEQUENCE to EV_NOTIFY_ACTION_SEQUENCE. `is_parent_recursive' is
			no longer available. It has been moved to EV_CONTAINER. This was necessary to
			fix a catcall encountered using vision2 under .NET. The problem manifested with
			widgets that held items.
			<li>
				<b>EV_FIGURE</b>
			- `proximity_in_actions' and `proximity_out_actions' are now obsolete.
			<li>
				<b>EV_FONTABLE</b>
			- `set_font' now sets a copy of the font internally.
			<LI>
				<b>EV_TREE</b>
			- `ensure_item_visible' and `has_recursively' now take an EV_TREE_NODE as
			arguments, instead of an EV_TREE_ITEM.
			<li>
				<b>EV_TEXT</b>
			- `put_new_line' is now obsolete. Use `set_text ("%N") instead."
			<li>
				<b>EV_APPLICATION_ACTION_SEQUENCES</b>
			- Added `cancel_actions', fired when a pick and drop is cancelled, and
			`pnd_motion_actions' fired while the pointer moves during a pick and drop.
			<li>
				<b>EV_TREE_NODE_LIST</b>
				<ul class="square">
					<li>
					`find_item_recursively_by_data', `has_recursively' and `recursive_do_all' are
					now implemented in this class, instead of both EV_TREE and EV_TREE_NODE which
					are descendents.
					<li>
						Added `retrive_items_recursively_by_data' and
						`retrieve_item_recursively_by_data' which allow you to specify a comparison
						criterion, and due to this addition, `find_item_recursively_by_data' has now
						been made obsolete.
					</li>
				</ul>
			<li>
				<b>EV_DYNAMIC_LIST</b>
			- Added `retrieve_item_by_data' and `retrieve_items_by_data'.
			<li>
				<b>EV_ITEM_LIST</b>
			- Made `item_by_data' obsolete, as you should now use `retrieve_item_by_data'
			added in EV_DYNAMIC_LIST.
			<li>
				<b>EV_DIALOG</b> - Added `is_relative' and defined `is_modal' in this class,
				instead of inheriting it from EV_WINDOW.
			</li>
		</ul>
		<p><b>Bug fixes</b>
			<ul>
				<li>
					<b>Platform independent</b>
					<ul>
						<li>
							<b>EV_FIGURE_POLYLINE</b>
						- Fixed `start_angle' and `end_angle' so that they are computed relative to the
						first and last polyline segments. This also fixes the start and end arrows, so
						that when displayed, they now actually point in the direction of their
						respective line segments.
						<li>
							<b>EV_TREE and EV_TREE_NODE</b>
						- Fixed `find_item_recursively_by_data' which failed on the `index_not_changed'
						postcondition. Note that these features are now defined in EV_TREE_NODE_LIST.
						<li>
							<b>EV_DYNAMIC_TREE_ITEM</b> - Fixed invariant violation from EV_ITEM_LIST, when
							created with `default_create'.
						</li>
					</ul>
				<li>
					<b>Windows</b>
					<ul>
						<li>
							<b>EV_RADIO_BUTTON</b>
						- The default minimum height after `default_create' is now enough to display
						the widget correctly.
						<li>
							<b>EV_CHECK_BUTTON</b>
						- The default minimum height after `default_create' is now enough to display
						the widget correctly.
						<li>
							<b>EV_NOTEBOOK</b>
						- When removing a widget from a notebook, it is now visible. Previously, the
						widget would be hidden.
						<li>
							<b>EV_LIST, EV_MULTI_COLUMN_LIST, EV_TREE</b>
						- Fixed `set_foreground_color' and `set_background_color'. Previously, calling
						these features did nothing.
						<li>
							<b>EV_BOX</b>
						- If a widget was not`is_item_expanded', then adding a new widget to the box
						before that widget would sometimes cause a different widget to become
						`is_item_expanded'.
						<li>
							<b>EV_TOOL_BAR_RADIO_BUTTON</b>
						- The currently selected button in `peers' was unselected when the button was
						pressed, and not when it was really selected. This bug made it possible to make
						`selected_peer' Void, which caused an invariant to fail.
						<li>
							<b>EV_LIST_ITEM</b>
						- Calling `enable_select' when parented in an EV_LIST now also sets the item as
						focused in the parent. This corrects bugs in keyboard navigation when selecting
						an item programatically.
						<li>
							<b>EV_FIXED</b>
						- The minimum size is constrained by the positions and sizes of the children
						(They must be completely displayed), although when the positions of the
						children were reduced, the minimum allowable size was not recomputed. This
						meant that the widget would be enlarged when the positions of the children
						increased, but could never be reduced in size when the positions of the
						children were decreased.
						<li>
							<b>EV_MENU and EV_MENU_ITEM</b>
						- `set_pixmap' has been implemented as previously, it did nothing.
						<li>
							<b>EV_TABLE</b>
						- re-implemented resizing calculations to fix numerous problems when children
						had minimum sizes. The minimum size now also includes the border width when
						empty.
						<li>
							<b>EV_NOTEBOOK</b>
						- `selection_actions' were called when you selected an item through
						`select_item', even if the item was already selected. `selection_actions' are
						now only fired when the selection changes.
						<li>
							<b>EV_TREE_ITEM</b>
						- calling `set_pixmap' twice successively with the same EV_PIXMAP caused a
						postcondition failure.
						<li>
							<b>EV_TEXT</b>
						- Fixed `put_new_line', although it has been made obsolete, as you should just
						use `append_text ("%N") instead.
						<li>
							<b>EV_SPLIT_AREA</b>
						- Fixed crash reproducable by inserting an EV_PIXMAP directly into the split
						area.
						<li>
							<b>EV_CONTAINER</b>
						- Fixed `propagate_foreground_color' and `propagate_background_color' which
						failed when one of the children was a descendent of EV_CELL.
						<li>
							<b>EV_APPLICATION_ACTION_SEQUENCES</b>
						- `drop_actions' was being fired even when the pick and drop was cancelled.
						<li>
							<b>EV_PIXMAP</b>
						- Previously, if you were to add an agent to an action sequence of the pixmap,
						before it was parented, the agent would be removed during the parenting.
						<li>
							<b>EV_MENU</b>
							<ul>
								<li>
								Pruning an EV_MENU_SEPARATOR when one or more EV_RADIO_MENU_ITEM were still
								contained in the menu would cause occasional crashes.
								<li>
								Previously, when adding an EV_MENU_SEPARATOR, followed by multiple
								EV_RADIO_MENU_ITEMS, all the items were being selected.
								<li>
									Fixed bug in `destroy' which was causing postcondition failures.
								</li>
							</ul>
						<li>
							<b>EV_TITLED_WINDOW</b>
						- Fixed a GDI leak, manifesting when a window was destroyed.
						<li>
							<b>EV_DIALOG</b>
							<ul>
								<li>
								Fixed `is_modal' which was previously always returned `False'.
								<li>
								Fixed bug with `background_color' and `foreground_color' which was not taken
								into account if the dialog was shown relative or modally to another window.
								<li>
								If a dialog with a default cancel button was displayed using `show', then
								minimizing the dialog would cause the system to fail internally.
								<li>
								Fix bug in `show_relative_to_window' which would cause any associated menus to
								be removed.
								<li>
								Fixed bug in `show', as if the dialog had already been shown modelessly to a
								window, then calling `show' did not show it independently, but still
								modelessly.
								<LI>
								Fixed bug with `show_actions' which would be wiped out if you called
								`show_modal_to_window' and then `hide'.
								<LI>
									`set_pixmap' will now actually display the pixmap, whereas before, no pixmap
									was displayed.
								</LI>
							</ul>
						<li>
							<b>EV_TEXT_COMPONENT</b>
						- Fixed `text_length' which was returning incorrect value for all descendents.
						<li>
							<b>EV_TEXT</b>
						- Fixed `line_count' which was previously returning the correct result + 1.
						<li>
							<b>EV_SCROLLABLE_AREA</b>
						- Fixed crash which occurred when you attempted to use `set_x_offset' or
						`set_y_offset' before the area had been parented or displayed.
						<li>
							<b>EV_FONTABLE</b>
						- Fixed bug when `font' was queried, `preferred_families' was not returned
						correctly, and would always be empty.
						<li>
							<b>EV_CONTAINER</b> - `set_background_pixmap' was not correctly cloning the
							image of the pixmap, and the displayed image could then be modified after
							setting, by changing the image of the original pixmap.
						</li>
					</ul>
				<LI>
					<b>Gtk</b>
					<UL>
						<LI>
						Remaining EV_WIDGET memory leaks have been fixed.
						<li>
							<strong>EV_WIDGET</strong>&nbsp;- Focus in/out actions are now correctly
						called for widgets that do not occupy their entire space allocation such as
						EV_TEXT_FIELD.
						<li>
							<strong>EV_DRAWABLE_IMP</strong>
						- Polylines now display correctly on big-endian machines (Sparc, PowerPC).
						<LI>
							<STRONG>EV_KEY</STRONG>
							<UL>
								<LI>
								`out' is now correct for all keys (previously Quote and Backquote were
								incorrect).
								<LI>
									The events for all keys are now fired when Shift is held down.</LI></UL>
						<LI>
							<STRONG>EV_STOCK_PIXMAPS</STRONG>
						- Warning and error pixmaps have been updated.
						<LI>
							<STRONG>EV_WINDOW</STRONG>
						- `remove_title now' works will all Window Managers.
						<LI>
							<STRONG>EV_TITLED_WINDOW</STRONG>
							<UL>
								<LI>
								`propagate_foreground_color' is now fixed in use with pixmaps as children.
								<LI>
								`set_maximum_size' now works as expected
								<LI>
								`set_minimum_width' now has no effect on Window height.
								<LI>
								calls on `minimize' before `launch' now satisfies all assertions
								<LI>
								calling `destroy' twice now doesn't fail on precondition.
								<LI>
								`set_position' now satisfies post-condition in all situations.
								<LI>
								`resize_actions' are now passed the correct values.
								<LI>
									`move_actions' are now called correctly.</LI></UL>
						<LI>
							<STRONG>EV_NOTEBOOK</STRONG>
						- now satisfies invariants when empty.
						<LI>
							<STRONG>EV_DIALOG</STRONG>
							<UL>
								<LI>
								Destroy now satisfies all invariants.
								<LI>
									Reported memory leaks now fixed.</LI></UL>
						<LI>
							<STRONG>EV_LABEL</STRONG>
						- Size is now taken from default gtk style size instead of hard coded 10
						<LI>
							<STRONG>EV_FONT</STRONG>
						- Font caching is now vastly improved in terms of speed.
						<LI>
							<STRONG>EV_DRAWABLE</STRONG>
						- Calls to `set_font' are now also vastly speeded up.
						<LI>
							<STRONG>EV_TABLE</STRONG>
							<UL>
								<LI>
								Memory management is now correct on item removal.
								<LI>
									Now setting child's parent correctly</LI></UL>
						<LI>
							<STRONG>EV_TREE_NODE</STRONG>
							<UL>
								<LI>
									Fixed all reported issues regarding item insertion and removal.</LI></UL>
						<LI>
							<STRONG>EV_CONTAINER</STRONG>
						- Fixed remaining issues with radio grouping and merging.
						<LI>
							<STRONG>EV_PICK_AND_DROPABLE</STRONG>
						- Now drop_actions may destroy `Current' without crash.
						<LI>
							<STRONG>EV_TEXT_FIELD</STRONG>
							<UL>
								<LI>
								Now default `minimum_width' is reasonable (before 148, now same as Windows
								being 4 characters wide)
								<LI>
									Fixed `caret_position' when queried in change actions</LI></UL>
						</LI>
					</UL>
				</LI>
			</ul>
		<p>&nbsp;</p>
		<h2>Eiffel Studio 5.1</h2>
		<p><b>Interface modifications</b></p>
		<ul class="circle">
			<li>
				<b>EV_TEXTABLE and EV_TEXT_COMPONENT</b>
			- `text' no longer returns Void when empty.
			<li>
				<b>EV_WINDOW</b>
			- `title' no longer returns `Void' when empty.
			<li>
				<b>EV_TOOLTIPABLE</b>
			- `tooltip' no longer returns `Void' when empty. If empty, no tooltip is
			displayed.
			<li>
				<b>EV_TITLED_WINDOW</b>
			- `icon_name' no longer returns `Void' when empty.
			<li>
				<b>EV_CLIPBOARD</b>
			- `text' no longer returns `Void' when empty.
			<li>
				<b>EV_MESSAGE_DIALOG</b>
			- `text' no longer returns `Void' when empty.
			<li>
				<b>EV_FILE_DIALOG</b>
			- `file_name' no longer returns `Void' when the "Cancel" button was pressed,
			`Result' is empty instead.
			<li>
				<b>EV_DIRECTORY_DIALOG</b>
			- `directory' no longer returns `Void when the "Cancel" button was pressed,
			`Result' is empty instead.
			<li>
				<b>EV_CONTAINER</b>
			- has three new features `set_background_pixmap', `background_pixmap' and
			`remove_background_pixmap'. `background_pixmap' will be tessellated to cover
			complete background area.
			<li>
				<b>EV_TREE and EV_TREE_NODE</b>
			- Added `recursively_do_all'.
			<li>
				<b>EV_STANDARD_DIALOGS</b>
				<ul class="square">
					<li>
					`ok_actions' have been renamed in descendents where appropriate. e.g. in
					EV_PRINT_DIALOG, they are renamed to `print_actions' to match the texts of the
					associated buttons. Where renamed, `ok_actions' are still available but
					obsolete.
					<li>
						Selected button now also returns the correct text of the button (Previously it
						was always "Ok").
					</li>
				</ul>
			<li>
				<b>EV_DIALOG_CONSTANTS</b>
			- Added new constants required for the above change to EV_STANDARD_DIALOGS.
			<li>
				<b>EV_DRAWABLE</b>
			- `draw_straight_line' now has a precondition to ensure the points are not
			identical.
			<li>
				<b>EV_SPLIT_AREA</b>
			- seperated `put' from `extend'. They were defined as synonyms, but have
			different behaviour.
			<li>
				<b>EV_DYNAMIC_TREE_ITEM</b>
			- Added `remove_subtree_function'. Item now only shows as expandable if there
			is a subtree function.
			<li>
				<b>EV_WINDOW</b>
			- Added `maximum_dimension' which is the greatest value allowed for `width' and
			`height'. This is also the default value for `width' and `height'.
			<li>
				<b>EV_OPTION_BUTTON</b>
			- This class has been made obsolete. It will be removed at the next release.
			<li>
				<b>EV_PICK_AND_DROPABLE_ACTION_SEQUENCES</b>
			- Added `pick_ended_actions' which are called when a pick ends.
			<li>
				<b>EV_WIDGET</b>
			- `set_minimum_height', `set_minimum_width' and `set_minimum_size' now all
			allow 0 as an argument. Previously, 1 was the minimum valid dimension.
			<li>
				<b>EV_MULTI_COLUMN_LIST</b> - `clear_selection' is now obsolete. Use
				`remove_selection' instead.
			</li>
		</ul>
		<p><b>Bug fixes</b>
			<ul>
				<li>
					<b>Platform independent</b>
					<ul>
						<li>
							<b>EV_FIXED</b>
						- Corrected `set_item_height', which was failing.
						<li>
							<b>EV_SELECTABLE</b>
						- Corrected postcondition of `is_selected'.
						<li>
							<b>EV_PND_ACTION_SEQUENCE</b> -- `veto_pebble_function' is now only called when
							its argument conforms to the transported pebble.
						</li>
					</ul>
				<li>
					<b>Windows</b>
					<ul>
						<li>
							<b>EV_RANGE</b>
						- The `maximum_value' could not be set greater than 32,000. The full range of
						an INTEGER may now be set.
						<li>
							<b>`focused_widget' from `EV_APPLICATION'</b>
						- was incorrect if an EV_CONTAINER had just received the focus.
						<li>
							<b>EV_PICK_AND_DROPABLE</b>
							<ul>
								<li>
								Ending a pick and drop on an EV_TOOL_BAR_BUTTON which has a non `void' pebble
								no longer starts a transport from the button.
								<li>
								Reduced flicker on cursor when picking from an EV_TREE_ITEM or EV_LIST_ITEM.
								<li>
									`pebble_function' would previously be called twice during a pick and drop.
								</li>
							</ul>
						<li>
							<b>EV_FIXED</b>
						- Items contained are now drawn correctly dependent on their z order.
						<li>
							<b>EV_DRAWABLE</b>
							<ul>
								<li>
								`Remove_clip_area' did not remove the clip_area correctly, but set it to the
								current size. This meant that if you then enlarged the widget, clipping would
								be applied.
								<li>
								Fixed problems with ordering of calls to certain features which would cause
								postcondition violations in the implementation.
								<li>
									`draw_pie_slice', `fill_pie_slice' and `draw_arc' now have divide by 0
									protection in the implementation.</li>
							</ul>
						<li>
							<b>EV_TEXT</b>
						- `set_background_color' now correctly sets the color of the whole background.
						Previously only the area containing text was modified.
						<li>
							<b>EV_CLIPBOARD</b>
						- Our implementation would sometimes query `text' when not allowed by Windows,
						thus causing postcondition failures.
						<li>
							<b>EV_BUTTON</b> - The result of `text_alignment' after default_create was
							incorrect.</li></ul>
				<li>
					<b>Gtk</b>
					<ul>
						<li>
							Gtk version of Studio released (including Vision2), so no fixes from 5.0</li>
					</ul>
				</li>
			</ul>
		<p>&nbsp;</p>
	</body>
</html>
