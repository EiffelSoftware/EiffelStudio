<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="tour.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> 20  COMPILING</TITLE>
</HEAD>
<!--------------------------------------------------->
<SCRIPT LANGUAGE="Javascript">
	// Default values
	var oNewWindow = 0;

	function ImageClick( oImage )
	{
		if( oNewWindow == 0 || oNewWindow.closed )
		{
			oNewWindow = window.open (oImage.src,"", "status=no, toolbar=no, menubar=no, location=no, resizable=yes");
		}
		else
		{
			oNewWindow.location = oImage.src;
		}
	}
</SCRIPT>
<!--------------------------------------------------->
<body bgcolor="#faf0e6">
<DIV>
<p class="top" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="index.html">Getting started with Eiffel (local)</a>

<img src="power.gif" ALT="Eiffel Home Page" align="right" border="0"  usemap="#eiffel"><map name="eiffel"><area shape="RECT" alt="Eiffel Home Page" coords="0,0,109,226" HREF="http://www.eiffel.com"><area shape="default" nohref></map>

<p class="top" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="tour-20.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="tour.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="tour-22.html"><area shape="default" nohref></MAP>
</DIV>
<H1 CLASS="aa-sec2">
<A NAME="pgfId-438368"></A>20  COMPILING</H1>
<P CLASS="nn-first">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="tour-help.html">Help reading this manual</a>
<P CLASS="nn-first">
<A NAME="pgfId-438370"></A><A NAME="marker-438369"></A>It is time now to compile our example.
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-438371"></A>Compilation modes</H2>
<P CLASS="nn-first">
<A NAME="pgfId-438373"></A>The Eiffel Bench compilation mechanism relies on ISE's proprietary <A NAME="marker-438372"></A>Melting Ice Technology. It offers three forms of compilation: <SPAN CLASS="ff-italics">
melting</SPAN>
, <SPAN CLASS="ff-italics">
freezing</SPAN>
 and <SPAN CLASS="ff-italics">
finalizing</SPAN>
, serving complementary purposes. (Chapter <A HREF="..html#16174" CLASS="XRef"><SPAN CLASS="hh-link">
5</SPAN>
</A> explains the reasons for this terminology.)
<UL>
<LI CLASS="ll-bull">
<A NAME="pgfId-438378"></A>Use<A NAME="marker-438377"></A> melting after making a few changes. Melting is much faster than the other two mechanisms: melting time is proportional to the size of the changed parts and affected classes, whereas the time needed to freeze or finalize is in part proportional to the size of the full system. Typically, melting will take but a few seconds after small changes. Another advantage of melting is that you don't need a C/C++ compiler as long as you are not including new external C/C++ code. The disadvantage of melting is that <SPAN CLASS="ff-italics">
execution</SPAN>
 speed is not optimal.</LI>
<LI CLASS="ll-bull">
<A NAME="pgfId-438380"></A>Use freezing<A NAME="marker-438379"></A> to generate C from your system and compile it into machine code. This is necessary if you add external C/C++ software (obviously, you need a C/C++ compiler to process it), and can improve performance after you have made many changes to different parts of the system and melted them repeatedly. Apart from the case of adding external code, it is usually sufficient to re-freeze every few days; the rest of the time, as you build your software incrementally, you just melt it to get immediate feedback on your additions and changes.</LI>
<LI CLASS="ll-bull">
<A NAME="pgfId-438382"></A>Use <A NAME="marker-438381"></A>finalizing at the end of a project. The advantage of finalizing is that it performs extensive optimizations for both time and space, enabling Eiffel to match the efficiency of C and C++; also, one of the results of finalization is a a stand-alone C package, which you can use for cross development. (Freezing also produces a C package.) The disadvantage is that finalization, because of all the optimizations involved, takes longer. Typically you will finalize when you are ready to deliver a production version, intermediate or final, of your software, or want to measure its performance in operational conditions.</LI>
</UL>
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-438383"></A>Melting the project</H2>
<P CLASS="nn-first">
<A NAME="pgfId-438384"></A>For our first compilation, and indeed for this whole Tour, melting is just what we need (in particular since we are relying on precompiled libraries, which already contain lots of already frozen code.)
<P CLASS="nn-normal">
<A NAME="pgfId-438385"></A>Go to the Project Tool. (The other window that's up right now is the System Tool, which you don't need for the moment; you can get rid of it, or keep it up.) Locate the Quick Melt button at the top right:
<P CLASS="jj-small">
<A NAME="pgfId-438392"></A>Remember that if you are ever in doubt about what a button does you can always move the cursor over the button, without clicking of course, and wait for the corresponding &quot;tooltip&quot; to appear.
<P CLASS="nn-normal">
<A NAME="pgfId-438399"></A>The difference between the Quick Melt button this button and its neighbor the plain Melt button doesn't matter for the moment in most cases (it is due to a peculiarity of the Windows NT file system); here you can use either one.
<P CLASS="nn-normal">
<A NAME="pgfId-438409"></A>Click Quick Melt now. This starts the compilation process. It goes quite fast, so be on the alert if you want to follow what happens.
<P CLASS="nn-normal">
<A NAME="pgfId-438410"></A>EiffelStudio starts exploring your system to determine what needs to be recompiled -- in principle all classes, since you started from scratch with a new system. To tell you what's going on a small information window appears, titled <SPAN CLASS="ee-keyword">
Compilation Progress</SPAN>
. Progress is measured in <SPAN CLASS="ff-italics">
degrees</SPAN>
, starting with degree 6 down to 1. Here is the display captured at some intermediate stage during the process:
<P CLASS="nn-normal">
<A NAME="pgfId-438415"></A>The<A NAME="marker-438414"></A> Guided Tour's system actually includes many more classes than what the messages suggest; but most <A NAME="marker-438416"></A>of them are part of <A NAME="marker-438417"></A>EiffelBase <A NAME="marker-438418"></A>and have been<A NAME="marker-438419"></A> precompiled. So EiffelStudio only compiles the classes of the <SPAN CLASS="ee-keyword">
root_cluster </SPAN>
directory: <SPAN CLASS="ee-keyword">
TESTROOT, HEIR </SPAN>
and <SPAN CLASS="ee-keyword">
PARENT</SPAN>
. After the initial Degree 6 operation, it applies degrees 5, 4, 3, 2 and 1 to each class, then &quot;melts changes&quot; at degree zero (which in the Celsius scale is where water turns to ice). During that process, the cursor icon will have the form of a little hourglass, indicating that EiffelStudio is busy and will not let you perform any EiffelStudio action.
<P CLASS="nn-normal">
<A NAME="pgfId-438420"></A>After the message <SPAN CLASS="ee-keyword">
Melting changes</SPAN>
j the Project Tool window displays the message <SPAN CLASS="ee-keyword">
System recompiled</SPAN>
, returning control to you.
<P CLASS="nn-normal">
<A NAME="pgfId-438421"></A>On a typical middle-of-the-road workstation, lightly loaded, the elapsed time between the click the <SPAN CLASS="ee-keyword">
Melt </SPAN>
button and the message <SPAN CLASS="ee-keyword">
System recompiled </SPAN>
is about 12 seconds. Of course the exact time on your system will depend on how powerful your computer is and what else it is doing; accessing files through the network rather than locally can also introduce a penalty.
<P CLASS="nn-normal">
<A NAME="pgfId-438422"></A>The precompilation mechanism is important in achieving this performance. Although here EiffelStudio has compiled only three classes, the real size of the system -- the number of classes on which the root class depends directly or indirectly, including <SPAN CLASS="ee-keyword">
STD_FILES </SPAN>
which is used for input and output, and its own ancestors and suppliers -- is 61 classes. So the example system, although small, is not trivial; compiling it without precompiled EiffelBase would take about 10 minutes, including C compilation and linking, on the typical workstation mentioned above.
<P CLASS="jj-small">
<A NAME="pgfId-438423"></A>When assessing EiffelStudio's compilation speed you are actually assessing its execution speed too, since the environment is written in Eiffel and produced using its own compilation mechanism.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-438424"></A>Congratulations!</H2>
<P CLASS="nn-first">
<A NAME="pgfId-438425"></A>You have now compiled your first Eiffel system. This is worth celebrating, especially since the process took only a few mouse clicks.
<P CLASS="nn-normal">
<A NAME="pgfId-438426"></A>Having a compiled system opens the way not just to executing it, but also to the power of the EiffelStudio browsing mechanism, which allows you to explore all the ramifications and interactions of a software system, simple or complex<A NAME="marker-438427"></A>.<A NAME="marker-438428"></A>
</DIV>
<p class="bottom" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="tour-20.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="tour.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="tour-22.html"><area shape="default" nohref></MAP>

<p class="bottom" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="index.html">Getting started with Eiffel (local)</a>

<p class="copyright" align="center">Copyright Interactive Software Engineering, 2001
</BODY>
</HTML>
