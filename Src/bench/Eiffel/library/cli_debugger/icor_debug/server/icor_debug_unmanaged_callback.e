indexing
	description: "Common Language Runtime Debugging 1.0 Type Library. Help file: "
	Note: "Automatically generated by the EiffelCOM Wizard."

class
	ICOR_DEBUG_UNMANAGED_CALLBACK

inherit
	ICOR_OBJECT

	EIFNET_DEBUGGER_INFO_ACCESSOR
		undefine
			out
		end
	
	EIFNET_DEBUGGER_UNMANAGED_CALLBACK_CONSTANTS
		undefine
			out
		end

create 
	make_by_pointer
	
feature -- Initialization
		
	initialize_callback is
		local
			test: INTEGER
		do
			test := c_initialize_callback (item, Current,
					$debug_event
				)

		end

	terminate_callback is
			-- Terminate callback
		local
			l_success: INTEGER
		do
			l_success := c_terminate_callback (item)
		end			

feature {NONE} -- debugger behavior
	
	begin_of_unmanaged_callback (cb_id: INTEGER) is
		local
--			msg: STRING
		do
			eifnet_debugger_info.set_last_unmanaged_callback (cb_id)

--			msg := "[EIFFEL/DEB/CALL] ###"
--			msg.append_string (eifnet_debugger_info.value_of_cst_unmanaged_cb (eifnet_debugger_info.last_unmanaged_callback))
--			msg.append_string ("###")
--			debugger_messages.extend (msg)				
		end

	end_of_unmanaged_callback (cb_id: INTEGER) is
		do
--			if eifnet_debugger_info.callback_disabled (eifnet_debugger_info.last_managed_callback) then
--				if eifnet_debugger_info.icor_debug_app_domain /= Void then
--					eifnet_debugger_info.icor_debug_app_domain.continue (False)
--				else
--					eifnet_debugger_info.icor_debug_process.continue (False)
--				end
--			end
		end

feature -- Basic Operations

	debug_event (p_debug_event: INTEGER; f_out_of_band: INTEGER) is
			-- No description available.
			-- `p_debug_event' [in].  
			-- `f_out_of_band' [in].  
		require
		do
			begin_of_unmanaged_callback (Cst_unmanaged_debug_event)
			debug ("debugger_trace_callback")
				io.error.put_string ("%N%N%N@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%N")
				io.error.put_string ("UNMANAGED  debug_event : " + p_debug_event.to_hex_string)
				io.error.put_string ("%N%N%N@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%N")			
			end
			end_of_unmanaged_callback (Cst_unmanaged_debug_event)
		end

feature {NONE} -- Implementation

	c_initialize_callback (obj: POINTER; a_current: ICOR_DEBUG_UNMANAGED_CALLBACK;
					a_ucb_debug_event : POINTER
				): INTEGER is
			-- Pass features to external side to enable callbacks.
		external
			"[
				C++ DebuggerUnmanagedCallback signature 
					(EIF_OBJECT, EIF_POINTER): EIF_INTEGER
				use "cli_debugger_callback.h"
			]"
		alias
			"initialize_callback"
		end

	c_terminate_callback (obj: POINTER): INTEGER is
			-- Pass features to external side to terminate callbacks.
		external
			"[
				C++ DebuggerUnmanagedCallback signature 
					(): EIF_INTEGER
				use "cli_debugger_callback.h"
			]"
		alias
			"terminate_callback"
		end

end -- class ICOR_DEBUG_UNMANAGED_CALLBACK

