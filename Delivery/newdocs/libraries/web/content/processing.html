<html>
	<HEAD>
		<TITLE>Processing Requests</TITLE>
		<LINK REL=StyleSheet HREF="/default.css">
	</HEAD>
	<body>
		<h1>Processing Requests</h1>

		<P>EiffelWeb provides a complete set of features and interface which  helps building
        a wide range of possible requests.</p>

		<h2>Basic CGI Handling</h2>

		<h3>Accessing Environment Variables</h3>

		<P>Much of the information needed by CGI applications is made
available via environment variables. Program using EiffelWeb can access this
information through the class
        <a class="eclass" href="../../../../../../../../libraries/web/reference/environment/cgi_environment.html">CGI_ENVIRONMENT</a>.<br>
<br>
These variables are usually used for the following purposes:</p>

        <ul>
          <li>Getting information about the server itself</li>
          <li>Checking the client browser</li>
          <li>Restricting Access for specified Domains</li>
          <li>Ensuring User Authentification and Identifications </li>
          <li>Dealing with Cookies</li>
        </ul>

		<h3>Accessing Input Values</h3>

		<P>The browser sends in the <i>In</i> a stream containing the data relative to the user
entry and selection at the applications starts. EiffelWeb stores each data element and
its associated name within a Hash-Table, the feature <A CLASS="efeature" HREF="../../../../../../../../libraries/web/reference/cgi_handling/cgi_interface.html#form_data.html#f_form_data">form_data</A> of class
        <a class="eclass" href="../../../../../../../../libraries/web/reference/cgi_handling/cgi_interface.html">CGI_INTERFACE</a>. You can access their values from your code with the interface
defined in class <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/forms/cgi_form.html">CGI_FORMS</A>, which allows you to retrieve text entries, to know
whether a button was pressed or not, etc …</p>

		<h3>Sending answers to the browser</h3>

		<P>The response has to contain an HTTP header in order to be understood by the
browser. Depending on the nature of the reply, an HTML page, a simple
re-direction, an error notification … you will select different features and
options of class <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/html/class_header.html">CLASS_HEADER</A>. Your application
        must send at least a response
header, indicating the status of the request if known. You may want to attach to
it the text you wish to send back to the user. This text is usually written in
HTML, so that it will display nicely on the user’s browser; you can use for this
purpose the class <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/html/html_path.html">HTML_PAGE</A>.
        You may then send the header followed by your text  using the
features <A CLASS="efeature" HREF="../../../../../../../../libraries/web/reference/cgi_handling/cgi_response_header.html#f_send_to_browser">send_to_browser</A> of classes <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/cgi_handling/cgi_response_header.html">CGI_RESPONSE_HEADER</A> and <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/html/html_path.html">HTML_PAGE</A>.</p>

		<P class="note"><b>Note</b>: You may not write into a file before you
        have sent the answer to the browser.</p>

		<h3>Dealing with Cookies</h3>

		<P>You can access the cookies corresponding to a specific URL/domain thanks to the
feature <a class="efeature" href="../../../../../../../../libraries/web/reference/cgi_handling/cgi_environment.html#f_cookies">
        cookies</a>, of class
        <a class="eclass" href="../../../../../../../../libraries/web/reference/environment/cgi_environment.html">CGI_ENVIRONMENT</a>. It is a
        hash-table, in which all
the data with associated names as keys are stored.</p>

		<P>To store a cookie on a machine, you can use the feature
        <a class="efeature" href="../../../../../../../../libraries/web/reference/cgi_handling/cgi_response_header.html#f_set_cookies">
        set_cookies</a>, of class <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/cgi_handling/cgi_response_header.html">CGI_RESPONSE_HEADER</A>.</p>

		<h2>Advanced Topics</h2>

		<h3>EiffelWeb and Security</h3>

		<P>The information the server sends back may be confidential. Follow
        these steps to protect the page content:</p>

        <ol>
          <li>Create an HTML page, for example by using class <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/html/html_path.html">HTML_PAGE</A>.
          </li>
          <li>Store this page somewhere, with a random name.</li>
          <li>Create an instance of class <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/cgi_handling/cgi_response_header.html">CGI_RESPONSE_HEADER</A>
          and choose the secure redirect option. Then call <A CLASS="efeature" HREF="../../../../../../../../libraries/web/reference/cgi_handling/cgi_response_header.html#f_send_to_browser">send_to_browser</A>.</li>
        </ol>

		<h3>Complex Headers</h3>

		<P>The Eiffel-Web application has the possibility to send a selection of different
HTTP headers. They can be found in class <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/cgi_handling/cgi_response_header.html">CGI_RESPONSE_HEADER</A>. In particular, it
is advised to generate a status for each request, the value of the most common
ones may be found in class <A CLASS="eclass" HREF="../../../../../../../../libraries/web/reference/cgi_handling/cgi_response_header.html">
        CGI_</A><a href="../../../../../../../../librariesweb/reference/cgi_facilities/cgi_common_status_type.html">COMMON_STATUS_TYPE</a>.</p>

		<h3>Debugging facilities</h3>

		<P>Design by Contract is one of the biggest strength of the Eiffel language. When
you usually run your application from EiffelStudio, you are notified when an
assertion is violated and the tool offers different options in order to be able
to find out its sources (feature and class tools, object inspectors, etc…).
However this cannot be applied to an EiffelWeb application, since it has to be
        ran on the server. <br>
<br>
Therefore, EiffelWeb provides its own facilities for debugging. To test your
classes at run-time, all you need to do is to set the Boolean feature
        <a class="efeature" href="../../../../../../../../libraries/web/reference/cgi_handling/cgi_interface.html#f_is_debug_mode">is_debug_mode</a> to <SPAN CLASS="esymbol">
        True</SPAN> in your root class (which should inherit from
        <a class="eclass" href="../../../../../../../../libraries/web/reference/cgi_handling/cgi_interface.html">CGI_INTERFACE</a>). When your application crashes (because of an assertion or
a bug), the exception trace will be displayed on the screen.</p>

</body>

</html>