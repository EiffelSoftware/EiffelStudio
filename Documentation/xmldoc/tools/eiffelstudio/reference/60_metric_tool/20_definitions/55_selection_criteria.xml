<document title="Selection Criteria" output="studio">
	<meta_data/>
	<paragraph>
		<paragraph>A selection criterion is used to filter out candidate code elements and only leave and count those satisfied elements. For example, criterion is_deferred in a basic class metric is only satisfied when a candidate class is deferred. A selection criterion can have modifiers which indicate how the associated criterion will perform its filtering task. There are four kinds of modifiers, shown as follows:</paragraph>
		<list ordered="false">
			<item>
				Text modifier - String text, and this text is called criterion text
			</item>
			<item>
				Domain modifier - Domain, and this domain is called criterion domain
			</item>
			<item>
				Metric modifier - Metric, and this metric is called criterion metric
			</item>
			<item>
				Normal modifier - modifier other than text, domain and metric
			</item>
		</list>			
		<paragraph>Let's first introduce a convention to describe selection criteria:</paragraph>
		<list ordered="false">
			<item>
				Criterion name will be followed by modifiers (separated by a comma) if any
			</item>
			<item>
				Text modifier will be in double quotes
			</item>
			<item>
				Domain modifier will follow the convention of domain
			</item>
			<item>
				Metric modifier will be in bold
			</item>
			<item>
				Normal modifier will be in normal font and face
			</item>
			<item>
				Braces will be added to avoid ambiguity
			</item>
		</list>	
				
		<paragraph>Some examples:</paragraph>
		<paragraph>is_deferred</paragraph>
		<paragraph>text_is "some text", identity, case-sensitive</paragraph>
		<paragraph>ancestor_is {<class_name>ANY</class_name>}</paragraph>
		<paragraph>value_of_metric_is <bold>Class</bold>, {base}, (&gt;0 and &lt;100)</paragraph>		
		<paragraph>There are several kinds of selection criteria, namely, text criterion, path criterion, relation criterion, metric value criterion and normal criterion.</paragraph>
		<heading>
			<size>2</size>
			<content>Text Criterion</content>
		</heading>		
		<paragraph>Text criterion uses a text modifier, two normal modifiers (one to specify matching strategy and the other to specify case sensitivity)  to perform text pattern matching. Criterion such as name_is and text_is are text criteria.</paragraph>
		<paragraph>Let's take text criterion name_is as an example:</paragraph>
		<paragraph>The syntax for name_is is:</paragraph>		
		<paragraph>
				name_is "pattern", matching_strategy, case_sensitive
		</paragraph>
		<paragraph>The match_strategy modifier decides how criterion text "pattern" is matched, and can choose from one of the following four values:</paragraph>
		<list ordered="false">
			<item>
				<paragraph>Identity - Pattern is matched if the text is identical to criterion text</paragraph>
			</item>
			<item>
				<paragraph>Containing - Pattern is matched the text contains criterion text</paragraph>
			</item>
			<item>
				<paragraph>Wildcard - Pattern is matched if it occurs in criterion text according to wildcard rules</paragraph>
			</item>
			<item>
				<paragraph>Regular expression - Pattern is matched if it occurs in criterion text according to regular expression rules</paragraph>
			</item>
		</list>	
		<paragraph>The case_sensitive modifier can be True or False, it indicates if pattern matching is case sensitive or not.</paragraph>
		<paragraph>In the following two figures, name_is criterion is shown. That criterion will select all classes whose name starts with a letter A (using regular expression rules) case-insensitively.</paragraph>
		<paragraph>
			<image>
				<url>../../../../../images/eiffelstudio/metrics_tool/selection_cri1.png</url>
				<alt_text>Text criterion</alt_text>
			</image>
		</paragraph>
		<paragraph>
			<image>
				<url>../../../../../images/eiffelstudio/metrics_tool/selection_cri2.png</url>
				<alt_text>Text criterion</alt_text>
			</image>
		</paragraph>
		<heading>
			<size>2</size>
			<content>Path Criterion</content>
		</heading>		
		<paragraph>A path criterion uses a text modifier as path to test if a candidate class is located in that path. There are two path criteria, namely, path_is and path_in.</paragraph>
		<paragraph>The path uses Unix format. For example, criterion path_is "/kernel" will evaluate to True if a candidate class is located in kernel folder related to the class's group. On Windows, path matching will be case-insensitive, on other platforms, path matching will be case-sensitive.</paragraph>
		<paragraph>The following figure shows a path criterion used to find classes which locate in "kernel" folder:</paragraph>		
		<paragraph>
			<image>
				<url>../../../../../images/eiffelstudio/metrics_tool/selection_cri3.png</url>
				<alt_text>Path criterion</alt_text>
			</image>
		</paragraph>		
		<heading>
			<size>2</size>
			<content>Relation Criterion</content>
		</heading>		
		<paragraph>A relation criterion uses a criterion domain to check if a candidate code element is of some relationship between the criterion domain. Some other modifiers may also appear in a relation criterion.</paragraph>
		<paragraph>Let's have look at a class relation criterion client_is shown in the following two figures where a basic class metric with relation criterion client_is is defined. This client_is criterion will match all direct normally referenced as well as only syntactically referenced suppliers of class <class_name>LINKED_LIST</class_name>.</paragraph>
		<paragraph>
			<image>
				<url>../../../../../images/eiffelstudio/metrics_tool/selection_cri4.png</url>
				<alt_text>Relation criterion</alt_text>
			</image>
		</paragraph>		
		<paragraph>
			<image>
				<url>../../../../../images/eiffelstudio/metrics_tool/selection_cri5.png</url>
				<alt_text>Relation criterion</alt_text>
			</image>
		</paragraph>						
		<paragraph>For more information about normally referenced and only syntactically referenced suppliers, see document of relation criterion client_is.</paragraph>
		<heading>
			<size>2</size>
			<content>Value Criterion</content>
		</heading>
		<paragraph>Value criterion is used to test if calculated value of a given metric satisfies some values. There is only one criterion named value_of_metric_is in this category. Please see the document for value criterion value_of_metric_is for more information.</paragraph>
		<paragraph>The following figure shows the use of value_of_metric_is criterion, where a class basic metric is defined to find classes whose lines of code is over 1000:</paragraph>
		<paragraph>
			<image>
				<url>../../../../../images/eiffelstudio/metrics_tool/selection_cri6.png</url>
				<alt_text>Relation criterion</alt_text>
			</image>
		</paragraph>		
		<paragraph>The following figure shows the result of the above metric:</paragraph>
		<paragraph>
			<image>
				<url>../../../../../images/eiffelstudio/metrics_tool/selection_cri7.png</url>
				<alt_text>Relation criterion</alt_text>
			</image>
		</paragraph>		
		<heading>
			<size>2</size>
			<content>Normal Criterion</content>
		</heading>		
		<paragraph>All other criteria except for those described above are called normal criteria.</paragraph>
		<paragraph>Some examples:</paragraph>
		<paragraph>is_library - test if a candidate group is a library</paragraph>
		<paragraph>is_deferred - test if a candidate class or feature is deferred</paragraph>
		<paragraph>is_comment - test if a candidate line is comment</paragraph>
				
		<heading>
			<size>2</size>
			<content>Criterion Connector</content>
		</heading>			
		<paragraph>There are three criterion connectors: and, or, not. They are self-explained. Just a simple example, see the following figure:</paragraph>
		<paragraph>
			<image>
				<url>../../../../../images/eiffelstudio/metrics_tool/selection_cri8.png</url>
				<alt_text>Relation criterion</alt_text>
			</image>
		</paragraph>
		<seealso>
			<bold>See Also</bold>
			<line_break/>
			<link>
				<url>80_domains.xml</url>
				<label>Domains</label>
			</link>
			<line_break/>
			<link>
				<url>99_criterion_reference.xml</url>
				<label>Selection criterion reference</label>
			</link>
		</seealso>		
	</paragraph>
</document>
