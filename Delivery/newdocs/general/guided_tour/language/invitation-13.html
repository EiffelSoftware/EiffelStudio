<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="tour.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> 12  COMBINING GENERICITY AND INHERITANCE </TITLE>
</HEAD>
<!--------------------------------------------------->
<SCRIPT LANGUAGE="Javascript">
	// Default values
	var oNewWindow = 0;

	function ImageClick( oImage )
	{
		if( oNewWindow == 0 || oNewWindow.closed )
		{
			oNewWindow = window.open (oImage.src,"", "status=no, toolbar=no, menubar=no, location=no, resizable=yes");
		}
		else
		{
			oNewWindow.location = oImage.src;
		}
	}
</SCRIPT>
<!--------------------------------------------------->
<body bgcolor="#faf0e6">
<DIV>
<p class="top" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="../index.html">Getting started with Eiffel (local)</a>

<img src="power.gif" ALT="Eiffel Home Page" align="right" border="0"  usemap="#eiffel"><map name="eiffel"><area shape="RECT" alt="Eiffel Home Page" coords="0,0,109,226" HREF="http://www.eiffel.com"><area shape="default" nohref></map>

<p class="top" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="invitation-12.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="invitation.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="invitation-14.html"><area shape="default" nohref></MAP>
</DIV>
<H1 CLASS="aa-sec2">
<A NAME="pgfId-445495"></A>12  COMBINING <A NAME="marker-445493"></A>GENERICITY<A NAME="marker-445494"></A> AND INHERITANCE </H1>
<P CLASS="nn-first">
<A NAME="pgfId-445497"></A><A NAME="marker-445496"></A>Genericity and inheritance, the two fundamental mechanisms for generalizing classes, may be combined in two fruitful ways. 
<P CLASS="nn-normal">
<A NAME="pgfId-445499"></A>The first technique yields <SPAN CLASS="ff-bold">
polymorphic data structures</SPAN>
<A NAME="marker-445498"></A>. Assume that in the generic class <SPAN CLASS="ee-text">
LIST </SPAN>
[<SPAN CLASS="ee-text">
G</SPAN>
] the insertion procedure <SPAN CLASS="ee-text">
put</SPAN>
 has a formal argument of type <SPAN CLASS="ee-text">
G</SPAN>
, representing the element to be inserted. Then with a declaration such as
<p><ul><table bgcolor="#cfffcf" width="79%" BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="ee-text">
<A NAME="pgfId-445502"></A>pl<SPAN CLASS="ee-comment">
:</SPAN>
 LIST [POLYGON] 
</TD>
</TR>
</table></ul><p>
<P CLASS="nn-first">
<A NAME="pgfId-445503"></A>the type rules imply that in a call <SPAN CLASS="ee-text">
pl</SPAN>
<SPAN CLASS="ee-dot">
.</SPAN>
<SPAN CLASS="ee-text">
pu</SPAN>
<SPAN CLASS="ee-comment">
t (&quot;</SPAN>
<SPAN CLASS="ee-text">
p</SPAN>
<SPAN CLASS="ee-comment">
&quot;) </SPAN>
the permitted types for the argument <SPAN CLASS="ee-text">
p </SPAN>
include not just <SPAN CLASS="ee-text">
POLYGON</SPAN>
, but also <SPAN CLASS="ee-text">
RECTANGLE</SPAN>
 (an heir of <SPAN CLASS="ee-text">
POLYGON</SPAN>
) or any other type conforming to <SPAN CLASS="ee-text">
POLYGON</SPAN>
 through inheritance. 
<P CLASS="nn-normal">
<A NAME="pgfId-512569"></A>The basic conformance requirement used here is the inheritance-based type compatibility rule: <SPAN CLASS="ee-text">
V</SPAN>
 conforms to <SPAN CLASS="ee-text">
T </SPAN>
if <SPAN CLASS="ee-text">
V</SPAN>
 is a descendant of <SPAN CLASS="ee-text">
T</SPAN>
.
<P CLASS="nn-normal">
<A NAME="pgfId-512570"></A>Structures such as <SPAN CLASS="ee-text">
pl</SPAN>
 may contain objects of different types, hence the name &quot;polymorphic data structure&quot;. Such polymorphism is, again, made safe by the type rules: by choosing an actual generic parameter (<SPAN CLASS="ee-text">
POLYGON</SPAN>
 in the example) based higher or lower in the inheritance graph, you extend or restrict the permissible types of objects in <SPAN CLASS="ee-text">
pl</SPAN>
. A fully general list would be declared as
<p><ul><table bgcolor="#cfffcf" width="79%" BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="ee-text">
<A NAME="pgfId-512573"></A><SPAN CLASS="ee-text">
LIST </SPAN>
<SPAN CLASS="ee-comment">
[</SPAN>
<SPAN CLASS="ee-text">
ANY</SPAN>
<SPAN CLASS="ee-comment">
] </SPAN>

</TD>
</TR>
</table></ul><p>
<P CLASS="nn-first">
<A NAME="pgfId-513190"></A>where <SPAN CLASS="ee-text">
ANY</SPAN>
, a Kernel Library class, is automatically an ancestor of any class that you may write.
<P CLASS="nn-normal">
<A NAME="pgfId-513192"></A>The other mechanism for combining genericity and inheritance is <SPAN CLASS="ff-bold">
constrained genericity</SPAN>
<A NAME="marker-513191"></A>. By indicating a class name after a formal generic parameter, as in
<p><ul><table bgcolor="#cfffcf" width="79%" BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="ee-text">
<A NAME="pgfId-513195"></A><SPAN CLASS="ee-text">
VECTOR </SPAN>
<SPAN CLASS="ee-comment">
[</SPAN>
<SPAN CLASS="ee-text">
T -&gt; NUMERIC</SPAN>
<SPAN CLASS="ee-comment">
]</SPAN>

</TD>
</TR>
</table></ul><p>
<P CLASS="nn-first">
<A NAME="pgfId-445515"></A>you express that only descendants of that class (here <SPAN CLASS="ee-text">
NUMERIC</SPAN>
) may be used as the corresponding actual generic parameters. This makes it possible to use the corresponding operations. Here, for example, class <SPAN CLASS="ee-text">
VECTOR</SPAN>
 may define a routine <SPAN CLASS="ee-keyword">
infix</SPAN>
<A NAME="marker-445516"></A> &quot;+&quot; for adding vectors, based on the corresponding routine from <SPAN CLASS="ee-text">
NUMERIC</SPAN>
 for adding vector elements. Then by making <SPAN CLASS="ee-text">
VECTOR</SPAN>
 itself inherit from <SPAN CLASS="ee-text">
NUMERIC</SPAN>
, you ensure that it satisfies its own generic constraint and enable the definition of types such as <SPAN CLASS="ee-text">
VECTOR </SPAN>
<SPAN CLASS="ee-comment">
[</SPAN>
<SPAN CLASS="ee-text">
VECTOR </SPAN>
<SPAN CLASS="ee-comment">
[</SPAN>
<SPAN CLASS="ee-text">
T</SPAN>
<SPAN CLASS="ee-comment">
]]</SPAN>
. 
<P CLASS="nn-normal">
<A NAME="pgfId-513377"></A>As you have perhaps guessed, unconstrained genericity, as in <SPAN CLASS="ee-text">
LIST </SPAN>
<SPAN CLASS="ee-comment">
[</SPAN>
<SPAN CLASS="ee-text">
G</SPAN>
], may be viewed as an abbreviation for genericity constrained by <SPAN CLASS="ee-text">
ANY</SPAN>
, as in
<p><ul><table bgcolor="#cfffcf" width="79%" BORDER="1">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="ee-text">
<A NAME="pgfId-513383"></A>LIST <A NAME="marker-513380"></A>[G -&gt; AN<A NAME="marker-513381"></A>Y].<A NAME="marker-513382"></A>
</TD>
</TR>
</table></ul><p>
<P CLASS="nn-first">
<A NAME="pgfId-513384"></A>Something else you may have guessed: if <SPAN CLASS="ee-text">
ANY</SPAN>
, introduced in this session, is the top of the inheritance structure -- providing all classes with universal features such as <SPAN CLASS="ee-text">
equal</SPAN>
 to compare arbitrary objects and <SPAN CLASS="ee-text">
clone</SPAN>
 to duplicate objects -- then <SPAN CLASS="ee-text">
NONE</SPAN>
, seen earlier in the notation <SPAN CLASS="ee-keyword">
feature</SPAN>
<SPAN CLASS="ee-text">
 </SPAN>
<SPAN CLASS="ee-comment">
{</SPAN>
<SPAN CLASS="ee-text">
NONE</SPAN>
<A NAME="marker-513385"></A><SPAN CLASS="ee-comment">
}</SPAN>
, is its bottom. <SPAN CLASS="ee-text">
NONE</SPAN>
 indeed conceptually inherits from all other classes. <SPAN CLASS="ee-text">
NONE</SPAN>
 is, among other things, the type of <SPAN CLASS="ee-text">
Void</SPAN>
, the void reference.
<p class="bottom" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="invitation-12.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="invitation.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="invitation-14.html"><area shape="default" nohref></MAP>

<p class="bottom" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="../index.html">Getting started with Eiffel (local)</a>

<p class="copyright" align="center">Copyright Interactive Software Engineering, 2001
</BODY>
</HTML>
