# mtwel.lib - Makefile for Microsoft C

CC = cl
CFLAGS = -nologo -W4 -c -MT -DEIF_THREADS -Ox -I..\spec\windows\include -I$(ISE_EIFFEL)\studio\spec\$(ISE_PLATFORM)\include -D_UNICODE -DUNICODE

.c.obj:
	$(CC) $(CFLAGS) $<

OBJ = 	disptchr.obj \
		enumfont.obj \
		enum_child_windows.obj \
		estream.obj \
		msgboxpa.obj \
		diskspace.obj \
		drawstate.obj \
		dynload.obj \
		mousehook.obj \
		choose_folder.obj \
		wel_thr_init.obj


mtwel.lib: $(OBJ)
	if exist $@ del $@
	lib /NOLOGO /OUT:$@ $(OBJ)
	if not exist ..\spec\msc mkdir ..\spec\msc
	if not exist ..\spec\msc\$(ISE_PLATFORM) mkdir ..\spec\msc\$(ISE_PLATFORM)
	if not exist ..\spec\msc\$(ISE_PLATFORM)\lib mkdir ..\spec\msc\$(ISE_PLATFORM)\lib
	copy $@ ..\spec\msc\$(ISE_PLATFORM)\lib
	del $@
	del *.obj
