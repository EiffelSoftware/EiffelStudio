indexing
	description: "Objects that represent an EV_TITLED_WINDOW.%
		%The original version of this class was generated by EiffelBuild."
	date: "$Date$"
	revision: "$Revision$"

class
	SEARCH_CONTROL

inherit
	SEARCH_CONTROL_IMP

create
	make_with_panel

feature {NONE} -- Initialization

	make_with_panel (a_panel: SELECTABLE_TEXT_PANEL) is
			-- 
		do
			default_create
			panel := a_panel
		end		

	user_initialization is
			-- called by `initialize'.
			-- Any custom user initialization that
			-- could not be performed in `initialize',
			-- (due to regeneration of implementation class)
			-- can be added here.
		do
			search_button.select_actions.extend (agent search_panel_text)
		end

feature {NONE} -- Implementation

	panel: SELECTABLE_TEXT_PANEL
		-- Panel

	search_panel_text is
			-- 
		local
			l_pos, 
			l_line: INTEGER
			l_text: SELECTABLE_TEXT
		do
			if not panel.text.is_empty and then not search_text.text.is_empty then
				l_text := panel.text_displayed
				l_text.search_string_from_cursor (search_text.text)
				if l_text.successful_search then
						-- Highlight found text	
					l_pos := l_text.found_string_total_character_position	
					l_line := l_text.found_string_line
					panel.select_region (l_pos, l_pos + search_text.text.count)
				end
			end			
		end		
--
--	start_position: INTEGER is
--			-- Position from which to start search
--		do
----			Result := panel.cur caret_position
----			if Result = 0 then
----				Result := 1
----			end
--		end

end -- class SEARCH_CONTROL

