<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Deferred Classes</title>
<link rev="made" href="mailto:webmaster@eiffel.com">
<link rel="stylesheet" href="../../styles/tech.css" type="text/css">
<meta name="Microsoft Border" content="t, default">
</head>

<body><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td><table border="0" cellspacing="0" cellpadding="0" width="100%">
  <tr>
    <td valign="top" bgcolor="#000063" width="291"><b><font face="Arial" size="4" color="#FFFFFF">Interactive<br>
      Software Engineering</font></b></td>
    <td valign="top" bgcolor="#000063" width="720"><b><font face="Arial" size="6" color="#FFFFCC">Deferred Classes</font></b></td>
  </tr>
  <tr>
    <td colspan="2" valign="top" width="100%">
<p align="center">[<a href="http://eiffel.com">ISE Home</a>] <nobr>[&nbsp;<a href="../../index.html">Home</a>&nbsp;]</nobr> <nobr>[&nbsp;<a href="../../release_notes.html">Release&nbsp;Notes</a>&nbsp;]</nobr> <nobr>[&nbsp;<a href="../../papers/index.html">Technology&nbsp;Papers</a>&nbsp;]</nobr> <nobr>[&nbsp;<a href="../../install.html">Installation&nbsp;Notes</a>&nbsp;]</nobr> <nobr>[&nbsp;<a href="../index.html">About&nbsp;Eiffel</a>&nbsp;]</nobr>
<hr>

    </td>
  </tr>
</table></td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><!--msnavigation--><td valign="top"><table cols="1" cellpadding="5" cellspacing="0" border="0">
<tr><td>

<h2><A NAME="HDR0"></A>11 DEFERRED CLASSES</h2>

<P>The inheritance mechanism includes one more major component: deferred
routines and classes. </P>

<P>Declaring a routine <I>r</I> as deferred in a class <I>C</I> expresses
that there is no default implementation of<I> r</I> in <I>C</I>; such implementations
will appear in eventual descendants of <I>C</I>. A class which has one
or more deferred routines is itself said to be deferred. A non-deferred
routine or class is said to be <B>effective</B>. </P>

<P>For example, a system used by a Department of Motor Vehicles to register
vehicles could include a class of the form </P>

    <ul>
<DL>
<DT><B><FONT COLOR="#0000FF">deferred class </FONT></B><I>VEHICLE </I><B><FONT COLOR="#0000FF">feature
</FONT></B><BR>
<BR>
</DT>

<DD><I>dues_paid (year: INTEGER): BOOLEAN </I><B><FONT COLOR="#0000FF">is
</FONT></B></DD>

<DL>
<DD><B><FONT COLOR="#0000FF">do</FONT></B><I>... </I><B><FONT COLOR="#0000FF">end</FONT></B></DD>
</DL>

<P><BR>
</P>

<DD><I>valid_plate (year: INTEGER): BOOLEAN </I><B>is </B></DD>

<DL>
<DD><B><FONT COLOR="#0000FF">do</FONT></B><I>... </I><FONT COLOR="#0000FF"><B>end</B><I>
</I></FONT></DD>
</DL>

<P><BR>
</P>

<DD><I>register (year: INTEGER) </I><B>is </B></DD>

<DL>
<DL>
<DL>
<DT><FONT COLOR="#FF0000"><B><I>-- </I></B>Register vehicle for </FONT><I>year</I><FONT COLOR="#FF0000">.
</FONT></DT>
</DL>
</DL>

<DD><B><FONT COLOR="#0000FF">require </FONT></B></DD>

<DL>
<DD><I>dues_paid (year) </I></DD>
</DL>

<DD><B><FONT COLOR="#0000FF">deferred </FONT></B></DD>

<DD><B><FONT COLOR="#0000FF">ensure </FONT></B></DD>

<DL>
<DD><I>valid_plate (year) </I></DD>
</DL>

<DD><B><FONT COLOR="#0000FF">end</FONT></B><BR>
<BR>
</DD>

<DT>... Other features, deferred or effective... <BR>
<BR>
</DT>
</DL>
</DL>
    </ul>

<P><B><FONT COLOR="#0000FF">end </FONT></B><I>-- </I>class<I> VEHICLE</I>
</P>

<P>This example assumes that no single registration algorithm applies to
all kinds of vehicle; passenger cars, motorcycles, trucks etc. are all
registered differently. But the same precondition and postcondition apply
in all cases. The solution is to treat <I>register</I> as a deferred routine,
making <I>VEHICLE</I> a deferred class. Descendants of class <I>VEHICLE</I>,
such as <I>CAR</I> or <I>TRUCK</I>, <B>effect</B> this routine, that is
to say, give effective versions. An effecting is similar to a redefinition;
only here there is no effective definition in the original class, just
a specification in the form of a deferred routine. The term <B>redeclaration</B>
covers both redefinition and effecting. </P>

<CENTER><P><IMG SRC="deferred.maker.fig_1.gif" HEIGHT=139 WIDTH=367> </P></CENTER>

<H3 ALIGN=CENTER><B><I>Vehicle inheritance hierarchy</I></B></H3>

<P>Deferred classes describe a group of implementations of an abstract
data type rather than just a single implementation. A deferred class may
not be instantiated: <B><FONT COLOR="#0000FF">create</FONT></B> <I>v</I> is invalid if <I>v</I> is an entity declared
of type <I>VEHICLE</I>. But such an entity may be assigned a reference
to an instance of a non-deferred descendant of <I>VEHICLE</I>. For example,
assuming <I>CAR</I> and <I>TRUCK</I> provide effective definitions for
all deferred routines of <I>VEHICLE</I>, the following will be valid: </P>

    <ul>
<DL>
<DT><I>v: VEHICLE; c: CAR; t: TRUCK; </I></DT>

<DT><I>... </I></DT>

<DT><B><FONT COLOR="#0000FF">create</FONT></B><I> c ...; </I><B><FONT COLOR="#0000FF">create</FONT></B> <I>t ...;... </I><BR>
<BR>
</DT>

<DT><B><FONT COLOR="#0000FF">if </FONT></B>&quot;Some test&quot; <B><FONT COLOR="#0000FF">then
</FONT></B></DT>

<DL>
<P><I>v := c </I></P>
</DL>

<P><B><FONT COLOR="#0000FF">else </FONT></B></P>

<DL>
<P><I>v := t </I></P>
</DL>

<P><B><FONT COLOR="#0000FF">end</FONT></B><BR>
</P>

<DT><I>v.register (1996) </I></DT>
</DL>
    </ul>

<P>This example fully exploits polymorphism: depending on the outcome of
&quot;Some test&quot;, <I>v</I> will be treated as a car or a truck, and
the appropriate registration algorithm will be applied. Also, &quot;Some
test&quot; may depend on some event whose outcome is impossible to predict
until run-time, for example the user clicking with the mouse to select
one among several vehicle icons displayed on the screen. </P>

<P>Deferred classes are particularly useful at the <B>design</B> stage.
The first version of a module may be a deferred class, which will later
be refined into one or more effective (non-deferred) classes. Particularly
important for this application is the possibility of associating a precondition
and a postcondition with a routine even though it is a deferred routine
(as with <I>register</I> above), and an invariant with a class even though
it is a deferred class. This enables the designer to attach precise semantics
to a module at the design stage, long before making any implementation
choices. </P>

<P>These possibilities make Eiffel an attractive alternative to PDLs (Program
Design Languages). The combination of deferred classes to capture partially
understood concepts, assertions to express what is known about their semantics,
and the language's other structuring facilities (information hiding, inheritance,
genericity) to obtain clear, convincing architectures, yields a higher-level
design method. A further benefit, of course, is that the notation is also
a programming language, making the development cycle smoother by reducing
the gap between design and implementation. </P>

<P>The role of Eiffel in this cycle is not limited to design and implementation
but extends to the earliest stage of development, <B>analysis</B>. Deferred
classes written at that stage describe not software objects, but objects
from the external reality's model -- documents, airplanes, investments.
Here again the presence of assertions to express constraints, and the language's
other structuring facilities, provide an attractive alternative to older
methods and notations. </P>

<CENTER>
<P><A HREF="geninh.maker.html"><IMG SRC="fm2html-previous.gif" HEIGHT=16 WIDTH=16></A> <A HREF="BOOK.maker.html"><IMG SRC="fm2html-toc.gif" HEIGHT=16 WIDTH=16></A> <A HREF="system.maker.html"><IMG SRC="fm2html-next.gif" HEIGHT=16 WIDTH=16></A> </P>
</CENTER>

  </td></tr></table>&nbsp;<!--msnavigation--></td></tr><!--msnavigation--></table></BODY>
</HTML>
