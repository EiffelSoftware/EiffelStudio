<document title="EiffelBuild: Code Generation">
	<meta_data>
		<help>
			<toc>
				<envision_title>Code Generation</envision_title>
				<envision_location>EiffelEnvision\Tools\EiffelBuild\Reference</envision_location>
				<envision_pseudo_name>90</envision_pseudo_name>
			</toc>
		</help>
	</meta_data>
	<paragraph>
		<paragraph>To generate Eiffel code representing your system, select 
			<bold>Generate code</bold> from the 
			<bold>Project</bold> menu or click 
			<image>
				<url>/images/eiffelbuild/icons/icon_code_generation_color.png</url> 
			</image> on the 
			<link>
				<url>/tools/eiffelbuild/reference/10_general_interface_description/20_main_toolbars.xml</url>
				<label>main toolbar</label>
			</link>.
			<paragraph>The length of time taken to generate your code is dependent on the speed of the system you are running, and the size of your interface, but typically takes a couple of seconds. A progress bar is displayed during the generation of your system.</paragraph>
			<paragraph>The code will be generated according to the options you selected in the 
				<link>
					<url>/tools/eiffelbuild/reference/80_project_settings/index.xml</url>
					<label>project settings</label>
				</link>.
			</paragraph>
			<heading>
				<size>2</size>Generated classes
			</heading>
			<paragraph>The generation of an EiffelBuild project causes the following files to be generated:</paragraph>
			<list ordered="false">
				<item>A constants class and its respective implementation class. For example, if the constants class is named as "constants" in the 
					<link>
						<url>/tools/eiffelbuild/reference/80_project_settings/index.xml</url>
						<label>project settings</label>
					</link>, two classes, CONSTANTS and CONSTANTS_IMP are generated.
				</item>
				<item>A class and implementation class for each window, dialog and "top level" widget in the system (each of which is contained in the <link><url>../64_widget_selector/index.xml</url><label>widget selector</label></link>), named to correspond with the name attribute of the object. For example, for a window in the project named "main_window", the files MAIN_WINDOW and MAIN_WINDOW_IMP are generated.</item>
				<item>An optional file named "constants.txt" which contains definitions of all INTEGER and STRING constants. This is only generated if "Load constants from file" is selected in the 
					<link>
						<url>/tools/eiffelbuild/reference/80_project_settings/index.xml</url>
						<label>project settings</label>
					</link>. The generated code loads the constants from this file, and allows simple modification for localization, i.e. for foreign languages provide a different version of this file with all strings converted.
				</item>
			</list>
			<paragraph>For each "top level" widget class in the system (contained in the <link><url>../64_widget_selector/index.xml</url><label>widget selector</label></link>), the following class hierarchy is generated:</paragraph>
			<paragraph>
				<image>
					<url>/images/eiffelbuild/screenshots/class_project_diagram.png</url>
				</image>
			</paragraph>
			<paragraph>If the "generate as client" option is selected for a particular object (changeable from the <link>
					<url>/tools/eiffelbuild/reference/40_object_editor/index.xml</url>
					<label>object editor</label>
				</link>, only for objects contained in the <link><url>../64_widget_selector/index.xml</url><label>widget selector</label></link>), a client supplier relationship exists between the generated widget class and the EiffelVision widget, as illustrated below:
			</paragraph>
			<paragraph>
				<image>
					<url>/images/eiffelbuild/screenshots/class_project_diagram_client.png</url>
				</image>
			</paragraph>
			<note>
				<bold>Note</bold>: All other diagrams on this page show only the non client version of the settings, where the generated widget inherits from the EiffelVision class.
			</note>
			<heading>
				<size>2</size>Project build type
			</heading>
			<paragraph>If 
				<link>
					<url>/tools/eiffelbuild/reference/80_project_settings/20_build.xml</url>
					<anchor_name>build_type</anchor_name>
					<label>build type</label>
				</link> is selected as 
				<bold>Project</bold> in the 
				<link>
					<url>/tools/eiffelbuild/reference/80_project_settings/index.xml</url>
					<label>project settings</label>
				</link>, then all the classes listed above in "Generated classes" are generated, along with the following:
			</paragraph>
			<list ordered="false">
				<item>A project configuration file called "build_project.ecf".</item>
				<item>An application class which launches the root window of the project.</item>
			</list>
			<paragraph>The generated files comprise a complete project with a configuration file enabling you to compile and execute the generated system as is. The following diagram illustrates the hierarchy of the generated project, showing only the root window of the project:</paragraph>
			<paragraph>
				<image>
					<url>/images/eiffelbuild/screenshots/complete_project_diagram.png</url>
				</image>
			</paragraph>
		</paragraph>
		<heading>
			<size>2</size>Modifying code after generation
		</heading>
		<paragraph>The choice to generate an interface and an implementation class for the windows and constants was to enable modification of the interface using EiffelBuild, once you had hand edited code. The rule is that the implementation classes are  re-generated every time, but the interface classes are not. It follows from this that you should not add hand written code to the implementation classes (ending in _IMP), as any changes you make will be lost when re-generation takes place.</paragraph>
		<paragraph>Using this mechanism, you can generate your initial system using EiffelBuild, and implement any event features that have been generated (in the interface) by EiffelBuild. If you then decide that you wish to modify the look and the feel of the interface, you can return to EiffelBuild, make the necessary adjustments and then re-generate the system.</paragraph>
		<note>
			<bold>Note</bold>: When returning to EiffelBuild to modify the interface, if you delete or rename controls, then it is quite possible that you will break your existing code. Care should be taken with all changes of this type.
		</note>
		<paragraph>Looking at a generated system, you will see that the 
			<link>
				<url>/tools/eiffelbuild/reference/40_object_editor/index.xml</url>
				<anchor_name>events</anchor_name>
				<label>events</label>
			</link> connected to your controls are defined as deferred in the implementation and actually implemented in the interface class. This means that if you return to EiffelBuild with a previously generated system, and add a new event to a control, then you will have to implement the definition in the interface class yourself (as the class interface class is not re-generated).
		</paragraph>
		<seealso>
			<bold>See also</bold>: 
			<line_break/>
			<link>
				<url>/tools/eiffelbuild/reference/80_project_settings/index.xml</url>
				<label>Project settings</label>
			</link>
		</seealso>
	</paragraph></document>
