<HTML>

<HEAD>
<META NAME="GENERATOR" CONTENT="Microsoft FrontPage 5.0">
<META NAME="ProgId" CONTENT="FrontPage.Editor.Document">
<LINK REL="StyleSheet" HREF="../../../default.css">
<META NAME="MS-HKWD" CONTENT="Example,Web Service">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<TITLE>Web Services example</TITLE>
<STYLE>
<!--
span.ereserved1
	{color:darkgreen}
span.eclass1
	{color:#0000AA}
span.efeature1
	{color:darkgreen}
span.estring1
	{color:indigo}
-->
</STYLE>
</HEAD>

<BODY>

<H1>Web Services example</H1>
<P>This example shows you how to use and how to configure an Eiffel Web Service. There are two Web
Services <SPAN CLASS="eFeature">square</SPAN> and <SPAN CLASS="eFeature">time</SPAN>. The first one
(<SPAN CLASS="eFeature">square)</SPAN>, returns the square of the number entered. The
<SPAN CLASS="eFeature">time</SPAN> Web Service returns the current time and uses the context
inherited from class <SPAN CLASS="eClass">WEB_WEB_SERVICE</SPAN>. We also use an indexing clause to
describe our Web Services in the html page and to add a namespace. Finally we use an indexing clause
in each Web Service to describe it in the html page.</P>
<P>&nbsp;</P>
<PRE>&lt;%@ WebService class=&quot;<SPAN CLASS="eClass">MY_WEB_SERVICE</SPAN>&quot; <B>Language=&quot;Eiffel&quot;</B> %&gt;

<SPAN CLASS="eReserved">indexing</SPAN>
    <SPAN CLASS="eReserved">description</SPAN>: <SPAN CLASS="eString">&quot;[</SPAN>
<SPAN CLASS="eString">		    Web service containing two services, square and time.
		]&quot;</SPAN>
    <SPAN CLASS="eReserved">attribute</SPAN>: <SPAN CLASS="eReserved">create</SPAN> {<SPAN CLASS="eClass">WEB_WEB_SERVICE_ATTRIBUTE</SPAN>}.<SPAN CLASS="eFeature">make</SPAN> [[<SPAN CLASS="eString">&quot;description&quot;</SPAN>, <SPAN CLASS="eString">(&quot;These are few Web Services samples.&quot;).</SPAN><SPAN CLASS="eFeature">to_cil</SPAN><SPAN CLASS="eString">]</SPAN>,
 						 [<SPAN CLASS="eString">&quot;namespace&quot;,</SPAN> <SPAN CLASS="eString">(&quot;Eiffel.Samples&quot;).</SPAN><SPAN CLASS="eFeature">to_cil</SPAN>]] <SPAN CLASS="eReserved">end</SPAN>

<SPAN CLASS="eReserved">class</SPAN>
   <SPAN CLASS="eClass"> MY_WEB_SERVICE</SPAN>

<SPAN CLASS="eReserved">inherit</SPAN>
   <SPAN CLASS="eClass"> WEB_WEB_SERVICE</SPAN>
	<SPAN CLASS="eReserved">undefine</SPAN>
	    <SPAN CLASS="eFeature">finalize, get_hash_code, equals, to_string</SPAN>
	<SPAN CLASS="eReserved">end</SPAN>
    <SPAN CLASS="eClass">ANY</SPAN>

<SPAN CLASS="eReserved">feature</SPAN> <SPAN CLASS="eComment">-- Basic Operations</SPAN>

    <SPAN CLASS="eFeature">square</SPAN> (<SPAN CLASS="eLocal">value</SPAN>: <SPAN CLASS="eClass">INTEGER</SPAN>): <SPAN CLASS="eClass">INTEGER</SPAN> <SPAN CLASS="eReserved">is</SPAN>
	    <SPAN CLASS="eComment">-- Mathematical operation square.</SPAN>
<SPAN CLASS="eComment">	</SPAN><SPAN CLASS="eReserved">indexing</SPAN>
	    <SPAN CLASS="eReserved">attribute</SPAN>: <SPAN CLASS="eReserved">create</SPAN> {<SPAN CLASS="eClass">WEB_WEB_METHOD_ATTRIBUTE</SPAN>}.<SPAN CLASS="eFeature">make</SPAN> [[<SPAN CLASS="eString">&quot;description&quot;</SPAN>, (<SPAN CLASS="eString">&quot;Returns the square of the number entered.&quot;</SPAN>).to_cil]] <SPAN CLASS="eReserved">end</SPAN>
	<SPAN CLASS="eReserved">do</SPAN>
	    <SPAN CLASS="eReserved">Result</SPAN> := <SPAN CLASS="eLocal">value</SPAN> * <SPAN CLASS="eLocal">value</SPAN>
	<SPAN CLASS="eReserved">end</SPAN>

    <SPAN CLASS="eFeature">time</SPAN>: <SPAN CLASS="eClass">SYSTEM_STRING</SPAN> <SPAN CLASS="eReserved">is</SPAN>
	    <SPAN CLASS="eComment">-- Return current time.</SPAN>
<SPAN CLASS="eComment">	</SPAN><SPAN CLASS="eReserved">indexing</SPAN>
	    <SPAN CLASS="eReserved">attribute</SPAN>: <SPAN CLASS="eReserved">create</SPAN> {<SPAN CLASS="eClass">WEB_WEB_METHOD_ATTRIBUTE</SPAN>}.<SPAN CLASS="eFeature">make</SPAN> [[<SPAN CLASS="eString">&quot;description&quot;</SPAN>, (<SPAN CLASS="eString">&quot;Returns the current time.&quot;</SPAN>).to_cil]] <SPAN CLASS="eReserved">end</SPAN>
	<SPAN CLASS="eReserved">do</SPAN>
	    <SPAN CLASS="eReserved">Result</SPAN> := <SPAN CLASS="eFeature">context</SPAN>.<SPAN CLASS="eFeature">timestamp</SPAN>.<SPAN CLASS="eFeature">time_of_day</SPAN>.<SPAN CLASS="eFeature">to_string</SPAN>
	<SPAN CLASS="eReserved">end</SPAN>

<SPAN CLASS="eReserved">end</SPAN> <SPAN CLASS="eComment">-- class </SPAN><SPAN CLASS="eClass">MY_WEB_SERVICE</SPAN></PRE>
<P>&nbsp;</P>
<P>Here is the output:</P>
<P>&nbsp;</P>
<P ALIGN="center">
<IMG BORDER="0" SRC="../../../images/asp.net/my_web_service_example_output.png" WIDTH="670" HEIGHT="322"></P>
<P ALIGN="center"><A HREF="http://localhost/eiffel_samples/my_web_service.asmx">[run the example]</A></P>
<P ALIGN="center">&nbsp;</P>

</BODY>

</HTML>
