# wel.lib - Makefile for Microsoft C

CC = cl
# Finalized Version
CFLAGS = -c -Ox -I..\spec\windows\include -I$(EIFFEL4)\bench\spec\windows\include

# Debug Version
#CFLAGS = -c -Zi -I..\spec\windows\include -I$(EIFFEL4)\bench\spec\windows\include

.c.obj:
	$(CC) $(CFLAGS) $<

OBJ = 	disptchr.obj \
		enumfont.obj \
		estream.obj \
		msgboxpa.obj \
		registry.obj \
		diskspace.obj \
		dynload.obj \
		mousehook.obj

wel.lib: $(OBJ)
	if exist $@ del $@
	lib /OUT:$@ $(OBJ)
	if not exist ..\spec\msc mkdir ..\spec\msc
	if not exist ..\spec\msc\lib mkdir ..\spec\msc\lib
	copy $@ ..\spec\msc\lib
	del $@
	del *.obj
