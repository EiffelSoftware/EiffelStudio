<html>
	<head>
		<TITLE>Reflection system specification</TITLE>
		<LINK REL="StyleSheet" HREF="/default.css">
		<META NAME ="MS-HKWD" CONTENT = "ISE.Reflection.Emitter.exe">
		<META NAME ="MS-HKWD" CONTENT = "Emitter, Generate Eiffel classes, Generate XML files">
	</head>

	<body>

		<br><br>
		<h2>5. ISE.Reflection.Emitter.exe</h2>

				<p>
						When you use the emitter as an executable file, it generates both Eiffel classes and XML files. But you can also use it as a .NET assembly. In that case, two features should be useful:
				</p>
				<P CLASS = "code">
						<SPAN CLASS = "efeature">GenerateEiffelClasses</SPAN><SPAN CLASS = "esymbol">(</SPAN> <SPAN CLASS = "eclass">String</SPAN> <SPAN CLASS = "elocal">FileName</SPAN><SPAN CLASS = "esymbol">,</SPAN> <SPAN CLASS = "eclass">String</SPAN> <SPAN CLASS = "elocal">PathName</SPAN> <SPAN CLASS = "esymbol">)</SPAN><BR>

						<SPAN CLASS = "efeature">GenerateXmlFiles</SPAN><SPAN CLASS = "esymbol">(</SPAN> <SPAN CLASS = "eclass">String</SPAN> <SPAN CLASS = "elocal">FileName</SPAN><SPAN CLASS = "esymbol">,</SPAN> <SPAN CLASS = "eclass">String</SPAN> <SPAN CLASS = "elocal">PathName</SPAN> <SPAN CLASS = "esymbol">)</SPAN><BR>
				</P>
				<br>

				<a name = eiffel_classes></a>
				<h3>5.1 <SPAN CLASS = "efeature">GenerateEiffelClasses</SPAN></h3>

						<p>
								If you are familiar with the &quot;old emitter&quot;, <SPAN CLASS = "efeature">GenerateEiffelClasses</SPAN> basically does the same thing that is generating Eiffel classes from a .NET assembly.<br>
								Internally, it generates an instance of <SPAN CLASS = "eclass">EIFFEL_ASSEMBLY</SPAN> (<SPAN CLASS = "eclass">EiffelAssembly</SPAN>) and then one of <SPAN CLASS = "eclass">EIFFEL_CLASS</SPAN> (<SPAN CLASS = "eclass">EiffelClass</SPAN>) for each type of the assembly. Then it calls <SPAN CLASS = "efeature">generate_eiffel_class</SPAN> from <SPAN CLASS = "eclass">EIFFEL_CODE_GENERATOR</SPAN> (<SPAN CLASS = "eclass">EiffelCodeGenerator</SPAN>, from <a href = "./code_generator.html">`ISE.Reflection.CodeGenerator.dll'</a>), which actually generates the code.
						</p>
				<br>

				<a name = xml_files></a>
				<h3>5.2 <SPAN CLASS = "efeature">GenerateXmlFiles</SPAN></h3>

						<p>
								<SPAN CLASS = "efeature">GenerateXmlFiles</SPAN> aims at generating XML files from assembly types. Internally, it uses all components of ISE reflection system. This section tries to describe the main interactions.
						</p>
						<p>
								When you call <SPAN CLASS = "efeature">GenerateXmlFiles</SPAN>, the first step is be to call <SPAN CLASS = "efeature">start_assembly_storage_from_type</SPAN> from <a href = "./reflection_interface.html">`ISE.Reflection.ReflectionInterface.dll'</a> with a type defined in the assembly as parameter. This creates the folder where XML files are stored.<br>
								Then the emitter generates an instance of <SPAN CLASS = "eclass">EIFFEL_ASSEMBLY</SPAN> (<SPAN CLASS = "eclass">EiffelAssembly </SPAN>)from current .NET assembly, and calls <SPAN CLASS = "efeature">generate_xml_file</SPAN> from <SPAN CLASS = "eclass">XML_ASSEMBLY_CODE_GENERATOR</SPAN> (<SPAN CLASS = "eclass">XmlAssemblyCodeGenerator</SPAN>, from <a href = "./code_generator.html">`ISE.Reflection.CodeGenerator.dll'</a>). This generates an assembly description XML file in the folder previously created.<br>
								Then the emitter generates an instance of <SPAN CLASS = "eclass">EIFFEL_CLASS</SPAN> (<SPAN CLASS = "eclass">EiffelClass</SPAN>) for each type in the assembly and calls <SPAN CLASS = "efeature">generate_xml_file</SPAN> from <SPAN CLASS = "eclass">XML_TYPE_CODE_GENERATOR</SPAN> (<SPAN CLASS = "eclass">XmlTypeCodeGenerator</SPAN>, from <a href = "./code_generator.html">`ISE.Reflection.CodeGenerator.dll'</a>). This generates XML type description files in the assembly folder previously created.<br>
								At last, the emitter calls <SPAN CLASS = "efeature">end_assembly_storage</SPAN> from <a href = "./reflection_interface.html">`ISE.Reflection.ReflectionInterface.dll'</a> to notify the database that XML generation (for the selected assembly) is over. This adds the assembly folder name in the `index.xml' you can find in '$EIFFEL\dotnet\assemblies'.
						</p>
				<br>

		<br><br>
	</body>
</html>