<script src="../instal.js"></script>
<HTML>
	<HEAD>
		<TITLE>Calculator</TITLE>
		<LINK REL="stylesheet" HREF="../../../../default.css" TYPE="text/css">
	</HEAD>
	<BODY>
		<H1>The Calculator Sample</H1>
		<P>
			This sample consists of a command line reverse Polish notation (RPN) calculator.
		<P>
		<P CLASS="note">
			<B>Note:</B> A RPN calculator works slightly differently from standard calculators. It consists of a stack of numbers. Operations are applied to the two numbers on top of the stack. The result is then put on top of the stack so that it can be used in the next operation. This sample refers to the top of the stack as <I>Accumulator</I>.
		<H2>Compiling</H2>
		<script language="JavaScript">
<!--
var path_to_ace_file = Eiffel_version + "\\examples\\dotnet\\winforms\\menu\\";
var ace_file_name = "Ace";
var path_eifp_file = "..\\..\\examples\\threading\\monitor\\"
var eifp_name = "Eiffel project.eifp";

if (eiffel_studio) {
	write_eiffel_studio_compiling_instruction (path_to_ace_file, ace_file_name)
}
else {
	write_envision_compiling_instruction (path_eifp_file, eifp_name)
}
-->
		</script>
		<noscript>
			<p>To see compiling instructions, you have to enable javascript.</p>
		</noscript>
		<P>
		<H2>Running</H2>
		<P>
			After you launch the sample, the following text appears in a console:
		</P>
		<PRE>
*********************************
Calculator in reverse Polish form
*********************************
Allowable operations are:
		'/': Divide top two numbers on the stack.
		'0': Empty the stack.
		'a': Enter operand onto stack.
		'?': Help.
		'*': Multiply top two numbers on the stack.
		'+': Add top two numbers on the stack
		'q': Quit.
		'-': Subtract top two numbers on the stack.
Enter a number, followed by <return>:
		</PRE>
		<P>
			Enter the first number to be put onto the stack, for example <SPAN CLASS="esymbol">3</SPAN>.
		</P>
		<P CLASS="note">
			<B>Note:</B> Failing to enter a number at this stage will cause the sample to stop. This sample was designed to showcase the use of EiffelBase data structures and is not protected against unexpected entries.
		</P>
		<P>
			You may then add another number on the stack by entering the character <SPAN CLASS="esymbol">a</SPAN>:
		</P>
		<PRE>
*********************************
Calculator in reverse Polish form
*********************************
Allowable operations are:
        '/': Divide top two numbers on the stack.
        '0': Empty the stack.
        'a': Enter operand onto stack.
        '?': Help.
        '*': Multiply top two numbers on the stack.
        '+': Add top two numbers on the stack
        'q': Quit.
        '-': Subtract top two numbers on the stack.
Enter a number, followed by <return>: 3

Accumulator = 3

Next operation? a
Enter a number, followed by <return>:
		</PRE>
		<P>
			Enter a second number, for example <SPAN CLASS="esymbol">2</SPAN>. You can then apply any operation to the two operands such as minus:
		</P>
		<PRE>
...
Next operation? a
Enter a number, followed by <return>: 2

Accumulator = 2

Next operation? -

Accumulator = 1

Next operation?
		</PRE>
		<P>
			You may use the operation <SPAN CLASS="esymbol">0</SPAN> to clear the stack at any time. You may use <SPAN CLASS="esymbol">q</SPAN> to quit the program.
		</P>
		<P CLASS="tip">
			<B>Tip:</B> You can use the command <SPAN CLASS="esymbol">?</SPAN> to display the list of available operations.
		</P>
		<H2>Under the Hood</H2>
		<P>
			This sample shows how to leverage EiffelBase data structures in a simple Eiffel system. The root class <A CLASS="eclass">CALCULATOR</A> first instantiates all <I>state</I> objects, each corresponding to one possible operation. The state classes all inherit from <A CLASS="eclass">STATE</A>. They are:
		</P>
		<UL>
			<LI><A CLASS="eclass">PLUS</A>: Add stack's two top numbers.
			<LI><A CLASS="eclass">MINUS</A>: Substract stack's two top numbers.
			<LI><A CLASS="eclass">MULTIPLY</A>: Multiply stack's two top numbers.
			<LI><A CLASS="eclass">DIVIDE</A>: Divide stack's two top numbers.
			<LI><A CLASS="eclass">EMPTY</A>: Empty stack.
			<LI><A CLASS="eclass">HELP</A>: Prints available commands.
			<LI><A CLASS="eclass">QUESTION</A>: Get number from user.
			<LI><A CLASS="eclass">QUIT</A>: Close application.
		</UL>
		Each of these classes implement the feature <A CLASS="efeature">do_one_state</A> from <A CLASS="eclass">STATE</A> which performs the operation associated with the state.
		The initial state is <A CLASS="eclass">QUESTION</A> which asks for the initial number to put in the <I>accumulator</I>. Following states depend on the user input.<BR>
		Every descendant of <A CLASS="eclass">STATE</A> implement the feature <A CLASS="efeature">operation</A> which performs the corresponding stack transformation.
		</P>
	</BODY>
</HTML>
