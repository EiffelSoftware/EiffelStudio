<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="tour.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE> 12  HANDLING SYNTAX AND VALIDITY ERRORS</TITLE>
</HEAD>
<body bgcolor="#faf0e6">
<DIV>
<p class="top" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="../index.html">Getting started with Eiffel (local)</a>

<img src="power.gif" ALT="Eiffel Home Page" align="right" border="0"  usemap="#eiffel" width="109" height="226"><map name="eiffel"><area shape="RECT" alt="Eiffel Home Page" coords="0,0,109,226" HREF="http://www.eiffel.com"><area shape="default" nohref></map>

<p class="top" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="index-12.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="index.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="index-14.html"><area shape="default" nohref></MAP>
</DIV>
<H1 CLASS="aa-sec2">
<A NAME="pgfId-519836"></A>12  <A NAME="67731"></A>HANDLING SYNTAX AND VALIDITY ERRORS<A NAME="marker-519834"></A><A NAME="marker-519835"></A></H1>
<P CLASS="nn-first">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="tour-help.html">Help reading this manual</a>
<P CLASS="nn-first">
<A NAME="pgfId-519837"></A>So far we have tried to make sure that everything went smoothly. But in actual software development you may encounter error situations, and it is useful to know what can happen then.
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-519897"></A>Levels of language description</H2>
<P CLASS="nn-first">
<A NAME="pgfId-519898"></A>Let's remind ourselves first of how the language is specified. The book <SPAN CLASS="ww-crossref">
<A HREF="http://www.eiffel.com/doc/#etl" CLASS="URL">Eiffel: The Language</A></SPAN>
, the language reference, carefully distinguishes between three levels of description: <SPAN CLASS="ff-bold">
syntax</SPAN>
, <SPAN CLASS="ff-bold">
validity</SPAN>
 and <SPAN CLASS="ff-bold">
semantics</SPAN>
. Their roles are clearly distinct:
<UL>
<p class="nn-first"><img src="greenball.gif" alt="+" width="6" height="6">
<A NAME="pgfId-519918"></A><SPAN CLASS="ff-italics">
Syntax</SPAN>
 defines the structure of software texts. A typical syntax rule states that an assignment starts with a <SPAN CLASS="ee-syntax">
Writable</SPAN>
 entity, continues with the symbol <SPAN CLASS="ee-keyword">
:=</SPAN>
, and ends with an <SPAN CLASS="ee-syntax">
Expression</SPAN>
. This is a purely structural specification, saying nothing for example about the types of the <SPAN CLASS="ee-syntax">
Writable</SPAN>
 and the <SPAN CLASS="ee-syntax">
Expression</SPAN>
.
<p class="nn-first"><img src="greenball.gif" alt="+" width="6" height="6">
<A NAME="pgfId-519921"></A><SPAN CLASS="ff-italics">
Validity</SPAN>
, applicable only to syntactically legal texts, defines required consistency conditions. A typical validity rule states that in an assignment the right-hand-side <SPAN CLASS="ee-syntax">
Expression</SPAN>
 must <SPAN CLASS="ff-italics">
conform</SPAN>
 -- a property of its type, defined rigorously on the basis of inheritance -- to the left-hand-side <SPAN CLASS="ee-syntax">
Writable</SPAN>
. Eiffel has about 75 validity rules; part of the language's originality is that these rules are of the &quot;<SPAN CLASS="ff-italics">
if and only if</SPAN>
&quot; form, not only telling you individual error cases (&quot;this is valid <SPAN CLASS="ff-italics">
only if</SPAN>
<SPAN CLASS="tt-nsymbol">
&#8230;</SPAN>
&quot;) but also reassuring you that your text will in fact be valid <SPAN CLASS="ff-italics">
if</SPAN>
 it satisfies the conditions listed exhaustively.
<p class="nn-first"><img src="greenball.gif" alt="+" width="6" height="6">
<A NAME="pgfId-519933"></A>Semantics, applicable only to valid texts, defines the software's expected run-time behavior. A typical semantic rule states that an assignment replaces the value of its left-hand-side <SPAN CLASS="ee-syntax">
Writable</SPAN>
 by the value of the right-hand-side <SPAN CLASS="ee-syntax">
Expression</SPAN>
 at the time the assignment is executed, with precise rules on the different possible cases involving references, objects and simple values.
</UL>
<P CLASS="nn-first">
<A NAME="pgfId-519942"></A>You may make an error at any of these levels:
<UL>
<p class="nn-first"><img src="greenball.gif" alt="+" width="6" height="6">
<A NAME="pgfId-555860"></A>Writing <SPAN CLASS="ee-keyword">
= </SPAN>
instead of <SPAN CLASS="ee-keyword">
:=</SPAN>
 for the assignment symbol is a syntax error.
<p class="nn-first"><img src="greenball.gif" alt="+" width="6" height="6">
<A NAME="pgfId-555861"></A>Writing <SPAN CLASS="ee-text">
your_integer </SPAN>
<SPAN CLASS="ee-keyword">
:= </SPAN>
<SPAN CLASS="ee-text">
your_real</SPAN>
, with the types suggested by the names, is a validity error.
<p class="nn-first"><img src="greenball.gif" alt="+" width="6" height="6">
<A NAME="pgfId-555862"></A>Calling a feature on a void target, violating a precondition, causing a division by zero, are semantic errors.
</UL>
<P CLASS="nn-first">
<A NAME="pgfId-519947"></A>Syntax and validity errors will be detected by the compilation process. For semantic errors, you will rely on contract checking and on the debugging tools described later. Let's look now at examples of the first two cases.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-519892"></A>A syntax error</H2>
<P CLASS="nn-first">
<A NAME="pgfId-519840"></A>To see what happens for a syntax error, replace the keyword <SPAN CLASS="ee-keyword">
is</SPAN>
 by <SPAN CLASS="ee-keyword">
ist</SPAN>
 in the first line of routine <SPAN CLASS="ee-keyword">
display</SPAN>
 of class <SPAN CLASS="ee-keyword">
PARENT </SPAN>
(click the position immediately after the <SPAN CLASS="ee-keyword">
s</SPAN>
 and type a <SPAN CLASS="ee-keyword">
t</SPAN>
.). Save the file by clicking the Save button or using CTRL-<SPAN CLASS="ee-keyword">
S</SPAN>
. EiffelStudio parses the class as it is saving it, and finds the error:<BR>
The position of the error is highlighted in the class text.
<DIV>
<p>
<ul>
<A TARGET="screenshots" HREF="index-75.png"><IMG WIDTH="100" SRC="index-75.png"></A>
</ul>
<p>
</DIV>
<P CLASS="nn-normal">
<A NAME="pgfId-519842"></A>To correct the error, just bring the mouse back to its location, remove the spurious <SPAN CLASS="ee-keyword">
t</SPAN>
, and click Save again; also click Compile to make sure that the project is recompiled up-to-date.
<P CLASS="nn-normal">
<A NAME="pgfId-519843"></A>You may wonder why the syntax error messages are not a little more verbose than just <SPAN CLASS="ee-keyword">
Syntax error</SPAN>
. The reason is merely that Eiffel's syntax, being simple and regular, does not require sophisticated error messages; syntax errors usually result from trivial oversights. If you make a syntax error and the reason is not immediately clear, check the syntax summary in the appendix of <SPAN CLASS="ww-crossref">
<A HREF="http://www.eiffel.com/doc/#etl" CLASS="URL">Eiffel: The Language</A></SPAN>
.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-519974"></A>Avoiding &quot;Gotcha&quot; dialogs</H2>
<P CLASS="nn-first">
<A NAME="pgfId-519975"></A>This syntax error message also illustrates a user interface principle present throughout EiffelStudio. At ISE, we believe that you have better things to do than spending your days clicking on <SPAN CLASS="ee-keyword">
OK </SPAN>
buttons. Almost all messages that may appear to signal errors, display warnings, or request confirmation are of one of two kinds:
<UL>
<p class="nn-first"><img src="greenball.gif" alt="+" width="6" height="6">
<A NAME="pgfId-519986"></A>Whenever possible, they give you <SPAN CLASS="ff-bold">
two</SPAN>
 or more possibilities. A dialog with just one possibility is not much of a dialog. (We'll resist the temptation to be pompous here by recalling the original Greek meaning of &quot;<SPAN CLASS="ff-italics">
dia</SPAN>
&quot; in &quot;dialog&quot;.)
<p class="nn-first"><img src="greenball.gif" alt="+" width="6" height="6">
<A NAME="pgfId-519993"></A>If EiffelStudio cannot give two possibilities -- as in the case of an error message, for which it must let the user proceed after making sure the message has been seen -- EiffelStudio doesn't force you, like many of today's user interfaces, to acknowledge your sins by clicking an <SPAN CLASS="ee-keyword">
OK</SPAN>
 button. You simply correct the error and move on.
</UL>
<P CLASS="nn-first">
<A NAME="pgfId-520026"></A>In the case of our syntax error there <SPAN CLASS="ff-italics">
is </SPAN>
an <SPAN CLASS="ee-keyword">
OK </SPAN>
button and you may click it, but you don't have to. It is there mostly to avoid troubling people (almost everyone, that is) who are used to the &quot;Gotcha!&quot; dialogs of the dominant user interfaces. Once you get used to the EiffelStudio style, you won't bother clicking <SPAN CLASS="ee-keyword">
OK</SPAN>
 for a syntax error: you will correct the error, and when you click Save again the dialog will go away like a bad dream.
</DIV>
<DIV>
<H2 CLASS="aa-sec3">
<A NAME="pgfId-520029"></A><A NAME="10317"></A>A <A NAME="marker-520028"></A>validity error</H2>
<P CLASS="nn-first">
<A NAME="pgfId-519849"></A>A validity error is a violation of one of the <A NAME="marker-519850"></A>validity constraints given in <SPAN CLASS="ww-crossref">
<A HREF="http://www.eiffel.com/doc/#etl" CLASS="URL">Eiffel: The Language</A></SPAN>
. Every such constraint is identified by a four-letter code of the form <SPAN CLASS="ee-keyword">
V</SPAN>
<SPAN CLASS="ee-text">
XXX</SPAN>
 (the first letter is always <SPAN CLASS="ee-keyword">
V</SPAN>
).
<P CLASS="nn-normal">
<A NAME="pgfId-520050"></A>A validity error will produce a precise error message, which includes the validity code. Although short, the error message is usually sufficient to find out what the error is. If not, you can get the complete rule, straight from the book.
<P CLASS="nn-normal">
<A NAME="pgfId-520064"></A>To see this mechanism at work, let us introduce a validity error. There is in fact one ready for you in class <SPAN CLASS="ee-keyword">
TESTROOT</SPAN>
. Target a Development Window to this class; at the end of its text, just before the final <SPAN CLASS="ee-keyword">
end</SPAN>
, you will find the following comment line:
<p><ul><table width="79%">
<TR>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="ee-text">
<A NAME="pgfId-520067"></A><SPAN CLASS="ee-keyword">
-- inv: INVALID</SPAN>

</TD>
</TR>
</table></ul><p>
<P CLASS="nn-first">
<A NAME="pgfId-520068"></A>If uncommented, this is a declaration of a feature of type <SPAN CLASS="ee-keyword">
INVALID</SPAN>
. A class called <SPAN CLASS="ee-keyword">
INVALID</SPAN>
 indeed exists in file <SPAN CLASS="ee-keyword">
invalid.e </SPAN>
of the root cluster, but it contains a validity error. To see what it is, remove the initial double-dash <SPAN CLASS="ee-keyword">
-- </SPAN>
in the above line from class <SPAN CLASS="ee-keyword">
TESTROOT</SPAN>
 so that it is not a comment any more.
<DIV>
<p>
<ul>
<A TARGET="screenshots" HREF="index-76.png"><IMG WIDTH="100" SRC="index-76.png"></A>
</ul>
<p>
</DIV>
<P CLASS="nn-first">
<A NAME="pgfId-520078"></A>Click <SPAN CLASS="ee-keyword">
Save</SPAN>
, then <SPAN CLASS="ee-keyword">
Compile</SPAN>
. Compilation starts but after a few degrees it stops with an error message that appears in the bottom Context Tool (you may have to do some resizing to see it in its entirety):
<DIV>
<p>
<ul>
<A TARGET="screenshots" HREF="index-77.png"><IMG WIDTH="100" SRC="index-77.png"></A>
</ul>
<p>
</DIV>
<P CLASS="nn-first">
<A NAME="pgfId-519862"></A>As the error message indicates, you have (shame on you) violated the validity rule <SPAN CLASS="ee-keyword">
VUAR</SPAN>
, which requires the number and types of actual arguments in a routine call to match the number and types of formal arguments declared in the routine.
<P CLASS="nn-normal">
<A NAME="pgfId-520090"></A>One of the interesting properties of the error message is that everything in color is <SPAN CLASS="ff-bold">
clickable</SPAN>
: class name, feature name, but also the error code. This means that you can start a Pick-and-Drop on any of these elements to find out more.
<P CLASS="nn-normal">
<A NAME="pgfId-520091"></A>For example, to see the exact context of the error, pick-and-drop the name of the affected feature, <SPAN CLASS="ee-text">
display</SPAN>
 -- appearing on the fifth non-blank line, after <SPAN CLASS="ee-keyword">
Feature: </SPAN>
-- and pick-and-drop it to the top Text window. (As you remember this means: right-click on it and release; move the mouse to the text window, without clicking any button; right-click again. During the move the cursor shows a cross, the symbol for features.) This displays the erroneous feature:
<DIV>
<p>
<ul>
<A TARGET="screenshots" HREF="index-78.png"><IMG WIDTH="100" SRC="index-78.png"></A>
</ul>
<p>
</DIV>
<P CLASS="nn-first">
<A NAME="pgfId-520098"></A>Note on this display a special property of Pick-and-Drop when its source is a feature name appearing in a validity error message: the instruction that causes the error is highlighted.
<P CLASS="nn-normal">
<A NAME="pgfId-520120"></A>In the error message in the Context Tool, the error code itself, <SPAN CLASS="ee-keyword">
VUAR</SPAN>
<A NAME="marker-520119"></A>, is also clickable. Assuming the message was not sufficient to understand the error, you can use it to start a Pick-and-Drop. Do this now, by picking that code and starting to move the mouse, but not dropping yet:
<DIV>
<p>
<ul>
<A TARGET="screenshots" HREF="index-79.png"><IMG WIDTH="100" SRC="index-79.png"></A>
</ul>
<p>
</DIV>
<P CLASS="nn-first">
<A NAME="pgfId-520127"></A>The icon shape for such information elements is a question mark <SPAN CLASS="ee-keyword">
?</SPAN>
. If it is not on a droppable target, as in the bottom Context Tool, that icon will be crossed. In principle the place to drop is the Explanation hole in the Project toolbar, the only one that remains highlighted during the Move step of Pick-and-Drop:
<DIV>
<p>
<ul>
<A TARGET="screenshots" HREF="index-80.png"><IMG WIDTH="100" SRC="index-80.png"></A>
</ul>
<p>
</DIV>
<P CLASS="nn-first">
<A NAME="pgfId-520134"></A>As is often the case when dropping into a specific hole, you don't need to shoot straight; dropping the pebble anywhere in the Editing Tool has the same effect as dropping it into the Explanation hole:
<DIV>
<p>
<ul>
<A TARGET="screenshots" HREF="index-81.png"><IMG WIDTH="100" SRC="index-81.png"></A>
</ul>
<p>
</DIV>
<P CLASS="nn-first">
<A NAME="pgfId-520123"></A>The result is to display the complete text of the violated rule, straight from the pages of <SPAN CLASS="ww-crossref">
<A HREF="http://www.eiffel.com/doc/#etl" CLASS="URL">Eiffel: The Language</A></SPAN>
. 
<P CLASS="nn-normal">
<A NAME="pgfId-519867"></A>The rule has several clauses, numbered. Since the error message showed the error code as <SPAN CLASS="ee-keyword">
VUAR(1)</SPAN>
, the violated clause is the first; this convention of showing the clause number in parentheses applies to all multi-clause validity constraints.
<P CLASS="nn-normal">
<A NAME="pgfId-520161"></A>To correct the error the easiest is to go back to class <SPAN CLASS="ee-text">
TESTROOT</SPAN>
 and reinstate the comment symbol <SPAN CLASS="ee-comment">
- -</SPAN>
 (two consecutive dashes) on the erroneous line. Save and compile to continue with a valid system.    <A NAME="marker-519868"></A>      <A NAME="marker-519869"></A>    <A NAME="marker-519870"></A> 
</DIV>
<p class="bottom" ALIGN="left"><IMG SRC="normaldoc.gif" ALT="Previous, Up, Next" BORDER="0" WIDTH="300" HEIGHT="40" USEMAP="#navigation"><map name="navigation"><AREA SHAPE="RECT" alt="Previous section" COORDS="0,0,95,40" HREF="index-12.html"><AREA SHAPE="RECT" alt="Up" COORDS="96,0,199,40" HREF="index.html"><AREA SHAPE="RECT" alt="Next section" COORDS="200,0,300,40" HREF="index-14.html"><area shape="default" nohref></MAP>

<p class="bottom" align="center"><a href="http://www.eiffel.com">Eiffel Home Page (Web)</a> -- <a href="../index.html">Getting started with Eiffel (local)</a>

<p class="copyright" align="center">Copyright Interactive Software Engineering, 2001
</BODY>
</HTML>
