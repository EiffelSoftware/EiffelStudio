<document title="Major changes between ISE Eiffel 5.7 and ISE Eiffel 6.0">
	<meta_data>
		<help>
			<toc>
				<envision_location>EiffelEnvision\Introduction to EiffelEnvision\History and Known Issues\Compiler History</envision_location>
			</toc>
		</help>
	</meta_data>
	<paragraph>
		<heading><size>2</size>What's new</heading>
		<seealso>See also: <link><label>Differences between standard ECMA-367 and Eiffel Software implementation</label><url>../../10_ise_eiffel_specific/ecma.xml</url></link></seealso>
		<list ordered="false">
			<item>Added support for multiple constraints in formal generic parameters.</item>
			<item>The root class can now be a generic class, and thus one can now specify a root type.</item>
			<item>The notion of creation readiness according to ECMA Eiffel standard (2nd edition, chapter 8.12.12) is implemented.</item>
			<item>Added experimental option for full class checking. It can be enabled at the system, cluster or class level. However not all our code has been compiled with this option so don't be surprised if you get errors in our libraries. The next release should fix all the remaining issues.</item>
			<item>Integers can now also be specified with binary and octal representation.</item>
			<item>Manifest characters can now also be specified with binary, octal and hexadecimal representation. Manifest characters can be specified up to 32 Bit.</item>
			<item>Supported reattachment of generic derivations with expanded parameters to generic derivations with reference parameters.</item>
		</list>
		<heading><size>2</size>Improvements</heading>
		<list ordered="false">
			<item>The command line compiler doesn't need a configuration file to compile a system, one can simply provide a root class and the compiler will automatically use the current directory and EiffelBase. You can also add more libraries if needed.</item>
			<item>Improved backup mechanism so that overridden classes are copied in the library where they are defined (they were previously copied in the library where the override cluster was defined).</item>
			<item>Possibility for hidden/implementation clusters in libraries, i.e. clusters that are not accessible if the library is used (like libraries in libraries are not accessible).</item>
			<item>Class names which don't match the source filename emit a warning.</item>
			<item>The unique keyword will yield a syntax warning if enabled.</item>
			<item>Static access on external routines is allowed even if not marked frozen (this simply applies a relaxed rule that was adopted by ECMA).</item>
			<item>When an environment variable is being used to compile a system and if this environment variable value changes next time you use a project, you will get a prompt asking whether or not you want to update the value or keep the initial one.</item>
			<item>Externals (includes, objects, resources, ...) can now be relative to the ecf file by using the new replacement $ECF_CONFIG_PATH.</item>
			<item>UUID is not needed for non library systems. If no UUID is specified a random one will be generated.</item>
		</list>
		<heading><size>2</size>Changes</heading>
		<list ordered="false">
			<item>Added supplier_precondition assertion level that enables to only check preconditions of trusted libraries. By default when importing an old project they are not enabled, thus assertions on the library you are using are most likely going to be disabled.</item>
			<item>Added the platform value as part of the version info of the compiler. This will prevent trying to load a project compiled for a different platform instead of failing with a retrieval error.</item>
			<item>The compiler can be compiled against the original EiffelBase version or with the FreeELKS version which is now the default one for EiffelBase.</item>
		</list>
		<heading><size>2</size>Bug fixes</heading>
		<list ordered="false">
			<item>Fixed eweasel test#tuple006 showing a failure when calling <feature_name>deep_copy</feature_name> on a <class_name>TUPLE</class_name> instance.</item>
			<item>Fixed bug#12782 where compiler would crash at degree 1 when removing a formal generic parameter of class (eweasel test#incr249 and test#incr284).</item>
			<item>Fixed bug#12823 where specifying in the command line a target in a different case than the lower case version of the actual target name would fail to find the target in your configuration file.</item>
			<item>Fixed bug#12698 where compiler was not processing the target extension properly if not specified in lower case.</item>
			<item>Fixed bug#12591: compiler would not find classes from library referenced deeply using relative path. This also removes the extra `.' or `..' in the displayed path for a class.</item>
			<item>Fixed issue with incorrect labeled tuples which were not detected in signature of features (see eweasel test#tuple008).</item>
			<item>Fixed crash when checking an incorrect labeled tuple (e.g. <class_name>TUPLE</class_name> [a, a: <class_name>INTEGER</class_name>]) (see eweasel test#tuple009).</item>
			<item>Fixed issue with inline agents where if you have one and during a compilation from scratch you have a compiler error, then fixing this error and recompiling, it would crash when melting or freezing (test#incr277).</item>
			<item>Fixed issue with C compilation linking error when a generic class which have an invariant clause has its formal generics changed (test#incr278).</item>
			<item>Fixed C compilation error on Windows for trying to compile empties Cxxx directories (test#ccomp061).</item>
			<item>Fixed incorrect code generation of agents on attribute when target is open (test#exec264).</item>
			<item>Fixed incremental bug when an agent creation based on a feature whose signature changes for less arguments (test#incr276).</item>
			<item>Fixed a backup creation bug when two classes from the same cluster/library have the same original file name, the backup would only contain one or the other because we use the original file name. Now we use the original class name.</item>
			<item>Fixed various issues with the processing of the Eiffel Configuration File.</item>
		</list>
		<heading><size>3</size>Compiler issues</heading>
		<list ordered="false">
			<item>Adapted the compiler so that ISE_EIFFEL does not need to be defined with a short path name on Windows, since some file systems can disable support for short path.</item>
			<item>Fixed incrementality bug with agents where finalizing and then freezing would cause some unresolved externals.</item>
		</list>
		<heading><size>3</size>Runtime/code generation issues</heading>
		<list ordered="false">
			<item>Fixed a memory corruption which would occur once an invariant has been violated.</item>
			<item>Fixed a memory corruption which could occur when performing a deep_twin on an object whose graph contains a TUPLE object. See test#tuple006.</item>
		</list>
		<heading><size>3</size>.NET issues</heading>
		<list ordered="false">
			<item>Speed up consumer cache synchronization so working with large .NET caches or large assembly sets is much faster.</item>
			<item>Fixed bug#12565 where a wrong EIFFEL_NAME_ATTRIBUTE custom attribute would be generated on .NET for Eiffel generic class where the actual generic parameter is a .NET value type..</item>
			<item>Fixed bug in .NET resx to resource generation when using resx files with relative paths.</item>
			<item>.NET Enums can be automatically converted to INTEGERs.</item>
			<item>Indexing tags <italic>interface_metadata</italic> and <italic>class_metadata</italic> are supported on feature level like this is done on class level and allow to specify custom attributes for associated methods only in interface type or only in implementation type.</item>
			<item>All versioned COM import interfaces now have versioned interface member names based on the trailing version number of the interface name, as this meta information is not available in any other way. This greatly improves the versioned names and makes implementing interfaces much easier.</item>
			<item>Fixed various issues in the .NET consumer that would prevent the usage of certain .NET assemblies.</item>
			<item>Added configurable (project to class-level) optimization for .NET project that will mark all classes frozen if they are not descended by another.</item>
		</list>
		<heading><size>3</size>Store/Retrieve issues</heading>
		<list ordered="false">
			<item>Now the retrieval of objects is done with the GC (garbage collector) disabled.</item>
			<item>Fixed issue when retrieving 64-bit storables on 32-bit machines. It requires a regeneration of the 64-bit storables if one wants to retrieve them on 32-bit machines. Fixed bug#11744.</item>
		</list>
	</paragraph>
</document>
