test_name	scoop-access-smoke
test_description Smoke test for access to features of separate objects.

-- Precompile library

copy_sub 	precomp.ecf $TEST precomp.ecf
copy_raw 	a.e $CLUSTER/precomp a.e

ace precomp.ecf
system precomp

compile_precompiled
compile_result 	ok
c_compile_work
c_compile_result ok

-- Compile system

copy_raw	test.e $CLUSTER test.e
ace Ace
system test

-- Use precompile

define PRECOMP	"<precompile name="precompile" location="$TEST/precomp.ecf"/>"
define RECURSIVE "false"
copy_sub	Ace $TEST Ace

compile_frozen
compile_result 	ok
c_compile_work
c_compile_result ok
execute_work	NONE exec_output
execute_result	ok
compare		exec_output output

cleanup_compile

-- Compile without precompile

define PRECOMP	""
define RECURSIVE "true"
copy_sub	Ace $TEST Ace

compile_frozen
compile_result 	ok
c_compile_work
c_compile_result ok
execute_work	NONE exec_output
execute_result	ok
compare		exec_output output

test_end
