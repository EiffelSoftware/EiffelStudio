@echo off
echo -----------------------------------------------------------------
echo ----------------- Preparing Temporary directory -----------------
echo -----------------------------------------------------------------
pushd
mkdir %DELIVERY%\studio\wizards\new_projects\wizard\spec
mkdir %DELIVERY%\studio\wizards\new_projects\wizard\spec\windows
echo Y > y.txt
rd /S %TEMP%\wizard_wizard < y.txt
del y.txt
mkdir %TEMP%\wizard_wizard
echo -----------------------------------------------------------------
echo ----------------- Retrieving last sources -----------------------
echo -----------------------------------------------------------------
cdd %EIFFEL_SRC%\help\wizards
call cvs up -Pd
echo -----------------------------------------------------------------
echo ----------------- Compilation -----------------------------------
echo -----------------------------------------------------------------
%ISE_EIFFEL%\studio\spec\windows\bin\ec -finalize -ace %EIFFEL_SRC%\help\wizards\wizard_wizard.ace -project_path %TEMP%\wizard_wizard
cdd %TEMP%\wizard_wizard
copy %EIFFEL_SRC%\help\wizards\wizard.ico .
copy %EIFFEL_SRC%\help\wizards\wizard.rc .
cdd %TEMP%\wizard_wizard\EIFGEN\F_Code
%ISE_EIFFEL%\studio\spec\windows\bin\finish_freezing -silent
echo -----------------------------------------------------------------
echo ------- Compress generated executable file ----------------------
echo -----------------------------------------------------------------
upx wizard.exe
echo -----------------------------------------------------------------
echo ------- Copying generated executable file into Delivery ---------
echo -----------------------------------------------------------------
copy wizard.exe %DELIVERY%\studio\wizards\new_projects\wizard\spec\windows
popd
echo -----------------------------------------------------------------
echo ------- Deleting temporary files --------------------------------
echo -----------------------------------------------------------------
echo Y > y.txt
rd /S %TEMP%\wizard_wizard < y.txt
del y.txt
