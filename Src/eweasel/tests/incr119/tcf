
--| Copyright (c) 1993-2006 University of Southern California and contributors.
--| All rights reserved.
--| Your use of this work is governed under the terms of the GNU General
--| Public License version 2.

-- This is a test control file

test_name 	 reduce-bit-attribute-size
test_description A class has an attribute of type `BIT Weasel_bits', where `Weasel_bits' is a very large constant integer.  After initial compilation where the system is melted, the integer value is changed to a very small number.  But system execution still ends with an "unknown attribute type" panic.

copy_sub 	 Ace $TEST Ace
define		 VALUE "20_000_000"
copy_sub 	 test.e  $CLUSTER test.e
compile_melted
compile_result 	 validity_error TEST VTBT

copy_sub 	 Ace $TEST Ace
define		 VALUE "32_767"
copy_sub 	 test.e  $CLUSTER test.e
resume_compile
compile_result 	 ok

define		 VALUE "2"
copy_sub 	 test.e  $CLUSTER test.e
compile_melted
compile_result 	 ok

execute_work	 NONE exec_output1
execute_result	 ok
compare		 exec_output1 output

test_end
