indexing
	description: "Objects that represent an EV_TITLED_WINDOW generated by Build."
	author: ""
	date: "$Date$"
	revision: "$Revision$"

deferred class
	MAIN_WINDOW_IMP

inherit
	EV_TITLED_WINDOW
		redefine
			initialize, is_in_default_state
		end

feature {NONE} -- Initialization

	initialize is
			-- Initialize `Current'.
		do
			Precursor {EV_TITLED_WINDOW}
			
				-- Create all widgets.
			create l_menu_bar_1
			create file_menu
			create print_item
			create l_menu_separator_1
			create exit_item
			create edit_menu
			create find_net_feature_item
			create find_eiffel_feature_item
			create l_menu_separator_2
			create import_item
			create remove_assembly_item
			create l_menu_separator_3
			create edit_type_item
			create l_menu_separator_4
			create help_menu
			create about_item
			create l_horizontal_split_area_1
			create widget_tree
			create notebook
			create assemblies
			create edit_comments_area
			create search
			create informations
			create edit_area_box
			create color_edit_area
			create l_vertical_scroll_bar_1
			create l_horizontal_box_1
			create l_horizontal_scroll_bar_1
			create right_tree
			create l_vertical_split_area
			
				-- Build_widget_structure.
			set_menu_bar (l_menu_bar_1)
			l_menu_bar_1.extend (file_menu)
			file_menu.extend (print_item)
			file_menu.extend (l_menu_separator_1)
			file_menu.extend (exit_item)
			l_menu_bar_1.extend (edit_menu)
			edit_menu.extend (find_net_feature_item)
			edit_menu.extend (find_eiffel_feature_item)
			edit_menu.extend (l_menu_separator_2)
			edit_menu.extend (import_item)
			edit_menu.extend (remove_assembly_item)
			edit_menu.extend (l_menu_separator_3)
			edit_menu.extend (edit_type_item)
			edit_menu.extend (l_menu_separator_4)
			l_menu_bar_1.extend (help_menu)
			help_menu.extend (about_item)
			l_horizontal_split_area_1.extend (widget_tree)
			l_horizontal_split_area_1.extend (notebook)
		
			extend (l_vertical_split_area)
			l_vertical_split_area.extend (l_horizontal_split_area_1)
			l_vertical_split_area.extend (edit_comments_area)

			notebook.extend (assemblies)
			notebook.extend (right_tree)
			notebook.extend (search)
			notebook.extend (informations)
			informations.extend (edit_area_box)
			edit_area_box.extend (color_edit_area)
			edit_area_box.extend (l_vertical_scroll_bar_1)
			edit_area_box.disable_item_expand (l_vertical_scroll_bar_1)
			informations.extend (l_horizontal_box_1)
			informations.disable_item_expand (l_horizontal_box_1)
			l_horizontal_box_1.extend (l_horizontal_scroll_bar_1)
			
				-- Initialize properties of all widgets.
			edit_comments_area.disable_edit
			set_title ("Eiffel Assembly Cache Browser.")
			file_menu.set_text ("File")
			print_item.set_text ("Print...")
			exit_item.set_text ("Exit")
			edit_menu.set_text ("Edit")
			find_net_feature_item.set_text ("Find .NET feature...")
			find_eiffel_feature_item.set_text ("Find Eiffel feature...")
			import_item.set_text ("Import assembly...")
			remove_assembly_item.set_text ("Remove imported assembly...")
			edit_type_item.set_text ("Edit type...")
			help_menu.set_text ("Help")
			about_item.set_text ("About...")
			notebook.set_item_text (assemblies, "Assemblies")
			notebook.set_item_text (search, "Search results")
			notebook.set_item_text (informations, "Informations")
			notebook.set_item_text (right_tree, "Objects")
			
				--Connect events.
			resize_actions.extend (agent on_resize (?, ?, ?, ?))
			print_item.select_actions.extend (agent on_print)
			exit_item.select_actions.extend (agent on_exit)
			find_net_feature_item.select_actions.extend (agent on_find_net_feature)
			find_eiffel_feature_item.select_actions.extend (agent on_find_eiffel_feature)
			import_item.select_actions.extend (agent on_import_assembly)
			remove_assembly_item.select_actions.extend (agent on_remove_assembly)
			edit_type_item.select_actions.extend (agent on_edit_type)
			about_item.select_actions.extend (agent on_about)
			edit_area_box.resize_actions.force_extend (agent on_resize_split_area)

				-- Close the application when an interface close
				-- request is recieved on `Current'. i.e. the cross is clicked.
			close_request_actions.extend (agent ((create {EV_ENVIRONMENT}).application).destroy)
			
			user_initialization
		end


feature {NONE} -- Implementation

	is_in_default_state: BOOLEAN is
			-- Is `Current' in its default state?
		do
			-- Re-implement if you wish to enable checking
			-- for `Current'.
			Result := True
		end
	
	l_menu_bar_1: EV_MENU_BAR
	file_menu, edit_menu, help_menu: EV_MENU
	print_item, exit_item, find_net_feature_item, find_eiffel_feature_item, import_item, 
	remove_assembly_item, edit_type_item, about_item: EV_MENU_ITEM
	l_menu_separator_1, l_menu_separator_2, l_menu_separator_3, l_menu_separator_4: EV_MENU_SEPARATOR
	l_horizontal_split_area_1: EV_HORIZONTAL_SPLIT_AREA
	l_vertical_split_area: EV_VERTICAL_SPLIT_AREA

feature --{EDIT_FACTORY, TREE_FACTORY} -- Implementation

	widget_tree: EV_TREE
	notebook: EV_NOTEBOOK
	assemblies, search: EV_MULTI_COLUMN_LIST
	edit_comments_area: EV_TEXT
	informations: EV_VERTICAL_BOX
	edit_area_box, l_horizontal_box_1: EV_HORIZONTAL_BOX
	color_edit_area: EV_PIXMAP
	right_tree: EV_TREE
	l_vertical_scroll_bar_1: EV_VERTICAL_SCROLL_BAR
	l_horizontal_scroll_bar_1: EV_HORIZONTAL_SCROLL_BAR
	
	user_initialization is
			-- Called by `select_actions' of `execute'.
		deferred
		end

	on_resize (a_x, a_y, a_width, a_height: INTEGER) is
			-- Called by `resize_actions' of `Current'.
		deferred
		end
	
	on_print is
			-- Called by `resize_actions' of `Current'.
		deferred
		end
	
	on_exit is
			-- Called by `select_actions' of `exit_item'.
		deferred
		end
	
	on_find_net_feature is
			-- Called by `select_actions' of `find_net_feature_item'.
		deferred
		end
	
	on_find_eiffel_feature is
			-- Called by `select_actions' of `find_eiffel_feature_item'.
		deferred
		end
	
	on_import_assembly is
			-- Called by `select_actions' of `import_item'.
		deferred
		end
	
	on_remove_assembly is
			-- Called by `select_actions' of `remove_assembly_item'.
		deferred
		end
	
	on_edit_type is
			-- Called by `select_actions' of `edit_type_item'.
		deferred
		end
	
	on_about is
			-- Called by `select_actions' of `about_item'.
		deferred
		end
	
	on_resize_split_area is
			-- Called by `resize_actions' of `l_horizontal_split_area_1'.
		deferred
		end

end -- class MAIN_WINDOW_IMP
