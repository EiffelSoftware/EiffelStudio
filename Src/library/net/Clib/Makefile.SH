case $CONFIG in
'')
	if test ! -f config.sh; then
		(echo "Can't find config.sh."; exit 1)
	fi 2>/dev/null
	. ./config.sh
	;;
esac
case "$0" in
*/*) cd `expr X$0 : 'X\(.*\)/'` ;;
esac
echo "Extracting "."/Makefile (with variable substitutions)"
$spitshell >Makefile <<!GROK!THIS!
########################################################################
# Makefile generated from Makefile.SH on $DATE

SHELL = /bin/sh
AR = ar rc
CC = $cc
CTAGS = ctags
CFLAGS = $optimize $ccflags $large -I$(EIFFEL3)/bench/spec/$(PLATFORM)/include
LN = $ln
MAKE = make
MKDEP = $mkdep \$(DPFLAGS) --
RANLIB = $ranlib
RM = $rm -f

########################################################################
# Automatically generated parameters -- do not edit

SOURCES =  \$(LSRCS)
OBJECTS =  \$(OBJS) \$(WOBJS)

########################################################################
# New suffixes and associated building rules -- edit with care

all:: libnet.a libwnet.a

.c.o:
	\$(CC) -c \$(CFLAGS) \$<

!GROK!THIS!
$spitshell >>Makefile <<'!NO!SUBS!'

SMODE = socket.c socket_r.c

LSRCS = $(SMODE)

OBJS = \
	socket.o \
	socket_r.o

WOBJS = \
	wsocket.o \
	wsocket_r.o

wsocket.c: socket.c
	$(RM) wsocket.c
	$(LN) socket.c wsocket.c
remove::
	$(RM) wsocket.c


wsocket.o: wsocket.c bitmask.h
	$(CC) -c $(CFLAGS) -DWORKBENCH $*.c
	$(RM) $*.c


wsocket_r.c: socket_r.c
	$(RM) wsocket_r.c
	$(LN) socket_r.c wsocket_r.c
remove::
	$(RM) wsocket_r.c

wsocket_r.o: wsocket_r.c
	$(CC) -c $(CFLAGS) -DWORKBENCH $*.c
	$(RM) $*.c


local_clean:: remove

all:: libnet.a

local_realclean::
	$(RM) libnet.a

libnet.a: $(OBJS)
	$(RM) $@
	$(AR) $@ $(OBJS)
	$(RANLIB) $@

all:: libwnet.a

local_realclean::
	$(RM) libwnet.a

libwnet.a: $(WOBJS)
	$(RM) $@
	$(AR) $@ $(WOBJS)
	$(RANLIB) $@

########################################################################
# Common rules for all Makefiles -- do not edit

emptyrule::

clean: local_clean
realclean: local_realclean
clobber: local_clobber

local_clean::
	$(RM) core *~ *.o

local_realclean:: local_clean

local_clobber:: local_realclean
	$(RM) Makefile config.sh

Makefile.SH: Jmakefile
	-@if test -f $(TOP)/.package; then \
		if test -f Makefile.SH; then \
			echo "	$(RM) Makefile.SH~; $(MV) Makefile.SH Makefile.SH~"; \
			$(RM) Makefile.SH~; $(MV) Makefile.SH Makefile.SH~; \
		fi; \
		echo "	$(JMAKE) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT)" ; \
		$(JMAKE) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT) ; \
	else touch $@; exit 0; fi

Makefile: Makefile.SH
	/bin/sh Makefile.SH

tags::
	$(CTAGS) -w *.[ch]
	$(CTAGS) -xw *.[ch] > tags

local_clobber::
	$(RM) tags

########################################################################
# Dependencies generated by make depend
# DO NOT DELETE THIS LINE -- make depend relies on it

# Put nothing here or make depend will gobble it up
.FORCE_DEPEND::
	@echo "You must run 'make depend' in $(TOP) first."; exit 1
!NO!SUBS!
chmod 644 Makefile
$eunicefix Makefile

