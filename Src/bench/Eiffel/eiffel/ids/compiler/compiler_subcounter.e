-- Counter associated with a compilation unit (i.e. precompilation,
-- normal compilation or dle compilation).

deferred class COMPILER_SUBCOUNTER

inherit

	COMPILER_EXPORTER

feature {NONE} -- Initialization

	make is
			-- Create a new counter.
		do
		end

feature -- Access

	next_id: COMPILER_ID is
			-- Next id
		deferred
		ensure
			id_not_void: Result /= Void
		end;

	count: INTEGER;
			-- Number of ids generated by the counter

	offset: INTEGER;
			-- Offset to ensure uniqueness of ids
			-- (Used for renumbering)

feature -- Setting

	set_offset (o: like offset) is
			-- Set `offset' to `o'.
		do
			offset := o
		ensure
			assigned: offset = o
		end;

	reset is
			-- Reset the counter.
		do
			count := 0
		end

	set_value (value: INTEGER) is
			-- Reset the counter so that next generated id
			-- will be `value' + 1.
		do
			count := (value - offset).max (0)
		end

end -- class COMPILER_SUBCOUNTER
