@echo off
echo -----------------------------------------------------------------
echo ----------------- Preparing Temporary directory -----------------
echo -----------------------------------------------------------------
pushd
mkdir %DELIVERY%\bench\wizards\wel\spec
mkdir %DELIVERY%\bench\wizards\wel\spec\windows
mkdir %DELIVERY%\bench\wizards\wel\spec\windows\bin
echo Y > y.txt
rd /S %TEMP%\wel_wizard < y.txt
del y.txt
mkdir %TEMP%\wel_wizard
echo -----------------------------------------------------------------
echo ----------------- Retrieving last sources -----------------------
echo -----------------------------------------------------------------
cdd %EIFFEL_SRC%\help\wizards
cvs -z3 up -Pd
echo -----------------------------------------------------------------
echo ----------------- Compilation -----------------------------------
echo -----------------------------------------------------------------
%ISE_EIFFEL%\bench\spec\windows\bin\ec -finalize -ace %EIFFEL_SRC%\help\wizards\wel_wizard.ace -project_path %TEMP%\wel_wizard
cdd %TEMP%\wel_wizard
copy %EIFFEL_SRC%\help\wizards\wizard.ico .
copy %EIFFEL_SRC%\help\wizards\wizard.rc .
cdd %TEMP%\wel_wizard\EIFGEN\F_Code
%ISE_EIFFEL%\bench\spec\windows\bin\finish_freezing -silent
echo -----------------------------------------------------------------
echo ------- Compress generated executable file ----------------------
echo -----------------------------------------------------------------
upx wizard.exe
echo -----------------------------------------------------------------
echo ------- Copying generated executable file into Delivery ---------
echo -----------------------------------------------------------------
copy wizard.exe %DELIVERY%\bench\wizards\new_projects\wel\spec\windows
cd %TEMP%
popd
echo -----------------------------------------------------------------
echo ------- Deleting temporary files --------------------------------
echo -----------------------------------------------------------------
echo Y > y.txt
rd /S %TEMP%\wel_wizard < y.txt
del y.txt
