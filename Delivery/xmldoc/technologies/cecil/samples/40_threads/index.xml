<document title="CECIL - Threads" output="studio">
	<meta_data/>
	<paragraph>
		<heading>
			<size>2</size>bank_account
		</heading>
		<paragraph>After you have done the appropriate steps to compile the example, you will get a `bank_account.exe' on windows, or `bank_account' on Unix. </paragraph>
		<paragraph>This program launches two types of threads:</paragraph>
		<list ordered="false">
			<item>the spenders withdraw some money from a shared bank acccount</item>
			<item>the savers make some deposits on it. </item>
		</list>
		<paragraph>The Eiffel Threads are launched from C. The synchronization is done from Eiffel. The shared bank account is a C structure, and is updated by the Eiffel Threads using some C externals. </paragraph>
		<paragraph>
			<line_break/>In main. c:
			<line_break/>LISTSZ size of bank account history. 
			<line_break/>DEPOSITORS numbers of savers. 
			<line_break/>WITHDRAWERS numbers of spenders. 
		</paragraph>
		<line_break/>
		<paragraph/>
		<paragraph>A typical output will be:</paragraph>
		<code_block>$ bank_account**** Bank account report:Thread 0x30036350       DEPOSIT 161Thread 0x30036350       DEPOSIT 614Thread 0x30036350       DEPOSIT 626Thread 0x30036350       DEPOSIT 880Thread 0x30036350       DEPOSIT 601Thread 0x30036350       DEPOSIT 480Thread 0x30036350       DEPOSIT 177Thread 0x30036350       DEPOSIT 451Thread 0x30036350       DEPOSIT 96Thread 0x30036350       DEPOSIT 219*** BALANCE: 5305Do you want to continue? (y/n)y**** Bank account report:Thread 0x3003fcf0       DEPOSIT 161Thread 0x3004f088       DEPOSIT 161Thread 0x300567a0       WITHDRAWAL      161Thread 0x3005e1f0       WITHDRAWAL      161Thread 0x30036350       DEPOSIT 531Thread 0x3003fcf0       DEPOSIT 614Thread 0x3004f088       DEPOSIT 614Thread 0x300567a0       WITHDRAWAL      614Thread 0x30036350       DEPOSIT 409Thread 0x3003fcf0       DEPOSIT 626*** BALANCE: 7485Do you want to continue? (y/n)y**** Bank account report:Thread 0x3004f088       DEPOSIT 626Thread 0x30036350       DEPOSIT 799Thread 0x300567a0       WITHDRAWAL      626Thread 0x3005e1f0       WITHDRAWAL      614Thread 0x3003fcf0       DEPOSIT 880Thread 0x30036350       DEPOSIT 860Thread 0x3004f088       DEPOSIT 880Thread 0x300567a0       WITHDRAWAL      880Thread 0x30036350       DEPOSIT 307Thread 0x3004f088       DEPOSIT 601*** BALANCE: 10318</code_block>
	</paragraph></document>