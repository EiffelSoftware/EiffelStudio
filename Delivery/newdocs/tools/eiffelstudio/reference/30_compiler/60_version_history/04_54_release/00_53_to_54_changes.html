<!DOCTYPE HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<HTML>
<HEAD>
<TITLE>Major changes between ISE Eiffel 5.2 and ISE Eiffel 5.3:</TITLE>
<LINK REL=StyleSheet HREF="../../../../../../default.css">
</HEAD>



<BODY>



<H1>Changes between ISE Eiffel 5.3 and ISE Eiffel 5.4:</H1>



<p>&nbsp;</p>



        <H2>What's new</H2>
        
        <ul>
          <li>Limited support for new <span class="ekeyword">convert</span> keyword 
          (only on argument passing and assignments. Not supported when used 
          with infix routines).</li>
          <li>Support for assertion checking on external routines.</li>
          <li>Removed limitation about implementing or redefining a non-external 
          routine by an external one and vice versa.</li>
          <li>Support for new C/C++ inline specification.</li>
          <li>For .NET, allow calling of overloaded features for a .NET classes 
          to be called without using disambiguated names. Disambiguated names 
          are still needed when redefining inherited features from .NET classes.</li>
          <li>Support for inclusion of .NET resources within Eiffel assemblies.</li>
          <li>Launch C compilation when needed if <span class="equoted">-c_compile</span> option is 
          specified on the <span class="equoted">ec</span> command line.</li>
          <li>Added ability to define custom attributes on assembly. One as to 
          define custom attributes under the new `assembly_metadata' index 
          clause of the root class.</li>
</ul>
        
        <H2>Improvements</H2>
        
        
        <ul>
          <li>Improved speed of compilation by about 20-30%</li>
          <li>Improved run-time memory allocation speed and footprint so that it 
          has a 15%-20% faster allocation scheme and takes less memory than 
          before.</li>
          <li>Reduced waiting time at the end of the degree 6 when performing a 
          compilation from scratch (reduced to about 50% or more of the time it 
          used to take)</li>
          <li>Improved speed of <span class="eclass">TUPLE</span> creation and <span class="eclass">TUPLE</span> access 
          which generates more compact C code.</li>
          <li>Improved speed of agent calls by a factor of 2 to 3.</li>
          <li>Improved speed of Eiffel calls from C (CECIL and use of $ operator 
          on routines). It also makes generated 
          executables smaller (about 1-5% smaller depending on number of 
          routines used in this context)</li>
</ul>
        
        
        <h2>Changes</h2>
        
        
        <ul>
          <li>Changed the way we generate calls to C/C++ external routines. It 
          is possible that because of this change, code that used to C compile, 
          will not compile anymore. This happens mostly when mixing C and C++ 
          code and the C call being made is incorrect but was not previously 
          checked against the C header files if provided.</li>
          <li>In multithreaded mode, all C externals that could potentially 
          block the execution of the system should be marked `blocking' as in:<br>
          <pre><span class="efeature">sleep</span> (m: <span class="eclass">INTEGER</span>) <span class="ekeyword">is</span>
          <span class="ekeyword">external</span>
		&quot;C blocking&quot;
          <span class="ekeyword">end</span></pre>Not doing it could generate dead-lock during the execution of a multithreaded system.</li>
          <li>Static access on externals is now only authorized when external is 
          a frozen external without assertions.</li>
          <li>Compiler will now report a warning for assignments like those:<br>
          <pre>td: <span class="eclass">TUPLE</span> [<span class="eclass">DOUBLE</span>]
ti: <span class="eclass">TUPLE</span> [<span class="eclass">INTEGER</span>]

td := ti</pre>
          The warning will help you correct code using this pattern, because in 
          the next release this will be rejected in order to conform to the 
          Eiffel language specification.
          </li>
          <li>Now we do not generate by default the .NET attribute <span class="eclass">ComVisibleAttribute</span> with a 
          False value. If needed it has to be done through the new compiler 
          functionality to add custom attributes on assembly.</li>
          <li>Changed indexing clause tag for specifying custom attributes for 
          .NET systems. Now `attribute' is replaced by `metadata'. Now you can 
          have:<ul>
          <li>metadata: generated for both interface and implementation classes</li>
          <li>assembly_metadata: generated for assembly only when specified in 
          root class of system</li>
          <li>class_metadata: generated only for implementation class</li>
          <li>interface_metadata: generated only for interface class</li>
</ul>
        
        
          </li>
</ul>
        
        
        <h2>Bug fixes</h2>
        
        
        <h3>Language issues</h3>
        
        
        <ul>
          <li>Now checks for valid export status in agent creation. Meaning that 
          in class <span class="eclass">MY_CLASS</span>, the following agent creation
          <span class="ekeyword">agent</span> <span class="efeature">target</span>.<span class="efeature">call</span> is valid if and 
          only if <span class="efeature">call</span> is exported to <span class="eclass">MY_CLASS</span>.</li>
          <li>Allowed type specification for open operands in agent creation, 
          i.e. one can now write: <span class="ekeyword">agent</span> <span class="efeature">f</span> ({<span class="eclass">A</span>}).</li>
          <li>Fixed bug which allowed compiler to accept the following incorrect 
          code: <span class="efeature">char</span>: <span class="eclass">CHARACTER</span> <span class="ekeyword">is</span> <span class="estring">&quot;rdsf&quot;</span></li>
          <li>Fixed bug in error reporting for incompatible <span class="eclass">BIT</span> types 
          involving bit manifest constants. It would 
          always report <span class="eclass">BIT 0</span>, instead of the actual number of bits in the bit 
          manifest constant.</li>
</ul>
        
        
        <h3>Compiler issues</h3>
<ul>
  <li>Fixed non-detection of changes when changing code from
          <span class="ekeyword">agent</span> <span class="efeature">call </span>to
          <span class="ekeyword">agent</span> <span class="ekeyword">Current</span>.<span class="efeature">call</span>. 
  Which should check for the validity of export of <span class="efeature">call </span>
  to current class.</li>
  <li>Fixed creation and assignment attempts on generic types that have anchored 
  types in their generic parameter, and the anchor is itself generic.</li>
</ul>
        
        
        <h3>Runtime/code generation issues</h3>
        
        
        <ul>
          <li>Fixed issue when shared library definition file did not exist or 
          was invalid. Now it will not produce any C compilation errors.</li>
          <li>Fixed bug in recoverable storable when there is a mismatch. The 
          first assignment attempt in 
          <span class="efeature">internal_correct_mismatch</span> from <span class="eclass">ANY</span> would crash.</li>
          <li>Fixed issue when retrieving storable files that contain TUPLE 
          instances.</li>
          <li>Fixed issues when using agents in a multithreaded application, 
          they will sometimes disable the garbage collector and the application 
          might quickly run out of memory.</li>
          <li>Fixed random crashes when EIF_MEMORY_CHUNK, EIF_MEMORY_SCAVENGE 
          and EIF_STACK_CHUNK environment variables had an incorrect value. 
          Instead the runtime will now fix the value to an appropriate one.</li>
</ul>
        
        
        <h3>.NET issues</h3>
        
        
        <ul>
          <li>Fixed bug in code generation  with following statement:<br>
<pre>	l_time: <span class="eclass">TIME_SPAN</span>
	
	<span class="efeature">print</span> (l_time.<span class="efeature">total_milliseconds</span>.<span class="efeature">out</span>)
</pre>
</li>
</ul>
        
        
        <h3>Store/Retrieve issues</h3>
        
        
        <ul>
          <li>Fixed memory corruption bug with recoverable storable when a 
          mismatch was detected</li>
          <li>Fixed issue where mismatch was not detected if attributes were 
          dropped</li>
</ul>
        
        
        </BODY>



</HTML>