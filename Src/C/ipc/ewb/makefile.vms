########################################################################
# Makefile generated from Makefile.SH on Fri Nov 18 08:53:57 PST 1994
#   .../C/ipc/ewb/makefile.VMS
# $Id$

SHELL = /bin/sh
JMAKE = jmake
#TOP = [--]
CURRENT = ipc/ewb
DIR = $(CURRENT)

########################################################################
# Parameters set by Configure -- edit config.sh if changes are needed

#AR = ar rc
#CC = cc
CTAGS = ctags
JCFLAGS = $(CFLAGS) /jcflag
MAKE = make
MKDEP = /home/tomh/Eiffel3/C/mkdep $(DPFLAGS) --
MV = /bin/mv
RANLIB = /usr/bin/ranlib
RM = DELETE/nolog
SED = /bin/sed

########################################################################
# Automatically generated parameters -- do not edit

SOURCES =  $(LSRC)
OBJECTS =  $(LOBJ)

########################################################################
# New suffixes and associated building rules -- edit with care

#.c.o:
#	$(RM) $@
#	write sys$$output "compile $<"
#	write sys$$output "compile $$< = $< "
#	write sys$$output "compile $$@ = $@ "
#	$(CC) $(JCFLAGS) $< 

########################################################################
# Jmake rules for building libraries, programs, scripts, and data files
# $X-Id: Jmake.rules,v 2.8.1.4 91/11/18 13:19:07 ram Exp Locker: ram $

########################################################################
# Force 'make depend' to be performed first -- do not edit

.FORCE_DEPEND::

all:: .FORCE_DEPEND

########################################################################
# Start of Jmakefile

#CINCLUDES   = /INCL=($(TOP),[-.shared],[--.run-time],[--.run-time.include],[--.idrs])
#CINCLUDES   = /INCL=($(DECC_INCLUDES),[-.shared],[--.run-time],[--.run-time.include],[--.idrs])
CINCLUDES = [C.IPC.SHARED]

CDEFINES = EIF_IPC #,DEBUG=1

#JCFLAGS = $(DPFLAGS) $(CDEFINES) $(DEBUG_CFLAGS)
DPFLAGS  = $(CINCLUDES) $(CDEFINES)
CFLAGS = $(DECC_FLAGS)$(DPFLAGS)

# define vms specific symbols for compiling, etc.
include EIFFEL_SRC:[C.ipc]Makeinc.VMS	    # use ipc common definitions

# Files used to build the daemon
#LSRC = ewb_proto.c eproto.c eproto.c eif_in.c eif_out.c ewb_init.c ewb_dumped.c
LSRC = eproto.c eif_in.c eif_out.c ewb_init.c ewb_dumped.c ewb_child.c ewb_transfer.c ewb_proto.c

# Derived object file names
LOBJ = $(patsubst %.c,%.obj,$(LSRC))
WOBJ = $(patsubst %.c,w%.obj,$(LSRC))
MT_LOBJ = $(patsubst %.c,MT%.obj,$(LSRC))
MT_WOBJ = $(patsubst %.c,MTw%.obj,$(LSRC))

$(OBJECTS) : $(EXTRA_DEPENDENCIES)

LISTINGS = $(patsubst %.c,%.lis,$(SOURCES))
$(LISTINGS) : $(EXTRA_DEPENDENCIES)
listings : $(LISTINGS)
	@-if f$$search("*.dia") .nes. "" then purge/nolog *.dia


# Where shared archive is located (path and name)
LIB_SHARED = [-.shared]
LIB_IDR = [--.idrs]
RUN_TIME = [--.run-time]


all :: ewb.olb

ewb.olb : $(LOBJ)
	libr/create $@ $^
	-purge/nolog *.obj
	-if f$$search("*.dia") .nes. "" then purge/nolog *.dia

all :: MTewb.olb
MTewb.olb : $(MT_LOBJ)
	libr/create $@ $^
	-purge/nolog *.obj
	-if f$$search("*.dia") .nes. "" then purge/nolog *.dia

show_local ::
	@write sys$$output "*** in Makefile: $(firstword $(MAKEFILE_LIST)),  target: $@ ***"
	@write sys$$output " $$(LOBJ) = ""$(LOBJ)"""
	@write sys$$output " $$(WOBJ) = ""$(WOBJ)"""
	@write sys$$output " $$(MT_LOBJ) = ""$(MT_LOBJ)"""
	@write sys$$output " $$(MT_WOBJ) = ""$(MT_WOBJ)"""



depend:: ../../mkdep

../../mkdep:
	@echo "You have to run Configure in $(TOP) first."; exit 1

depend::
	($(SED) '/^# DO NOT DELETE/q' Makefile && \
	$(MKDEP) $(SOURCES) | \
	$(SED) 's/: \.\//: /; /\/usr\/include/d' \
	) > Makefile.new
	cp Makefile Makefile.bak
	cp Makefile.new Makefile
	$(RM) Makefile.new

local_realclean::
	$(RM) ewb.olb;*


########################################################################
# Common rules for all Makefiles -- do not edit

emptyrule::

clean: local_clean
realclean: local_realclean
clobber: local_clobber

local_clean::
	$(RM) *.obj;*, *.dia;*, *.i;*

local_realclean:: local_clean

local_clobber:: local_realclean
	$(RM) Makefile config.sh

Makefile.SH: Jmakefile
	-@if test -f $(TOP)/.package; then \
	if test -f Makefile.SH; then \
	echo "	$(RM) Makefile.SH~; $(MV) Makefile.SH Makefile.SH~"; \
	$(RM) Makefile.SH~; $(MV) Makefile.SH Makefile.SH~; \
	fi; \
	echo "	$(JMAKE) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT)" ; \
	$(JMAKE) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT) ; \
	else touch $@; exit 0; fi

Makefile: Makefile.SH
	/bin/sh Makefile.SH

tags::
	$(CTAGS) -w *.[ch]
	$(CTAGS) -xw *.[ch] > tags

local_clobber::
	$(RM) tags

########################################################################
# Empty rules for directories with no sub-directories -- do not edit

install::
	@echo "install in $(CURRENT) done."

deinstall::
	@echo "deinstall in $(CURRENT) done."

install.man::
	@echo "install.man in $(CURRENT) done."

deinstall.man::
	@echo "deinstall.man in $(CURRENT) done."

Makefiles::

Makefiles.SH::

########################################################################
# Dependencies generated by make depend
# DO NOT DELETE THIS LINE -- make depend relies on it
ewb_proto.obj : ewb_proto.c
ewb_proto.obj : ../../eif_config.h
ewb_proto.obj : ../../eif_portable.h
ewb_proto.obj : ../../eif_confmagic.h
ewb_proto.obj : ../shared/request.h
ewb_proto.obj : ../shared/rqst_const.h
ewb_proto.obj : ../shared/stack.h
ewb_proto.obj : ../../run-time/eif_except.h
ewb_proto.obj : ../../eif_portable.h
ewb_proto.obj : ../../run-time/eif_malloc.h
ewb_proto.obj : ../../eif_portable.h
ewb_proto.obj : ../../run-time/eif_garcol.h
ewb_proto.obj : ../../eif_portable.h
ewb_proto.obj : ../../run-time/eif_struct.h
ewb_proto.obj : ../../eif_config.h
ewb_proto.obj : ../../eif_portable.h
ewb_proto.obj : ../../run-time/eif_plug.h
ewb_proto.obj : ../../eif_config.h
ewb_proto.obj : ../../eif_portable.h
ewb_proto.obj : ../../run-time/eif_interp.h
ewb_proto.obj : ../../eif_portable.h
ewb_proto.obj : ../../run-time/eif_struct.h
#ewb_proto.obj : ../../idrs/idrf.h
ewb_proto.obj : ../../idrs/idrs.h
ewb_proto.obj : ../shared/rqst_idrs.h
ewb_proto.obj : ../../idrs/idrs.h
ewb_proto.obj : eproto.h
eproto.obj : eproto.c
eproto.obj : ../../eif_config.h
eproto.obj : ../../eif_portable.h
eproto.obj : ../../eif_confmagic.h
eproto.obj : ../shared/request.h
eproto.obj : ../shared/rqst_const.h
eproto.obj : ../shared/stack.h
eproto.obj : ../../run-time/eif_except.h
eproto.obj : ../../eif_portable.h
eproto.obj : ../../run-time/eif_malloc.h
eproto.obj : ../../eif_portable.h
eproto.obj : ../../run-time/eif_garcol.h
eproto.obj : ../../eif_portable.h
eproto.obj : ../../run-time/eif_struct.h
eproto.obj : ../../eif_config.h
eproto.obj : ../../eif_portable.h
eproto.obj : ../../run-time/eif_plug.h
eproto.obj : ../../eif_config.h
eproto.obj : ../../eif_portable.h
eproto.obj : ../../run-time/eif_interp.h
eproto.obj : ../../eif_portable.h
eproto.obj : ../../run-time/eif_struct.h
eproto.obj : eproto.h
eproto.obj : ../shared/com.h
eproto.obj : ../shared/stream.h
eproto.obj : ../shared/ewbio.h
eproto.obj : ../shared/transfer.h
eif_in.obj : eif_in.c
eif_in.obj : eif_io.h
eif_in.obj : ../../eif_config.h
eif_in.obj : ../../eif_portable.h
eif_in.obj : ../../eif_confmagic.h
eif_in.obj : ../shared/request.h
eif_in.obj : ../shared/rqst_const.h
eif_in.obj : ../shared/stack.h
eif_in.obj : ../../run-time/eif_except.h
eif_in.obj : ../../eif_portable.h
eif_in.obj : ../../run-time/eif_malloc.h
eif_in.obj : ../../eif_portable.h
eif_in.obj : ../../run-time/eif_garcol.h
eif_in.obj : ../../eif_portable.h
eif_in.obj : ../../run-time/eif_struct.h
eif_in.obj : ../../eif_config.h
eif_in.obj : ../../eif_portable.h
eif_in.obj : ../../run-time/eif_plug.h
eif_in.obj : ../../eif_config.h
eif_in.obj : ../../eif_portable.h
eif_in.obj : ../../run-time/eif_interp.h
eif_in.obj : ../../eif_portable.h
eif_in.obj : ../../run-time/eif_struct.h
eif_in.obj : eproto.h
eif_in.obj : ../shared/com.h
eif_in.obj : ../shared/stream.h
eif_in.obj : ../shared/ewbio.h
eif_in.obj : ../shared/transfer.h
eif_in.obj : ewb.h
eif_in.obj : ../../run-time/eif_macros.h
eif_in.obj : ../../eif_config.h
eif_in.obj : ../../run-time/eif_malloc.h
eif_in.obj : ../../run-time/eif_garcol.h
eif_in.obj : ../../run-time/eif_except.h
eif_in.obj : ../../run-time/eif_local.h
eif_in.obj : ../../run-time/eif_copy.h
eif_in.obj : ../../eif_portable.h
eif_in.obj : ../../run-time/eif_plug.h
eif_in.obj : ../../run-time/eif_hector.h
eif_in.obj : ../../run-time/eif_cecil.h
eif_in.obj : ../../run-time/eif_plug.h
eif_in.obj : ../../run-time/eif_garcol.h
eif_in.obj : ../../run-time/eif_size.h
eif_in.obj : ../../eif_config.h
eif_out.obj : eif_out.c
eif_out.obj : eif_io.h
eif_out.obj : ../../eif_config.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../eif_confmagic.h
eif_out.obj : ../shared/request.h
eif_out.obj : ../shared/rqst_const.h
eif_out.obj : ../shared/stack.h
eif_out.obj : ../../run-time/eif_except.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../run-time/eif_malloc.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../run-time/eif_garcol.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../run-time/eif_struct.h
eif_out.obj : ../../eif_config.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../run-time/eif_plug.h
eif_out.obj : ../../eif_config.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../run-time/eif_interp.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../run-time/eif_struct.h
eif_out.obj : eproto.h
eif_out.obj : ../shared/com.h
eif_out.obj : ../shared/stream.h
eif_out.obj : ../shared/ewbio.h
eif_out.obj : ../shared/transfer.h
eif_out.obj : ../../run-time/eif_eiffel.h
eif_out.obj : ../../eif_config.h
eif_out.obj : ../../run-time/eif_out.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../run-time/eif_file.h
eif_out.obj : ../../run-time/eif_macros.h
eif_out.obj : ../../eif_config.h
eif_out.obj : ../../run-time/eif_malloc.h
eif_out.obj : ../../run-time/eif_garcol.h
eif_out.obj : ../../run-time/eif_except.h
eif_out.obj : ../../run-time/eif_local.h
eif_out.obj : ../../run-time/eif_copy.h
eif_out.obj : ../../eif_portable.h
eif_out.obj : ../../run-time/eif_plug.h
eif_out.obj : ../../run-time/eif_hector.h
eif_out.obj : ../../run-time/eif_cecil.h
eif_out.obj : ../../run-time/eif_plug.h
eif_out.obj : ../../run-time/eif_garcol.h
eif_out.obj : ../../run-time/eif_size.h
eif_out.obj : ../../eif_config.h
eif_out.obj : ../../run-time/eif_dir.h
eif_out.obj : ../../run-time/eif_macros.h
eif_out.obj : ../../run-time/eif_macros.h
eif_out.obj : ../shared/stack.h
ewb_init.obj : ewb_init.c
ewb_init.obj : ../../eif_config.h
ewb_init.obj : ../../eif_portable.h
ewb_init.obj : ../../eif_confmagic.h
ewb_init.obj : ../shared/eif_logfile.h
ewb_init.obj : ../shared/stream.h
ewb_init.obj : ../shared/ewbio.h
ewb_init.obj : eproto.h
ewb_init.obj : ../shared/transfer.h
new.obj : new.c
ewb_dumped.obj : ewb_dumped.c
ewb_dumped.obj : ../../run-time/eif_macros.h
ewb_dumped.obj : ../../eif_config.h
ewb_dumped.obj : ../../run-time/eif_malloc.h
ewb_dumped.obj : ../../eif_portable.h
ewb_dumped.obj : ../../eif_confmagic.h
ewb_dumped.obj : ../../run-time/eif_garcol.h
ewb_dumped.obj : ../../eif_portable.h
ewb_dumped.obj : ../../run-time/eif_struct.h
ewb_dumped.obj : ../../eif_config.h
ewb_dumped.obj : ../../eif_portable.h
ewb_dumped.obj : ../../run-time/eif_plug.h
ewb_dumped.obj : ../../eif_config.h
ewb_dumped.obj : ../../eif_portable.h
ewb_dumped.obj : ../../run-time/eif_except.h
ewb_dumped.obj : ../../eif_portable.h
ewb_dumped.obj : ../../run-time/eif_malloc.h
ewb_dumped.obj : ../../run-time/eif_garcol.h
ewb_dumped.obj : ../../run-time/eif_local.h
ewb_dumped.obj : ../../run-time/eif_copy.h
ewb_dumped.obj : ../../eif_portable.h
ewb_dumped.obj : ../../run-time/eif_plug.h
ewb_dumped.obj : ../../run-time/eif_hector.h
ewb_dumped.obj : ../../run-time/eif_cecil.h
ewb_dumped.obj : ../../run-time/eif_plug.h
ewb_dumped.obj : ../../run-time/eif_garcol.h
ewb_dumped.obj : ../../run-time/eif_size.h
ewb_dumped.obj : ../../eif_config.h
ewb_dumped.obj : ../../run-time/eif_interp.h
ewb_dumped.obj : ../../eif_portable.h
ewb_dumped.obj : ../../run-time/eif_struct.h
ewb_dumped.obj : ../shared/request.h
ewb_dumped.obj : ../shared/rqst_const.h
ewb_dumped.obj : ../shared/stack.h
ewb_dumped.obj : ../../run-time/eif_except.h
ewb_dumped.obj : ../../run-time/eif_interp.h
ewb_dumped.obj : ../shared/stack.h
ewb_dumped.obj : eif_io.h
ewb_dumped.obj : ../../eif_config.h
ewb_dumped.obj : ../../eif_portable.h
ewb_dumped.obj : ../shared/request.h
ewb_dumped.obj : eproto.h
ewb_dumped.obj : ../shared/com.h
ewb_dumped.obj : ../shared/stream.h
ewb_dumped.obj : ../shared/ewbio.h
ewb_dumped.obj : ../shared/transfer.h
