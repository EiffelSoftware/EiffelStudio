# ecom.lib - Makefile for Microsoft C

CC = cl
CFLAGS = /W0 /Ox /D "_WIN32_DCOM" /c /I$(ISE_EIFFEL)\bench\spec\windows\include /I$(EIFFEL_SRC)\library\com\spec\windows\include 

OBJ_CLIENT = ecom_eiffel_compiler_ieiffelclassdescriptor_impl_proxy_s.obj ecom_eiffel_compiler_ieiffelclusterdescriptor_impl_proxy_s.obj ecom_eiffel_compiler_ieiffelclusterproperties_impl_proxy_s.obj ecom_eiffel_compiler_ieiffelcompilerevents_impl_proxy_s.obj ecom_eiffel_compiler_ieiffelcompiler_impl_proxy_s.obj ecom_eiffel_compiler_ieiffelfeaturedescriptor_impl_proxy_s.obj ecom_eiffel_compiler_ieiffelprojectproperties_impl_proxy_s.obj ecom_eiffel_compiler_ieiffelproject_impl_proxy_s.obj ecom_eiffel_compiler_ieiffelsystembrowser_impl_proxy_s.obj 

OBJ_SERVER = ceiffelcompiler_factory.obj ceiffelproject_factory.obj ecom_eiffel_compiler_ceiffelcompiler_s.obj ecom_eiffel_compiler_ceiffelproject_s.obj ecom_eiffel_compiler_ieiffelclassdescriptor_impl_stub_s.obj ecom_eiffel_compiler_ieiffelclusterdescriptor_impl_stub_s.obj ecom_eiffel_compiler_ieiffelclusterproperties_impl_stub_s.obj ecom_eiffel_compiler_ieiffelcompiler_impl_stub_s.obj ecom_eiffel_compiler_ieiffelfeaturedescriptor_impl_stub_s.obj ecom_eiffel_compiler_ieiffelprojectproperties_impl_stub_s.obj ecom_eiffel_compiler_ieiffelproject_impl_stub_s.obj ecom_eiffel_compiler_ieiffelsystembrowser_impl_stub_s.obj ecom_gce_eif_compiler.obj ecom_gec_eif_compiler.obj ecom_xcp_ieiffelcompilerevents_ceiffelcompiler.obj server_registration.obj 

all: ecom_client.lib ecom_server.lib
	
ecom_server.lib: $(OBJ_SERVER)
	if exist $@ del $@
	lib /OUT:$@ $(OBJ_SERVER)
	del *.obj

ecom_client.lib: $(OBJ_CLIENT)
	if exist $@ del $@
	lib /OUT:$@ $(OBJ_CLIENT)
	del *.obj

.cpp.obj:
	$(CC) $(CFLAGS) $<
