<!DOCTYPE HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<HTML>
	<HEAD>
		<TITLE>Revisions</TITLE>
		<LINK REL=StyleSheet HREF="../../../../default.css">
	</HEAD>

	<BODY>
		<H1>Revisions and bug fixes</H1>
		<P>This document contains details of modifications and bug fixes to the vision2 library listed by the release version of EiffelStudio. All bug fixes and modifications are relative to the previously released version.</P>
        	<H2>Eiffel Studio 5.1</H2>
		<P><B>Interface modifications</B></P>
		<UL>
			<LI><B>EV_TEXTABLE and EV_TEXT_COMPONENT</B> - `text' no longer returns Void when empty.</LI>
			<LI><B>EV_WINDOW</B> - `title' no longer returns `Void' when empty.</LI>
			<LI><B>EV_TOOLTIPABLE</B> - `tooltip' no longer returns `Void' when empty. If empty, no tooltip is displayed.</LI>
			<LI><B>EV_TITLED_WINDOW</B> - `icon_name' no longer returns `Void' when empty.</LI>
			<LI><B>EV_CLIPBOARD</B> - `text' no longer returns `Void' when empty.</LI>
			<LI><B>EV_MESSAGE_DIALOG</B> - `text' no longer returns `Void' when empty.</LI>
			<LI><B>EV_FILE_DIALOG</B> - `file_name' no longer returns `Void' when the "Cancel" button was pressed, `Result' is empty instead.</LI>
			<LI><B>EV_DIRECTORY_DIALOG</B> - `directory' no longer returns `Void when the "Cancel" button was pressed, `Result' is empty instead.</LI>
			<LI><B>EV_CONTAINER</B> - has three new features `set_background_pixmap', `background_pixmap' and `remove_background_pixmap'. `background_pixmap' will be tessellated to cover complete background area.</LI>
			<LI><B>EV_TREE and EV_TREE_NODE</B> - Added `recursively_do_all'.</LI>
			<LI><B>EV_STANDARD_DIALOGS</B> - `ok_actions' have been renamed in descendents where appropriate. e.g. in EV_PRINT_DIALOG, they are renamed to `print_actions' to match the texts of the associated buttons. Where renamed, `ok_actions' are still available but obsolete. Selected button now also returns the correct text of the button (Previously it was always "Ok").</LI>
			<LI><B>EV_DIALOG_CONSTANTS</B> - Added new constants required for the above change to EV_STANDARD_DIALOGS.</LI>
			<LI><B>EV_DRAWABLE</B> - `draw_straight_line' now has a precondition to ensure the points are not identical.</LI>
			<LI><B>EV_SPLIT_AREA</B> - seperated `put' from `extend'. They were defined as synonyms, but have different behaviour.</LI>
			<LI><B>EV_DYNAMIC_TREE_ITEM</B> - Added `remove_subtree_function'. Item now only shows as expandable if there is a subtree function.</LI>
			<LI><B>EV_WINDOW</B> - Added `maximum_dimension' which is the greatest value allowed for `width' and `height'. This is also the default value for `width' and `height'.</LI>
			<LI><B>EV_OPTION_BUTTON</B> - This class has been made obsolete. It will be removed at the next release.</LI>
			<LI><B>EV_PICK_AND_DROPABLE_ACTION_SEQUENCES</B> - Added `pick_ended_actions' which are called when a pick ends.</LI>
			<LI><B>EV_WIDGET</B> - `set_minimum_height', `set_minimum_width' and `set_minimum_size' now all allow 0 as an argument. Previously, 1 was the minimum valid dimension.</LI>
			<LI><B>EV_MULTI_COLUMN_LIST</B> - `clear_selection' is now obsolete. Use `remove_selection' instead.</LI>
		</UL>
		<P><B>Bug fixes</B>
		<UL>
		<LI><B>Platform independent</B></LI>
			<UL>
			<LI><B>EV_FIXED</B> - Corrected `set_item_height', which was failing.</LI>
			<LI><B>EV_SELECTABLE</B> - Corrected postcondition of `is_selected'.</LI>
			<LI><B>EV_PND_ACTION_SEQUENCE</B> -- `veto_pebble_function' is now only called when its argument conforms to the transported pebble.</LI>
			</UL>
		<LI><B>Windows</B></LI>
			<UL>
			<LI><B>EV_RANGE</B> - The `maximum_value' could not be set greater than 32,000. The full range of an INTEGER may now be set. </LI>
			<LI><B>`focused_widget' from `EV_APPLICATION'</B> - was incorrect if an EV_CONTAINER had just received the focus.</LI>
			<LI><B>EV_PICK_AND_DROPABLE</B> - Ending a pick and drop on an EV_TOOL_BAR_BUTTON which has a non `void' pebble no longer starts a transport from the button. Reduced flicker on cursor when picking from an EV_TREE_ITEM or EV_LIST_ITEM. `pebble_function' would previously be called twice during a pick and drop.</LI>
			<LI><B>EV_FIXED</B> - Items contained are now drawn correctly dependent on their z order.</LI>
			<LI><B>EV_DRAWABLE</B>
				<UL>
				<LI>`Remove_clip_area' did not remove the clip_area correctly, but set it to the current size. This meant that if you then enlarged the widget, clipping would be applied. </LI>
				<LI>Fixed problems with ordering of calls to certain features which would cause postcondition violations in the implementation.</LI>
				<LI>`draw_pie_slice', `fill_pie_slice' and `draw_arc' now have divide by 0 protection in the implementation.</LI>
				</UL>
			<LI><B>EV_TEXT</B> - `set_background_color' now correctly sets the color of the whole background. Previously only the area containing text was modified.</LI>
			<LI><B>EV_CLIPBOARD</B> - Our implementation would sometimes query `text' when not allowed by Windows, thus causing postcondition failures.</LI>
			<LI><B>EV_BUTTON</B> - The result of `text_alignment' after default_create was incorrect.</LI>
			</UL>
		<LI><B>Gtk</B></LI>
			<UL>
				<LI>Gtk version of Studio released (including Vision2), so no fixes from 5.0</LI>
			</UL>
		</UL>
		</P>

<H2>Eiffel Studio 5.2</H2>
		<P><B>Interface modifications</B></P>
		<UL>
			<LI><B>EV_TEXTABLE</B> - `align_text_left', `align_text_right' and `align_text_center' have been extracted into a new class, EV_TEXT_ALIGNABLE which inherits EV_TEXTABLE. All previous descendents of EV_TEXTABLE now inherit EV_TEXT_ALIGNABLE, except EV_TREE_NODE, EV_MENU_ITEM, EV_LIST_ITEM and EV_TOOL_BAR_BUTTON</LI>
			<LI><B>EV_TEXT_COMPONENT</B> - Now inherits EV_TEXTABLE.</LI>
			<LI><B>EV_TEXT_ALIGNMENT_CONSTANTS</B> - New class added to support EV_TEXT_ALIGNABLE.</LI>
			<LI><B>EV_MENU_ITEM_LIST</B> - `parent' is now of type EV_ANY, instead of EV_MENU_ITEM_LIST as it did not hold for EV_MENU_BAR. The renaming of `parent' to `old_parent' in EV_MENU_BAR has now been removed.</LI>
		</UL>
		<P><B>Bug fixes</B>
		<UL>
		<LI><B>Platform independent</B></LI>
			<UL>
			</UL>
		<LI><B>Windows</B></LI>
			<UL>
			<LI><B>EV_RADIO_BUTTON</B> - The default minimum height after `default_create' is now enough to display the widget correctly. </LI>
			<LI><B>EV_CHECK_BUTTON</B> - The default minimum height after `default_create' is now enough to display the widget correctly.</LI>
			<LI><B>EV_NOTEBOOK</B> - When removing a widget from a notebook, it is now visible. Previously, the widget would be hidden.</LI>
			<LI><B>EV_LIST, EV_MULTI_COLUMN_LIST, EV_TREE</B> - Fixed `set_foreground_color' and `set_background_color'. Previously, calling these features did nothing.</LI>
			<LI><B>EV_BOX</B> - If a widget was not`is_item_expanded', then adding a new widget to the box before that widget would sometimes cause a different widget to become `is_item_expanded'.</LI>
			<LI><B>EV_TOOL_BAR_RADIO_BUTTON</B> - The currently selected button in `peers' was unselected when the button was pressed, and not when it was really selected. This bug made it possible to make `selected_peer' Void, which caused an invariant to fail.</LI>
			<LI><B>EV_LIST_ITEM</B> - Calling `enable_select' when parented in an EV_LIST now also sets the item as focused in the parent. This corrects bugs in keyboard navigation when selecting an item programatically.</LI>
			<LI><B>EV_FIXED</B> - The minimum size is constrained by the positions and sizes of the children (They must be completely displayed), although when the positions of the children were reduced, the minimum allowable size was not recomputed. This meant that the widget would be enlarged when the positions of the children increased, but could never be reduced in size when the positions of the children were decreased.</LI>
			</UL>
		<LI><B>Gtk</B></LI>
			<UL>
			</UL>
		</UL>
		</P>
		
</HTML>