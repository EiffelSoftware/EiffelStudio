RELEASE NOTE FOR SunOS VERSION

This note does not apply to any version other than Sun0S 4.1.x.
In particular it does not apply to the Solaris version.

1) Error when linking after finish_freezing
2) Running under OpenWindows (patch from Sun)


1) Error when linking after finish_freezing
-------------------------------------------

I receive an error message like the following, when I link after I've executed
finish_freezing: 

cc -o driver -O -DWORKBENCH -I $EIFFEL5/bench/spec/$PLATFORM/include  
F1/Fobj1.o D1/Dobj1.o C1/Cobj1.o E1/Eobj1.o  E1/emain.o
$EIFFEL5/bench/spec/$PLATFORM/lib/libwkbench.a -lm

ld: $EIFFEL5/bench/spec/$PLATFORM/lib/libwkbench.a: warning: table of 
contents for archive is out of date; rerun ranlib(1)

ld: Undefined symbol
   _hash_free
   _hash_search
   _winit
   _dserver
   _umain
   _debug_mode
   _hash_malloc

make: *** [eiffelbase] Error 2

This output has been formatted. The problem only occurs on sparc stations,
so in this case the $PLATFORM variable will always be `sparc'. 

Fix 

Please execute the following commands: 

ranlib $EIFFEL5/bench/spec/$PLATFORM/lib/libwkbench.a
ranlib $EIFFEL5/bench/spec/$PLATFORM/lib/libruntime.a

and execute a ranlib on the following files as well (depending on your
installation): 

EiffelVision 
$EIFFEL5/library/vision/spec/$PLATFORM/lib/Xt.a
$EIFFEL5/library/vision/spec/$PLATFORM/lib/motif_Clib.a 

EiffelLex 
$EIFFEL5/library/lex/spec/$PLATFORM/lib/lex.a 

EiffelNet 
$EIFFEL5/library/net/spec/$PLATFORM/lib/libnet.a
$EIFFEL5/library/net/spec/$PLATFORM/lib/libwnet.a 

Discussion 

This problem is not specific to Eiffel, it is a problem with archives on
Sun platforms: the path is hard coded so each time you're moving the achives,
you must run ranlib again. 

After doing that, you will have to run make again in the EIFGEN/W_code
directory to finish the C compilation. 

It is possible that during C compilation you get a message that looks like:


make: *** No rule to make target `two150F.o'.  Stop.

This occurs because the precompilation erases the C files and objects files
once the intermediate objects are created and the process doesn't expect any
problem during the C compilation. 

You have two options: 

    - Start the precompilation from scratch, by removing the EIFGEN
      directory, and redo the entire precompilation process. 

    - Modify the Makefile in the EIFGEN/W_code directory: remove the
      dependencies for the final linking by replacing
      `driver: F1/Fobj1.o .... Makefile' by `driver:'. Now run make
      again, what will do the linking directly. 

The second option is a lot faster as it involves only a linking of existing
objects. 

2) Running under OpenWindows (patch from Sun)
---------------------------------------------

Running applications based on Motif 1.2 can crash OpenWindows under SunOS
4.x. To prevent the crash, you need to install the patch 100444.

This patch is available from Sun Microsystems.

To check if the patch is installed, type:
cd $OPENWINHOME/bin
strings xnews | grep "Patch #"

You need to install the patch unless a line containing 3000-### is
displayed.

You can download the patch from Sun Microsystems:

ftp sunsite.unc.edu
cd /pub/sun-info/sun-patches

or

ftp sunsolve1.sun.com
cd /pub/patches


Currently the patch revision number is 69 so the files to download are:
100444.readme and 100444-69.tar.Z

Follow the standard procedure to install the patch on your machine.

